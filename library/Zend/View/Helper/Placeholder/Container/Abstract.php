<php?php
php/php*php*
php php*php Zendphp Framework
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_View
php php*php php@subpackagephp Helper
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@versionphp php php php php$Idphp:php Abstractphp.phpphp php2php0php0php9php6php php2php0php1php0php-php0php1php-php0php6php php0php2php:php0php5php:php0php9Zphp bkarwinphp php$
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/

php/php*php*
php php*php Abstractphp classphp representingphp containerphp forphp placeholderphp values
php php*
php php*php php@packagephp php php php Zendphp_View
php php*php php@subpackagephp Helper
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/
abstractphp classphp Zendphp_Viewphp_Helperphp_Placeholderphp_Containerphp_Abstractphp extendsphp ArrayObject
php{
php php php php php/php*php*
php php php php php php*php Whetherphp orphp notphp tophp overridephp allphp contentsphp ofphp placeholder
php php php php php php*php php@constphp string
php php php php php php*php/
php php php php constphp SETphp php php php php=php php'SETphp'php;

php php php php php/php*php*
php php php php php php*php Whetherphp orphp notphp tophp appendphp contentsphp tophp placeholder
php php php php php php*php php@constphp string
php php php php php php*php/
php php php php constphp APPENDphp php=php php'APPENDphp'php;

php php php php php/php*php*
php php php php php php*php Whetherphp orphp notphp tophp prependphp contentsphp tophp placeholder
php php php php php php*php php@constphp string
php php php php php php*php/
php php php php constphp PREPENDphp php=php php'PREPENDphp'php;

php php php php php/php*php*
php php php php php php*php Whatphp textphp tophp prefixphp thephp placeholderphp withphp whenphp rendering
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_prefixphp php php php php=php php'php'php;

php php php php php/php*php*
php php php php php php*php Whatphp textphp tophp appendphp thephp placeholderphp withphp whenphp rendering
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_postfixphp php php php=php php'php'php;

php php php php php/php*php*
php php php php php php*php Whatphp stringphp tophp usephp betweenphp individualphp itemsphp inphp thephp placeholderphp whenphp rendering
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_separatorphp php=php php'php'php;

php php php php php/php*php*
php php php php php php*php Whatphp stringphp tophp usephp asphp thephp indentationphp ofphp outputphp,php thisphp willphp typicallyphp bephp spacesphp.php Egphp:php php'php php php php php'
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_indentphp php=php php'php'php;

php php php php php/php*php*
php php php php php php*php Whetherphp orphp notphp wephp'rephp alreadyphp capturingphp forphp thisphp givenphp container
php php php php php php*php php@varphp bool
php php php php php php*php/
php php php php protectedphp php$php_captureLockphp php=php falsephp;

php php php php php/php*php*
php php php php php php*php Whatphp typephp ofphp capturephp php(overwritephp php(setphp)php,php appendphp,php prependphp)php tophp use
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_captureTypephp;

php php php php php/php*php*
php php php php php php*php Keyphp tophp whichphp tophp capturephp content
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_captureKeyphp;

php php php php php/php*php*
php php php php php php*php Constructorphp php-php Thisphp isphp neededphp sophp thatphp wephp canphp attachphp aphp classphp memberphp asphp thephp ArrayObjectphp container
php php php php php php*
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php publicphp functionphp php_php_constructphp(php)
php php php php php{
php php php php php php php php parentphp:php:php_php_constructphp(arrayphp(php)php,php parentphp:php:ARRAYphp_ASphp_PROPSphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp aphp singlephp value
php php php php php php*
php php php php php php*php php@paramphp php mixedphp php$value
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php publicphp functionphp setphp(php$valuephp)
php php php php php{
php php php php php php php php php$thisphp-php>exchangeArrayphp(arrayphp(php$valuephp)php)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Prependphp aphp valuephp tophp thephp topphp ofphp thephp container
php php php php php php*
php php php php php php*php php@paramphp php mixedphp php$value
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php publicphp functionphp prependphp(php$valuephp)
php php php php php{
php php php php php php php php php$valuesphp php=php php$thisphp-php>getArrayCopyphp(php)php;
php php php php php php php php arrayphp_unshiftphp(php$valuesphp,php php$valuephp)php;
php php php php php php php php php$thisphp-php>exchangeArrayphp(php$valuesphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp containerphp value
php php php php php php*
php php php php php php*php Ifphp singlephp elementphp registeredphp,php returnsphp thatphp elementphp;php otherwisephp,
php php php php php php*php serializesphp tophp arrayphp.
php php php php php php*
php php php php php php*php php@returnphp mixed
php php php php php php*php/
php php php php publicphp functionphp getValuephp(php)
php php php php php{
php php php php php php php php ifphp php(php1php php=php=php countphp(php$thisphp)php)php php{
php php php php php php php php php php php php php$keysphp php=php php$thisphp-php>getKeysphp(php)php;
php php php php php php php php php php php php php$keyphp php php=php arrayphp_shiftphp(php$keysphp)php;
php php php php php php php php php php php php returnphp php$thisphp[php$keyphp]php;
php php php php php php php php php}

php php php php php php php php returnphp php$thisphp-php>getArrayCopyphp(php)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp prefixphp forphp php_php_toStringphp(php)php serialization
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$prefix
php php php php php php*php php@returnphp Zendphp_Viewphp_Helperphp_Placeholderphp_Container
php php php php php php*php/
php php php php publicphp functionphp setPrefixphp(php$prefixphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_prefixphp php=php php(stringphp)php php$prefixphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp prefix
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getPrefixphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_prefixphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp postfixphp forphp php_php_toStringphp(php)php serialization
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$postfix
php php php php php php*php php@returnphp Zendphp_Viewphp_Helperphp_Placeholderphp_Container
php php php php php php*php/
php php php php publicphp functionphp setPostfixphp(php$postfixphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_postfixphp php=php php(stringphp)php php$postfixphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp postfix
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getPostfixphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_postfixphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp separatorphp forphp php_php_toStringphp(php)php serialization
php php php php php php*
php php php php php php*php Usedphp tophp implodephp elementsphp inphp container
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$separator
php php php php php php*php php@returnphp Zendphp_Viewphp_Helperphp_Placeholderphp_Container
php php php php php php*php/
php php php php publicphp functionphp setSeparatorphp(php$separatorphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_separatorphp php=php php(stringphp)php php$separatorphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp separator
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getSeparatorphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_separatorphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp thephp indentationphp stringphp forphp php_php_toStringphp(php)php serializationphp,
php php php php php php*php optionallyphp,php ifphp aphp numberphp isphp passedphp,php itphp willphp bephp thephp numberphp ofphp spaces
php php php php php php*
php php php php php php*php php@paramphp php stringphp|intphp php$indent
php php php php php php*php php@returnphp Zendphp_Viewphp_Helperphp_Placeholderphp_Containerphp_Abstract
php php php php php php*php/
php php php php publicphp functionphp setIndentphp(php$indentphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_indentphp php=php php$thisphp-php>getWhitespacephp(php$indentphp)php;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp indentation
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getIndentphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_indentphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp whitespacephp representationphp ofphp php$indent
php php php php php php*
php php php php php php*php php@paramphp php intphp|stringphp php$indent
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getWhitespacephp(php$indentphp)
php php php php php{
php php php php php php php php ifphp php(isphp_intphp(php$indentphp)php)php php{
php php php php php php php php php php php php php$indentphp php=php strphp_repeatphp(php'php php'php,php php$indentphp)php;
php php php php php php php php php}

php php php php php php php php returnphp php(stringphp)php php$indentphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Startphp capturingphp contentphp tophp pushphp intophp placeholder
php php php php php php*
php php php php php php*php php@paramphp php intphp php$typephp Howphp tophp capturephp contentphp intophp placeholderphp;php appendphp,php prependphp,php orphp set
php php php php php php*php php@returnphp void
php php php php php php*php php@throwsphp Zendphp_Viewphp_Helperphp_Placeholderphp_Exceptionphp ifphp nestedphp capturesphp detected
php php php php php php*php/
php php php php publicphp functionphp captureStartphp(php$typephp php=php Zendphp_Viewphp_Helperphp_Placeholderphp_Containerphp_Abstractphp:php:APPENDphp,php php$keyphp php=php nullphp)
php php php php php{
php php php php php php php php ifphp php(php$thisphp-php>php_captureLockphp)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Viewphp/Helperphp/Placeholderphp/Containerphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php$ephp php=php newphp Zendphp_Viewphp_Helperphp_Placeholderphp_Containerphp_Exceptionphp(php'Cannotphp nestphp placeholderphp capturesphp forphp thephp samephp placeholderphp'php)php;
php php php php php php php php php php php php php$ephp-php>setViewphp(php$thisphp-php>viewphp)php;
php php php php php php php php php php php php throwphp php$ephp;
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_captureLockphp php=php truephp;
php php php php php php php php php$thisphp-php>php_captureTypephp php=php php$typephp;
php php php php php php php php ifphp php(php(nullphp php!php=php=php php$keyphp)php php&php&php isphp_scalarphp(php$keyphp)php)php php{
php php php php php php php php php php php php php$thisphp-php>php_captureKeyphp php=php php(stringphp)php php$keyphp;
php php php php php php php php php}
php php php php php php php php obphp_startphp(php)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Endphp contentphp capture
php php php php php php*
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php publicphp functionphp captureEndphp(php)
php php php php php{
php php php php php php php php php$dataphp php php php php php php php php php php php php php php php=php obphp_getphp_cleanphp(php)php;
php php php php php php php php php$keyphp php php php php php php php php php php php php php php php php=php nullphp;
php php php php php php php php php$thisphp-php>php_captureLockphp php=php falsephp;
php php php php php php php php ifphp php(nullphp php!php=php=php php$thisphp-php>php_captureKeyphp)php php{
php php php php php php php php php php php php php$keyphp php=php php$thisphp-php>php_captureKeyphp;
php php php php php php php php php}
php php php php php php php php switchphp php(php$thisphp-php>php_captureTypephp)php php{
php php php php php php php php php php php php casephp selfphp:php:SETphp:
php php php php php php php php php php php php php php php php ifphp php(nullphp php!php=php=php php$keyphp)php php{
php php php php php php php php php php php php php php php php php php php php php$thisphp[php$keyphp]php php=php php$dataphp;
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php$thisphp-php>exchangeArrayphp(arrayphp(php$dataphp)php)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php casephp selfphp:php:PREPENDphp:
php php php php php php php php php php php php php php php php ifphp php(nullphp php!php=php=php php$keyphp)php php{
php php php php php php php php php php php php php php php php php php php php php$arrayphp php php=php arrayphp(php$keyphp php=php>php php$dataphp)php;
php php php php php php php php php php php php php php php php php php php php php$valuesphp php=php php$thisphp-php>getArrayCopyphp(php)php;
php php php php php php php php php php php php php php php php php php php php php$finalphp php php=php php$arrayphp php+php php$valuesphp;
php php php php php php php php php php php php php php php php php php php php php$thisphp-php>exchangeArrayphp(php$finalphp)php;
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php$thisphp-php>prependphp(php$dataphp)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php casephp selfphp:php:APPENDphp:
php php php php php php php php php php php php defaultphp:
php php php php php php php php php php php php php php php php ifphp php(nullphp php!php=php=php php$keyphp)php php{
php php php php php php php php php php php php php php php php php php php php ifphp php(emptyphp(php$thisphp[php$keyphp]php)php)php php{
php php php php php php php php php php php php php php php php php php php php php php php php php$thisphp[php$keyphp]php php=php php$dataphp;
php php php php php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php php php php php$thisphp[php$keyphp]php php.php=php php$dataphp;
php php php php php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php$thisphp[php$thisphp-php>nextIndexphp(php)php]php php=php php$dataphp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp keys
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp getKeysphp(php)
php php php php php{
php php php php php php php php php$arrayphp php=php php$thisphp-php>getArrayCopyphp(php)php;
php php php php php php php php returnphp arrayphp_keysphp(php$arrayphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Nextphp Index
php php php php php php*
php php php php php php*php asphp definedphp byphp thephp PHPphp manual
php php php php php php*php php@returnphp int
php php php php php php*php/
php php php php publicphp functionphp nextIndexphp(php)
php php php php php{
php php php php php php php php php$keysphp php=php php$thisphp-php>getKeysphp(php)php;
php php php php php php php php ifphp php(php0php php=php=php countphp(php$keysphp)php)php php{
php php php php php php php php php php php php returnphp php0php;
php php php php php php php php php}

php php php php php php php php returnphp php$nextIndexphp php=php maxphp(php$keysphp)php php+php php1php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Renderphp thephp placeholder
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp toStringphp(php$indentphp php=php nullphp)
php php php php php{
php php php php php php php php php$indentphp php=php php(php$indentphp php!php=php=php nullphp)
php php php php php php php php php php php php php php php php php?php php$thisphp-php>getWhitespacephp(php$indentphp)
php php php php php php php php php php php php php php php php php:php php$thisphp-php>getIndentphp(php)php;

php php php php php php php php php$itemsphp php php=php php$thisphp-php>getArrayCopyphp(php)php;
php php php php php php php php php$returnphp php=php php$indent
php php php php php php php php php php php php php php php php php.php php$thisphp-php>getPrefixphp(php)
php php php php php php php php php php php php php php php php php.php implodephp(php$thisphp-php>getSeparatorphp(php)php,php php$itemsphp)
php php php php php php php php php php php php php php php php php.php php$thisphp-php>getPostfixphp(php)php;
php php php php php php php php php$returnphp php=php pregphp_replacephp(php"php/php(php\rphp\nphp?php|php\nphp)php/php"php,php php'php$php1php'php php.php php$indentphp,php php$returnphp)php;
php php php php php php php php returnphp php$returnphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Serializephp objectphp tophp string
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp php_php_toStringphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>toStringphp(php)php;
php php php php php}
php}

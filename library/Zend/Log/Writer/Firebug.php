<php?php
php/php*php*
php php*php Zendphp Framework
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Log
php php*php php@subpackagephp Writer
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php php$Idphp:php Firebugphp.phpphp php2php3php5php7php6php php2php0php1php0php-php1php2php-php2php3php php2php3php:php2php5php:php4php4Zphp ramonphp php$
php php*php/

php/php*php*php Zendphp_Logphp php*php/
requirephp_oncephp php'Zendphp/Logphp.phpphp'php;

php/php*php*php Zendphp_Logphp_Writerphp_Abstractphp php*php/
requirephp_oncephp php'Zendphp/Logphp/Writerphp/Abstractphp.phpphp'php;

php/php*php*php Zendphp_Logphp_Formatterphp_Firebugphp php*php/
requirephp_oncephp php'Zendphp/Logphp/Formatterphp/Firebugphp.phpphp'php;

php/php*php*php Zendphp_Wildfirephp_Pluginphp_FirePhpphp php*php/
requirephp_oncephp php'Zendphp/Wildfirephp/Pluginphp/FirePhpphp.phpphp'php;

php/php*php*
php php*php Writesphp logphp messagesphp tophp thephp Firebugphp Consolephp viaphp FirePHPphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Log
php php*php php@subpackagephp Writer
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/
classphp Zendphp_Logphp_Writerphp_Firebugphp extendsphp Zendphp_Logphp_Writerphp_Abstract
php{
php php php php php/php*php*
php php php php php php*php Mapsphp loggingphp prioritiesphp tophp loggingphp displayphp styles
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_priorityStylesphp php=php arrayphp(Zendphp_Logphp:php:EMERGphp php php=php>php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:ERRORphp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Logphp:php:ALERTphp php php=php>php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:ERRORphp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Logphp:php:CRITphp php php php=php>php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:ERRORphp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Logphp:php:ERRphp php php php php=php>php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:ERRORphp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Logphp:php:WARNphp php php php=php>php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:WARNphp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Logphp:php:NOTICEphp php=php>php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:INFOphp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Logphp:php:INFOphp php php php=php>php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:INFOphp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Logphp:php:DEBUGphp php php=php>php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:LOGphp)php;

php php php php php/php*php*
php php php php php php*php Thephp defaultphp loggingphp stylephp forphp unphp-mappedphp priorities
php php php php php php*
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_defaultPriorityStylephp php=php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:LOGphp;

php php php php php/php*php*
php php php php php php*php Flagphp indicatingphp whetherphp thephp logphp writerphp isphp enabled
php php php php php php*
php php php php php php*php php@varphp boolean
php php php php php php*php/
php php php php protectedphp php$php_enabledphp php=php truephp;

php php php php php/php*php*
php php php php php php*php Classphp constructor
php php php php php php*
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php publicphp functionphp php_php_constructphp(php)
php php php php php{
php php php php php php php php ifphp php(phpphp_sapiphp_namephp(php)php php=php=php php'cliphp'php)php php{
php php php php php php php php php php php php php$thisphp-php>setEnabledphp(falsephp)php;
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_formatterphp php=php newphp Zendphp_Logphp_Formatterphp_Firebugphp(php)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Createphp aphp newphp instancephp ofphp Zendphp_Logphp_Writerphp_Firebug
php php php php php php*
php php php php php php*php php@paramphp php arrayphp|Zendphp_Configphp php$config
php php php php php php*php php@returnphp Zendphp_Logphp_Writerphp_Firebug
php php php php php php*php/
php php php php staticphp publicphp functionphp factoryphp(php$configphp)
php php php php php{
php php php php php php php php returnphp newphp selfphp(php)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Enablephp orphp disablephp thephp logphp writerphp.
php php php php php php*
php php php php php php*php php@paramphp booleanphp php$enabledphp Setphp tophp TRUEphp tophp enablephp thephp logphp writer
php php php php php php*php php@returnphp booleanphp Thephp previousphp valuephp.
php php php php php php*php/
php php php php publicphp functionphp setEnabledphp(php$enabledphp)
php php php php php{
php php php php php php php php php$previousphp php=php php$thisphp-php>php_enabledphp;
php php php php php php php php php$thisphp-php>php_enabledphp php=php php$enabledphp;
php php php php php php php php returnphp php$previousphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Determinephp ifphp thephp logphp writerphp isphp enabledphp.
php php php php php php*
php php php php php php*php php@returnphp booleanphp Returnsphp TRUEphp ifphp thephp logphp writerphp isphp enabledphp.
php php php php php php*php/
php php php php publicphp functionphp getEnabledphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_enabledphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp thephp defaultphp displayphp stylephp forphp userphp-definedphp priorities
php php php php php php*
php php php php php php*php php@paramphp stringphp php$stylephp Thephp defaultphp logphp displayphp style
php php php php php php*php php@returnphp stringphp Returnsphp previousphp defaultphp logphp displayphp style
php php php php php php*php/
php php php php publicphp functionphp setDefaultPriorityStylephp(php$stylephp)
php php php php php{
php php php php php php php php php$previousphp php=php php$thisphp-php>php_defaultPriorityStylephp;
php php php php php php php php php$thisphp-php>php_defaultPriorityStylephp php=php php$stylephp;
php php php php php php php php returnphp php$previousphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp thephp defaultphp displayphp stylephp forphp userphp-definedphp priorities
php php php php php php*
php php php php php php*php php@returnphp stringphp Returnsphp thephp defaultphp logphp displayphp style
php php php php php php*php/
php php php php publicphp functionphp getDefaultPriorityStylephp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_defaultPriorityStylephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp aphp displayphp stylephp forphp aphp loggingphp priority
php php php php php php*
php php php php php php*php php@paramphp intphp php$priorityphp Thephp loggingphp priority
php php php php php php*php php@paramphp stringphp php$stylephp Thephp loggingphp displayphp style
php php php php php php*php php@returnphp stringphp|booleanphp Thephp previousphp loggingphp displayphp stylephp ifphp definedphp orphp TRUEphp otherwise
php php php php php php*php/
php php php php publicphp functionphp setPriorityStylephp(php$priorityphp,php php$stylephp)
php php php php php{
php php php php php php php php php$previousphp php=php truephp;
php php php php php php php php ifphp php(arrayphp_keyphp_existsphp(php$priorityphp,php$thisphp-php>php_priorityStylesphp)php)php php{
php php php php php php php php php php php php php$previousphp php=php php$thisphp-php>php_priorityStylesphp[php$priorityphp]php;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_priorityStylesphp[php$priorityphp]php php=php php$stylephp;
php php php php php php php php returnphp php$previousphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp aphp displayphp stylephp forphp aphp loggingphp priority
php php php php php php*
php php php php php php*php php@paramphp intphp php$priorityphp Thephp loggingphp priority
php php php php php php*php php@returnphp stringphp|booleanphp Thephp loggingphp displayphp stylephp ifphp definedphp orphp FALSEphp otherwise
php php php php php php*php/
php php php php publicphp functionphp getPriorityStylephp(php$priorityphp)
php php php php php{
php php php php php php php php ifphp php(arrayphp_keyphp_existsphp(php$priorityphp,php$thisphp-php>php_priorityStylesphp)php)php php{
php php php php php php php php php php php php returnphp php$thisphp-php>php_priorityStylesphp[php$priorityphp]php;
php php php php php php php php php}
php php php php php php php php returnphp falsephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Logphp aphp messagephp tophp thephp Firebugphp Consolephp.
php php php php php php*
php php php php php php*php php@paramphp arrayphp php$eventphp Thephp eventphp data
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php protectedphp functionphp php_writephp(php$eventphp)
php php php php php{
php php php php php php php php ifphp php(php!php$thisphp-php>getEnabledphp(php)php)php php{
php php php php php php php php php php php php returnphp;
php php php php php php php php php}

php php php php php php php php ifphp php(arrayphp_keyphp_existsphp(php$eventphp[php'priorityphp'php]php,php$thisphp-php>php_priorityStylesphp)php)php php{
php php php php php php php php php php php php php$typephp php=php php$thisphp-php>php_priorityStylesphp[php$eventphp[php'priorityphp'php]php]php;
php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php$typephp php=php php$thisphp-php>php_defaultPriorityStylephp;
php php php php php php php php php}

php php php php php php php php php$messagephp php=php php$thisphp-php>php_formatterphp-php>formatphp(php$eventphp)php;

php php php php php php php php php$labelphp php=php issetphp(php$eventphp[php'firebugLabelphp'php]php)php?php$eventphp[php'firebugLabelphp'php]php:nullphp;

php php php php php php php php Zendphp_Wildfirephp_Pluginphp_FirePhpphp:php:getInstancephp(php)php-php>sendphp(php$messagephp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php$labelphp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php$typephp,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php arrayphp(php'traceOffsetphp'php=php>php4php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'fixZendLogOffsetIfApplicablephp'php=php>truephp)php)php;
php php php php php}
php}

<php?php
php/php*php*
php php*php Zendphp Framework
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Barcode
php php*php php@subpackagephp Object
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php php$Idphp:php Codephp2php5php.phpphp php2php0php0php9php6php php2php0php1php0php-php0php1php-php0php6php php0php2php:php0php5php:php0php9Zphp bkarwinphp php$
php php*php/

php/php*php*
php php*php php@seephp Zendphp_Barcodephp_Objectphp_ObjectAbstract
php php*php/
requirephp_oncephp php'Zendphp/Barcodephp/Objectphp/ObjectAbstractphp.phpphp'php;

php/php*php*
php php*php php@seephp Zendphp_Validatephp_Barcode
php php*php/
requirephp_oncephp php'Zendphp/Validatephp/Barcodephp.phpphp'php;

php/php*php*
php php*php Classphp forphp generatephp Codephp1php2php8php barcode
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Barcode
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/
classphp Zendphp_Barcodephp_Objectphp_Codephp1php2php8php extendsphp Zendphp_Barcodephp_Objectphp_ObjectAbstract
php{
php php php php php/php*php*
php php php php php php*php Drawingphp ofphp checksum
php php php php php php*php php(evenphp ifphp itphp'sphp sometimephp optionalphp,php mostphp ofphp timephp itphp'sphp requiredphp)
php php php php php php*php php@varphp boolean
php php php php php php*php/
php php php php protectedphp php$php_withChecksumphp php=php truephp;

php php php php php/php*php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_convertedTextphp php=php arrayphp(php)php;

php php php php protectedphp php$php_codingMapphp php=php arrayphp(
php php php php php php php php php php php php php php php php php php0php php=php>php php"php1php1php0php1php1php0php0php1php1php0php0php"php,php php php php1php php=php>php php"php1php1php0php0php1php1php0php1php1php0php0php"php,php php php php2php php=php>php php"php1php1php0php0php1php1php0php0php1php1php0php"php,
php php php php php php php php php php php php php php php php php php3php php=php>php php"php1php0php0php1php0php0php1php1php0php0php0php"php,php php php php4php php=php>php php"php1php0php0php1php0php0php0php1php1php0php0php"php,php php php php5php php=php>php php"php1php0php0php0php1php0php0php1php1php0php0php"php,
php php php php php php php php php php php php php php php php php php6php php=php>php php"php1php0php0php1php1php0php0php1php0php0php0php"php,php php php php7php php=php>php php"php1php0php0php1php1php0php0php0php1php0php0php"php,php php php php8php php=php>php php"php1php0php0php0php1php1php0php0php1php0php0php"php,
php php php php php php php php php php php php php php php php php php9php php=php>php php"php1php1php0php0php1php0php0php1php0php0php0php"php,php php php1php0php php=php>php php"php1php1php0php0php1php0php0php0php1php0php0php"php,php php php1php1php php=php>php php"php1php1php0php0php0php1php0php0php1php0php0php"php,
php php php php php php php php php php php php php php php php php1php2php php=php>php php"php1php0php1php1php0php0php1php1php1php0php0php"php,php php php1php3php php=php>php php"php1php0php0php1php1php0php1php1php1php0php0php"php,php php php1php4php php=php>php php"php1php0php0php1php1php0php0php1php1php1php0php"php,
php php php php php php php php php php php php php php php php php1php5php php=php>php php"php1php0php1php1php1php0php0php1php1php0php0php"php,php php php1php6php php=php>php php"php1php0php0php1php1php1php0php1php1php0php0php"php,php php php1php7php php=php>php php"php1php0php0php1php1php1php0php0php1php1php0php"php,
php php php php php php php php php php php php php php php php php1php8php php=php>php php"php1php1php0php0php1php1php1php0php0php1php0php"php,php php php1php9php php=php>php php"php1php1php0php0php1php0php1php1php1php0php0php"php,php php php2php0php php=php>php php"php1php1php0php0php1php0php0php1php1php1php0php"php,
php php php php php php php php php php php php php php php php php2php1php php=php>php php"php1php1php0php1php1php1php0php0php1php0php0php"php,php php php2php2php php=php>php php"php1php1php0php0php1php1php1php0php1php0php0php"php,php php php2php3php php=php>php php"php1php1php1php0php1php1php0php1php1php1php0php"php,
php php php php php php php php php php php php php php php php php2php4php php=php>php php"php1php1php1php0php1php0php0php1php1php0php0php"php,php php php2php5php php=php>php php"php1php1php1php0php0php1php0php1php1php0php0php"php,php php php2php6php php=php>php php"php1php1php1php0php0php1php0php0php1php1php0php"php,
php php php php php php php php php php php php php php php php php2php7php php=php>php php"php1php1php1php0php1php1php0php0php1php0php0php"php,php php php2php8php php=php>php php"php1php1php1php0php0php1php1php0php1php0php0php"php,php php php2php9php php=php>php php"php1php1php1php0php0php1php1php0php0php1php0php"php,
php php php php php php php php php php php php php php php php php3php0php php=php>php php"php1php1php0php1php1php0php1php1php0php0php0php"php,php php php3php1php php=php>php php"php1php1php0php1php1php0php0php0php1php1php0php"php,php php php3php2php php=php>php php"php1php1php0php0php0php1php1php0php1php1php0php"php,
php php php php php php php php php php php php php php php php php3php3php php=php>php php"php1php0php1php0php0php0php1php1php0php0php0php"php,php php php3php4php php=php>php php"php1php0php0php0php1php0php1php1php0php0php0php"php,php php php3php5php php=php>php php"php1php0php0php0php1php0php0php0php1php1php0php"php,
php php php php php php php php php php php php php php php php php3php6php php=php>php php"php1php0php1php1php0php0php0php1php0php0php0php"php,php php php3php7php php=php>php php"php1php0php0php0php1php1php0php1php0php0php0php"php,php php php3php8php php=php>php php"php1php0php0php0php1php1php0php0php0php1php0php"php,
php php php php php php php php php php php php php php php php php3php9php php=php>php php"php1php1php0php1php0php0php0php1php0php0php0php"php,php php php4php0php php=php>php php"php1php1php0php0php0php1php0php1php0php0php0php"php,php php php4php1php php=php>php php"php1php1php0php0php0php1php0php0php0php1php0php"php,
php php php php php php php php php php php php php php php php php4php2php php=php>php php"php1php0php1php1php0php1php1php1php0php0php0php"php,php php php4php3php php=php>php php"php1php0php1php1php0php0php0php1php1php1php0php"php,php php php4php4php php=php>php php"php1php0php0php0php1php1php0php1php1php1php0php"php,
php php php php php php php php php php php php php php php php php4php5php php=php>php php"php1php0php1php1php1php0php1php1php0php0php0php"php,php php php4php6php php=php>php php"php1php0php1php1php1php0php0php0php1php1php0php"php,php php php4php7php php=php>php php"php1php0php0php0php1php1php1php0php1php1php0php"php,
php php php php php php php php php php php php php php php php php4php8php php=php>php php"php1php1php1php0php1php1php1php0php1php1php0php"php,php php php4php9php php=php>php php"php1php1php0php1php0php0php0php1php1php1php0php"php,php php php5php0php php=php>php php"php1php1php0php0php0php1php0php1php1php1php0php"php,
php php php php php php php php php php php php php php php php php5php1php php=php>php php"php1php1php0php1php1php1php0php1php0php0php0php"php,php php php5php2php php=php>php php"php1php1php0php1php1php1php0php0php0php1php0php"php,php php php5php3php php=php>php php"php1php1php0php1php1php1php0php1php1php1php0php"php,
php php php php php php php php php php php php php php php php php5php4php php=php>php php"php1php1php1php0php1php0php1php1php0php0php0php"php,php php php5php5php php=php>php php"php1php1php1php0php1php0php0php0php1php1php0php"php,php php php5php6php php=php>php php"php1php1php1php0php0php0php1php0php1php1php0php"php,
php php php php php php php php php php php php php php php php php5php7php php=php>php php"php1php1php1php0php1php1php0php1php0php0php0php"php,php php php5php8php php=php>php php"php1php1php1php0php1php1php0php0php0php1php0php"php,php php php5php9php php=php>php php"php1php1php1php0php0php0php1php1php0php1php0php"php,
php php php php php php php php php php php php php php php php php6php0php php=php>php php"php1php1php1php0php1php1php1php1php0php1php0php"php,php php php6php1php php=php>php php"php1php1php0php0php1php0php0php0php0php1php0php"php,php php php6php2php php=php>php php"php1php1php1php1php0php0php0php1php0php1php0php"php,
php php php php php php php php php php php php php php php php php6php3php php=php>php php"php1php0php1php0php0php1php1php0php0php0php0php"php,php php php6php4php php=php>php php"php1php0php1php0php0php0php0php1php1php0php0php"php,php php php6php5php php=php>php php"php1php0php0php1php0php1php1php0php0php0php0php"php,
php php php php php php php php php php php php php php php php php6php6php php=php>php php"php1php0php0php1php0php0php0php0php1php1php0php"php,php php php6php7php php=php>php php"php1php0php0php0php0php1php0php1php1php0php0php"php,php php php6php8php php=php>php php"php1php0php0php0php0php1php0php0php1php1php0php"php,
php php php php php php php php php php php php php php php php php6php9php php=php>php php"php1php0php1php1php0php0php1php0php0php0php0php"php,php php php7php0php php=php>php php"php1php0php1php1php0php0php0php0php1php0php0php"php,php php php7php1php php=php>php php"php1php0php0php1php1php0php1php0php0php0php0php"php,
php php php php php php php php php php php php php php php php php7php2php php=php>php php"php1php0php0php1php1php0php0php0php0php1php0php"php,php php php7php3php php=php>php php"php1php0php0php0php0php1php1php0php1php0php0php"php,php php php7php4php php=php>php php"php1php0php0php0php0php1php1php0php0php1php0php"php,
php php php php php php php php php php php php php php php php php7php5php php=php>php php"php1php1php0php0php0php0php1php0php0php1php0php"php,php php php7php6php php=php>php php"php1php1php0php0php1php0php1php0php0php0php0php"php,php php php7php7php php=php>php php"php1php1php1php1php0php1php1php1php0php1php0php"php,
php php php php php php php php php php php php php php php php php7php8php php=php>php php"php1php1php0php0php0php0php1php0php1php0php0php"php,php php php7php9php php=php>php php"php1php0php0php0php1php1php1php1php0php1php0php"php,php php php8php0php php=php>php php"php1php0php1php0php0php1php1php1php1php0php0php"php,
php php php php php php php php php php php php php php php php php8php1php php=php>php php"php1php0php0php1php0php1php1php1php1php0php0php"php,php php php8php2php php=php>php php"php1php0php0php1php0php0php1php1php1php1php0php"php,php php php8php3php php=php>php php"php1php0php1php1php1php1php0php0php1php0php0php"php,
php php php php php php php php php php php php php php php php php8php4php php=php>php php"php1php0php0php1php1php1php1php0php1php0php0php"php,php php php8php5php php=php>php php"php1php0php0php1php1php1php1php0php0php1php0php"php,php php php8php6php php=php>php php"php1php1php1php1php0php1php0php0php1php0php0php"php,
php php php php php php php php php php php php php php php php php8php7php php=php>php php"php1php1php1php1php0php0php1php0php1php0php0php"php,php php php8php8php php=php>php php"php1php1php1php1php0php0php1php0php0php1php0php"php,php php php8php9php php=php>php php"php1php1php0php1php1php0php1php1php1php1php0php"php,
php php php php php php php php php php php php php php php php php9php0php php=php>php php"php1php1php0php1php1php1php1php0php1php1php0php"php,php php php9php1php php=php>php php"php1php1php1php1php0php1php1php0php1php1php0php"php,php php php9php2php php=php>php php"php1php0php1php0php1php1php1php1php0php0php0php"php,
php php php php php php php php php php php php php php php php php9php3php php=php>php php"php1php0php1php0php0php0php1php1php1php1php0php"php,php php php9php4php php=php>php php"php1php0php0php0php1php0php1php1php1php1php0php"php,php php php9php5php php=php>php php"php1php0php1php1php1php1php0php1php0php0php0php"php,
php php php php php php php php php php php php php php php php php9php6php php=php>php php"php1php0php1php1php1php1php0php0php0php1php0php"php,php php php9php7php php=php>php php"php1php1php1php1php0php1php0php1php0php0php0php"php,php php php9php8php php=php>php php"php1php1php1php1php0php1php0php0php0php1php0php"php,
php php php php php php php php php php php php php php php php php9php9php php=php>php php"php1php0php1php1php1php0php1php1php1php1php0php"php,php php1php0php0php php=php>php php"php1php0php1php1php1php1php0php1php1php1php0php"php,php php1php0php1php php=php>php php"php1php1php1php0php1php0php1php1php1php1php0php"php,
php php php php php php php php php php php php php php php php1php0php2php php=php>php php"php1php1php1php1php0php1php0php1php1php1php0php"php,
php php php php php php php php php php php php php php php php1php0php3php php=php>php php"php1php1php0php1php0php0php0php0php1php0php0php"php,php php1php0php4php php=php>php php"php1php1php0php1php0php0php1php0php0php0php0php"php,php php1php0php5php php=php>php php"php1php1php0php1php0php0php1php1php1php0php0php"php,
php php php php php php php php php php php php php php php php1php0php6php php=php>php php"php1php1php0php0php0php1php1php1php0php1php0php1php1php"php)php;

php php php php php/php*php*
php php php php php*php Characterphp setsphp ABC
php php php php php*php php@varphp array
php php php php php*php/
php php php php protectedphp php$php_charSetsphp php=php arrayphp(
php php php php php php php php php'Aphp'php php=php>php arrayphp(
php php php php php php php php php php php php php'php php'php,php php'php!php'php,php php'php"php'php,php php'php#php'php,php php'php$php'php,php php'php%php'php,php php'php&php'php,php php"php'php"php,
php php php php php php php php php php php php php'php(php'php,php php'php)php'php,php php'php*php'php,php php'php+php'php,php php'php,php'php,php php'php-php'php,php php'php.php'php,php php'php/php'php,
php php php php php php php php php php php php php'php0php'php,php php'php1php'php,php php'php2php'php,php php'php3php'php,php php'php4php'php,php php'php5php'php,php php'php6php'php,php php'php7php'php,
php php php php php php php php php php php php php'php8php'php,php php'php9php'php,php php'php:php'php,php php'php;php'php,php php'<php'php,php php'php=php'php,php php'php>php'php,php php'php?php'php,
php php php php php php php php php php php php php'php@php'php,php php'Aphp'php,php php'Bphp'php,php php'Cphp'php,php php'Dphp'php,php php'Ephp'php,php php'Fphp'php,php php'Gphp'php,
php php php php php php php php php php php php php'Hphp'php,php php'Iphp'php,php php'Jphp'php,php php'Kphp'php,php php'Lphp'php,php php'Mphp'php,php php'Nphp'php,php php'Ophp'php,
php php php php php php php php php php php php php'Pphp'php,php php'Qphp'php,php php'Rphp'php,php php'Sphp'php,php php'Tphp'php,php php'Uphp'php,php php'Vphp'php,php php'Wphp'php,
php php php php php php php php php php php php php'Xphp'php,php php'Yphp'php,php php'Zphp'php,php php'php[php'php,php php'php\php\php'php,php php'php]php'php,php php'php^php'php,php php'php_php'php,
php php php php php php php php php php php php php0xphp0php0php,php php0xphp0php1php,php php0xphp0php2php,php php0xphp0php3php,php php0xphp0php4php,php php0xphp0php5php,php php0xphp0php6php,php php0xphp0php7php,
php php php php php php php php php php php php php0xphp0php8php,php php0xphp0php9php,php php0xphp0Aphp,php php0xphp0Bphp,php php0xphp0Cphp,php php0xphp0Dphp,php php0xphp0Ephp,php php0xphp0Fphp,
php php php php php php php php php php php php php0xphp1php0php,php php0xphp1php1php,php php0xphp1php2php,php php0xphp1php3php,php php0xphp1php4php,php php0xphp1php5php,php php0xphp1php6php,php php0xphp1php7php,
php php php php php php php php php php php php php0xphp1php8php,php php0xphp1php9php,php php0xphp1Aphp,php php0xphp1Bphp,php php0xphp1Cphp,php php0xphp1Dphp,php php0xphp1Ephp,php php0xphp1Fphp,
php php php php php php php php php php php php php'FNCphp3php'php,php php'FNCphp2php'php,php php'SHIFTphp'php,php php'Codephp Cphp'php,php php'Codephp Bphp'php,php php'FNCphp4php'php,php php'FNCphp1php'php,
php php php php php php php php php php php php php'STARTphp Aphp'php,php php'STARTphp Bphp'php,php php'STARTphp Cphp'php,php php'STOPphp'php)php,
php php php php php php php php php'Bphp'php php=php>php arrayphp(
php php php php php php php php php php php php php'php php'php,php php'php!php'php,php php'php"php'php,php php'php#php'php,php php'php$php'php,php php'php%php'php,php php'php&php'php,php php"php'php"php,
php php php php php php php php php php php php php'php(php'php,php php'php)php'php,php php'php*php'php,php php'php+php'php,php php'php,php'php,php php'php-php'php,php php'php.php'php,php php'php/php'php,
php php php php php php php php php php php php php'php0php'php,php php'php1php'php,php php'php2php'php,php php'php3php'php,php php'php4php'php,php php'php5php'php,php php'php6php'php,php php'php7php'php,
php php php php php php php php php php php php php'php8php'php,php php'php9php'php,php php'php:php'php,php php'php;php'php,php php'<php'php,php php'php=php'php,php php'php>php'php,php php'php?php'php,
php php php php php php php php php php php php php'php@php'php,php php'Aphp'php,php php'Bphp'php,php php'Cphp'php,php php'Dphp'php,php php'Ephp'php,php php'Fphp'php,php php'Gphp'php,
php php php php php php php php php php php php php'Hphp'php,php php'Iphp'php,php php'Jphp'php,php php'Kphp'php,php php'Lphp'php,php php'Mphp'php,php php'Nphp'php,php php'Ophp'php,
php php php php php php php php php php php php php'Pphp'php,php php'Qphp'php,php php'Rphp'php,php php'Sphp'php,php php'Tphp'php,php php'Uphp'php,php php'Vphp'php,php php'Wphp'php,
php php php php php php php php php php php php php'Xphp'php,php php'Yphp'php,php php'Zphp'php,php php'php[php'php,php php'php\php\php'php,php php'php]php'php,php php'php^php'php,php php'php_php'php,
php php php php php php php php php php php php php'php`php'php,php php'aphp'php,php php'bphp'php,php php'cphp'php,php php'dphp'php,php php'ephp'php,php php'fphp'php,php php'gphp'php,
php php php php php php php php php php php php php'hphp'php,php php'iphp'php,php php'jphp'php,php php'kphp'php,php php'lphp'php,php php'mphp'php,php php'nphp'php,php php'ophp'php,
php php php php php php php php php php php php php'pphp'php,php php'qphp'php,php php'rphp'php,php php'sphp'php,php php'tphp'php,php php'uphp'php,php php'vphp'php,php php'wphp'php,
php php php php php php php php php php php php php'xphp'php,php php'yphp'php,php php'zphp'php,php php'php{php'php,php php'php|php'php,php php'php}php'php,php php'php~php'php,php php0xphp7Fphp,
php php php php php php php php php php php php php'FNCphp3php'php,php php'FNCphp2php'php,php php'SHIFTphp'php,php php'Codephp Cphp'php,php php'FNCphp4php'php,php php'Codephp Aphp'php,php php'FNCphp1php'php,
php php php php php php php php php php php php php'STARTphp Aphp'php,php php'STARTphp Bphp'php,php php'STARTphp Cphp'php,php php'STOPphp'php,php)php,
php php php php php php php php php'Cphp'php php=php>php arrayphp(
php php php php php php php php php php php php php'php0php0php'php,php php'php0php1php'php,php php'php0php2php'php,php php'php0php3php'php,php php'php0php4php'php,php php'php0php5php'php,php php'php0php6php'php,php php'php0php7php'php,php php'php0php8php'php,php php'php0php9php'php,
php php php php php php php php php php php php php'php1php0php'php,php php'php1php1php'php,php php'php1php2php'php,php php'php1php3php'php,php php'php1php4php'php,php php'php1php5php'php,php php'php1php6php'php,php php'php1php7php'php,php php'php1php8php'php,php php'php1php9php'php,
php php php php php php php php php php php php php'php2php0php'php,php php'php2php1php'php,php php'php2php2php'php,php php'php2php3php'php,php php'php2php4php'php,php php'php2php5php'php,php php'php2php6php'php,php php'php2php7php'php,php php'php2php8php'php,php php'php2php9php'php,
php php php php php php php php php php php php php'php3php0php'php,php php'php3php1php'php,php php'php3php2php'php,php php'php3php3php'php,php php'php3php4php'php,php php'php3php5php'php,php php'php3php6php'php,php php'php3php7php'php,php php'php3php8php'php,php php'php3php9php'php,
php php php php php php php php php php php php php'php4php0php'php,php php'php4php1php'php,php php'php4php2php'php,php php'php4php3php'php,php php'php4php4php'php,php php'php4php5php'php,php php'php4php6php'php,php php'php4php7php'php,php php'php4php8php'php,php php'php4php9php'php,
php php php php php php php php php php php php php'php5php0php'php,php php'php5php1php'php,php php'php5php2php'php,php php'php5php3php'php,php php'php5php4php'php,php php'php5php5php'php,php php'php5php6php'php,php php'php5php7php'php,php php'php5php8php'php,php php'php5php9php'php,
php php php php php php php php php php php php php'php6php0php'php,php php'php6php1php'php,php php'php6php2php'php,php php'php6php3php'php,php php'php6php4php'php,php php'php6php5php'php,php php'php6php6php'php,php php'php6php7php'php,php php'php6php8php'php,php php'php6php9php'php,
php php php php php php php php php php php php php'php7php0php'php,php php'php7php1php'php,php php'php7php2php'php,php php'php7php3php'php,php php'php7php4php'php,php php'php7php5php'php,php php'php7php6php'php,php php'php7php7php'php,php php'php7php8php'php,php php'php7php9php'php,
php php php php php php php php php php php php php'php8php0php'php,php php'php8php1php'php,php php'php8php2php'php,php php'php8php3php'php,php php'php8php4php'php,php php'php8php5php'php,php php'php8php6php'php,php php'php8php7php'php,php php'php8php8php'php,php php'php8php9php'php,
php php php php php php php php php php php php php'php9php0php'php,php php'php9php1php'php,php php'php9php2php'php,php php'php9php3php'php,php php'php9php4php'php,php php'php9php5php'php,php php'php9php6php'php,php php'php9php7php'php,php php'php9php8php'php,php php'php9php9php'php,
php php php php php php php php php php php php php'Codephp Bphp'php,php php'Codephp Aphp'php,php php'FNCphp1php'php,php php'STARTphp Aphp'php,php php'STARTphp Bphp'php,php php'STARTphp Cphp'php,php php'STOPphp'php)php)php;
php php php php php/php*php'Aphp'php php=php>php arrayphp(
php php php php php php php'php php'php=php>php0php,php php'php!php'php=php>php1php,php php'php"php'php=php>php2php,php php'php#php'php=php>php3php,php php'php$php'php=php>php4php,php php'php%php'php=php>php5php,php php'php&php'php=php>php6php,php php"php'php"php=php>php7php,
php php php php php php php'php(php'php=php>php8php,php php'php)php'php=php>php9php,php php'php*php'php=php>php1php0php,php php'php+php'php=php>php1php1php,php php'php,php'php=php>php1php2php,php php'php-php'php=php>php1php3php,php php'php.php'php=php>php1php4php,php php'php/php'php=php>php1php5php,
php php php php php php php'php0php'php=php>php1php6php,php php'php1php'php=php>php1php7php,php php'php2php'php=php>php1php8php,php php'php3php'php=php>php1php9php,php php'php4php'php=php>php2php0php,php php'php5php'php=php>php2php1php,php php'php6php'php=php>php2php2php,php php'php7php'php=php>php2php3php,
php php php php php php php'php8php'php=php>php2php4php,php php'php9php'php=php>php2php5php,php php'php:php'php=php>php2php6php,php php'php;php'php=php>php2php7php,php php'<php'php=php>php2php8php,php php'php=php'php=php>php2php9php,php php'php>php'php=php>php3php0php,php php'php?php'php=php>php3php1php,
php php php php php php php'php@php'php=php>php3php2php,php php'Aphp'php=php>php3php3php,php php'Bphp'php=php>php3php4php,php php'Cphp'php=php>php3php5php,php php'Dphp'php=php>php3php6php,php php'Ephp'php=php>php3php7php,php php'Fphp'php=php>php3php8php,php php'Gphp'php=php>php3php9php,
php php php php php php php'Hphp'php=php>php4php0php,php php'Iphp'php=php>php4php1php,php php'Jphp'php=php>php4php2php,php php'Kphp'php=php>php4php3php,php php'Lphp'php=php>php4php4php,php php'Mphp'php=php>php4php5php,php php'Nphp'php=php>php4php6php,php php'Ophp'php=php>php4php7php,
php php php php php php php'Pphp'php=php>php4php8php,php php'Qphp'php=php>php4php9php,php php'Rphp'php=php>php5php0php,php php'Sphp'php=php>php5php1php,php php'Tphp'php=php>php5php2php,php php'Uphp'php=php>php5php3php,php php'Vphp'php=php>php5php4php,php php'Wphp'php=php>php5php5php,
php php php php php php php'Xphp'php=php>php5php6php,php php'Yphp'php=php>php5php7php,php php'Zphp'php=php>php5php8php,php php'php[php'php=php>php5php9php,php php'php\php\php'php=php>php6php0php,php php'php]php'php=php>php6php1php,php php'php^php'php=php>php6php2php,php php'php_php'php=php>php6php3php,
php php php php php php php0xphp0php0php=php>php6php4php,php php0xphp0php1php=php>php6php5php,php php0xphp0php2php=php>php6php6php,php php0xphp0php3php=php>php6php7php,php php0xphp0php4php=php>php6php8php,php php0xphp0php5php=php>php6php9php,php php0xphp0php6php=php>php7php0php,php php0xphp0php7php=php>php7php1php,
php php php php php php php0xphp0php8php=php>php7php2php,php php0xphp0php9php=php>php7php3php,php php0xphp0Aphp=php>php7php4php,php php0xphp0Bphp=php>php7php5php,php php0xphp0Cphp=php>php7php6php,php php0xphp0Dphp=php>php7php7php,php php0xphp0Ephp=php>php7php8php,php php0xphp0Fphp=php>php7php9php,
php php php php php php php0xphp1php0php=php>php8php0php,php php0xphp1php1php=php>php8php1php,php php0xphp1php2php=php>php8php2php,php php0xphp1php3php=php>php8php3php,php php0xphp1php4php=php>php8php4php,php php0xphp1php5php=php>php8php5php,php php0xphp1php6php=php>php8php6php,php php0xphp1php7php=php>php8php7php,
php php php php php php php0xphp1php8php=php>php8php8php,php php0xphp1php9php=php>php8php9php,php php0xphp1Aphp=php>php9php0php,php php0xphp1Bphp=php>php9php1php,php php0xphp1Cphp=php>php9php2php,php php0xphp1Dphp=php>php9php3php,php php0xphp1Ephp=php>php9php4php,php php0xphp1Fphp=php>php9php5php,
php php php php php php php'FNCphp3php'php=php>php9php6php,php php'FNCphp2php'php=php>php9php7php,php php'SHIFTphp'php=php>php9php8php,php php'Codephp Cphp'php=php>php9php9php,php php'Codephp Bphp'php=php>php1php0php0php,php php'FNCphp4php'php=php>php1php0php1php,php php'FNCphp1php'php=php>php1php0php2php,php php'STARTphp Aphp'php=php>php1php0php3php,
php php php php php php php'STARTphp Bphp'php=php>php1php0php4php,php php'STARTphp Cphp'php=php>php1php0php5php,php php'STOPphp'php=php>php1php0php6php)php,
php php php php php'Bphp'php php=php>php arrayphp(
php php php php php php php'php php'php=php>php0php,php php'php!php'php=php>php1php,php php'php"php'php=php>php2php,php php'php#php'php=php>php3php,php php'php$php'php=php>php4php,php php'php%php'php=php>php5php,php php'php&php'php=php>php6php,php php"php'php"php=php>php7php,
php php php php php php php'php(php'php=php>php8php,php php'php)php'php=php>php9php,php php'php*php'php=php>php1php0php,php php'php+php'php=php>php1php1php,php php'php,php'php=php>php1php2php,php php'php-php'php=php>php1php3php,php php'php.php'php=php>php1php4php,php php'php/php'php=php>php1php5php,
php php php php php php php'php0php'php=php>php1php6php,php php'php1php'php=php>php1php7php,php php'php2php'php=php>php1php8php,php php'php3php'php=php>php1php9php,php php'php4php'php=php>php2php0php,php php'php5php'php=php>php2php1php,php php'php6php'php=php>php2php2php,php php'php7php'php=php>php2php3php,
php php php php php php php'php8php'php=php>php2php4php,php php'php9php'php=php>php2php5php,php php'php:php'php=php>php2php6php,php php'php;php'php=php>php2php7php,php php'<php'php=php>php2php8php,php php'php=php'php=php>php2php9php,php php'php>php'php=php>php3php0php,php php'php?php'php=php>php3php1php,
php php php php php php php'php@php'php=php>php3php2php,php php'Aphp'php=php>php3php3php,php php'Bphp'php=php>php3php4php,php php'Cphp'php=php>php3php5php,php php'Dphp'php=php>php3php6php,php php'Ephp'php=php>php3php7php,php php'Fphp'php=php>php3php8php,php php'Gphp'php=php>php3php9php,
php php php php php php php'Hphp'php=php>php4php0php,php php'Iphp'php=php>php4php1php,php php'Jphp'php=php>php4php2php,php php'Kphp'php=php>php4php3php,php php'Lphp'php=php>php4php4php,php php'Mphp'php=php>php4php5php,php php'Nphp'php=php>php4php6php,php php'Ophp'php=php>php4php7php,
php php php php php php php'Pphp'php=php>php4php8php,php php'Qphp'php=php>php4php9php,php php'Rphp'php=php>php5php0php,php php'Sphp'php=php>php5php1php,php php'Tphp'php=php>php5php2php,php php'Uphp'php=php>php5php3php,php php'Vphp'php=php>php5php4php,php php'Wphp'php=php>php5php5php,
php php php php php php php'Xphp'php=php>php5php6php,php php'Yphp'php=php>php5php7php,php php'Zphp'php=php>php5php8php,php php'php[php'php=php>php5php9php,php php'php\php\php'php=php>php6php0php,php php'php]php'php=php>php6php1php,php php'php^php'php=php>php6php2php,php php'php_php'php=php>php6php3php,
php php php php php php php'php`php'php php=php>php6php4php,php php'aphp'php=php>php6php5php,php php'bphp'php=php>php6php6php,php php'cphp'php=php>php6php7php,php php'dphp'php=php>php6php8php,php php'ephp'php=php>php6php9php,php php'fphp'php=php>php7php0php,php php'gphp'php=php>php7php1php,
php php php php php php php'hphp'php=php>php7php2php,php php'iphp'php=php>php7php3php,php php'jphp'php=php>php7php4php,php php'kphp'php=php>php7php5php,php php'lphp'php=php>php7php6php,php php'mphp'php=php>php7php7php,php php'nphp'php=php>php7php8php,php php'ophp'php=php>php7php9php,
php php php php php php php'pphp'php=php>php8php0php,php php'qphp'php=php>php8php1php,php php'rphp'php=php>php8php2php,php php'sphp'php=php>php8php3php,php php'tphp'php=php>php8php4php,php php'uphp'php=php>php8php5php,php php'vphp'php=php>php8php6php,php php'wphp'php=php>php8php7php,
php php php php php php php'xphp'php=php>php8php8php,php php'yphp'php=php>php8php9php,php php'zphp'php=php>php9php0php,php php'php{php'php=php>php9php1php,php php'php|php'php=php>php9php2php,php php'php}php'php=php>php9php3php,php php'php~php'php=php>php9php4php,php php0xphp7Fphp=php>php9php5php,
php php php php php php php'FNCphp3php'php=php>php9php6php,php php'FNCphp2php'php=php>php9php7php,php php'SHIFTphp'php=php>php9php8php,php php'Codephp Cphp'php=php>php9php9php,php php'FNCphp4php'php=php>php1php0php0php,php php'Codephp Aphp'php=php>php1php0php1php,php php'FNCphp1php'php=php>php1php0php2php,php php'STARTphp Aphp'php=php>php1php0php3php,
php php php php php php php'STARTphp Bphp'php=php>php1php0php4php,php php'STARTphp Cphp'php=php>php1php0php5php,php php'STOPphp'php=php>php1php0php6php,php)php,
php php php php php'Cphp'php php=php>php arrayphp(
php php php php php php php'php0php0php'php=php>php0php,php php'php0php1php'php=php>php1php,php php'php0php2php'php=php>php2php,php php'php0php3php'php=php>php3php,php php'php0php4php'php=php>php4php,php php'php0php5php'php=php>php5php,php php'php0php6php'php=php>php6php,php php'php0php7php'php=php>php7php,php php'php0php8php'php=php>php8php,php php'php0php9php'php=php>php9php,
php php php php php php php'php1php0php'php=php>php1php0php,php php'php1php1php'php=php>php1php1php,php php'php1php2php'php=php>php1php2php,php php'php1php3php'php=php>php1php3php,php php'php1php4php'php=php>php1php4php,php php'php1php5php'php=php>php1php5php,php php'php1php6php'php=php>php1php6php,php php'php1php7php'php=php>php1php7php,php php'php1php8php'php=php>php1php8php,php php'php1php9php'php=php>php1php9php,
php php php php php php php'php2php0php'php=php>php2php0php,php php'php2php1php'php=php>php2php1php,php php'php2php2php'php=php>php2php2php,php php'php2php3php'php=php>php2php3php,php php'php2php4php'php=php>php2php4php,php php'php2php5php'php=php>php2php5php,php php'php2php6php'php=php>php2php6php,php php'php2php7php'php=php>php2php7php,php php'php2php8php'php=php>php2php8php,php php'php2php9php'php=php>php2php9php,
php php php php php php php'php3php0php'php=php>php3php0php,php php'php3php1php'php=php>php3php1php,php php'php3php2php'php=php>php3php2php,php php'php3php3php'php=php>php3php3php,php php'php3php4php'php=php>php3php4php,php php'php3php5php'php=php>php3php5php,php php'php3php6php'php=php>php3php6php,php php'php3php7php'php=php>php3php7php,php php'php3php8php'php=php>php3php8php,php php'php3php9php'php=php>php3php9php,
php php php php php php php'php4php0php'php=php>php4php0php,php php'php4php1php'php=php>php4php1php,php php'php4php2php'php=php>php4php2php,php php'php4php3php'php=php>php4php3php,php php'php4php4php'php=php>php4php4php,php php'php4php5php'php=php>php4php5php,php php'php4php6php'php=php>php4php6php,php php'php4php7php'php=php>php4php7php,php php'php4php8php'php=php>php4php8php,php php'php4php9php'php=php>php4php9php,
php php php php php php php'php5php0php'php=php>php5php0php,php php'php5php1php'php=php>php5php1php,php php'php5php2php'php=php>php5php2php,php php'php5php3php'php=php>php5php3php,php php'php5php4php'php=php>php5php4php,php php'php5php5php'php=php>php5php5php,php php'php5php6php'php=php>php5php6php,php php'php5php7php'php=php>php5php7php,php php'php5php8php'php=php>php5php8php,php php'php5php9php'php=php>php5php9php,
php php php php php php php'php6php0php'php=php>php6php0php,php php'php6php1php'php=php>php6php1php,php php'php6php2php'php=php>php6php2php,php php'php6php3php'php=php>php6php3php,php php'php6php4php'php=php>php6php4php,php php'php6php5php'php=php>php6php5php,php php'php6php6php'php=php>php6php6php,php php'php6php7php'php=php>php6php7php,php php'php6php8php'php=php>php6php8php,php php'php6php9php'php=php>php6php9php,
php php php php php php php'php7php0php'php=php>php7php0php,php php'php7php1php'php=php>php7php1php,php php'php7php2php'php=php>php7php2php,php php'php7php3php'php=php>php7php3php,php php'php7php4php'php=php>php7php4php,php php'php7php5php'php=php>php7php5php,php php'php7php6php'php=php>php7php6php,php php'php7php7php'php=php>php7php7php,php php'php7php8php'php=php>php7php8php,php php'php7php9php'php=php>php7php9php,
php php php php php php php'php8php0php'php=php>php8php0php,php php'php8php1php'php=php>php8php1php,php php'php8php2php'php=php>php8php2php,php php'php8php3php'php=php>php8php3php,php php'php8php4php'php=php>php8php4php,php php'php8php5php'php=php>php8php5php,php php'php8php6php'php=php>php8php6php,php php'php8php7php'php=php>php8php7php,php php'php8php8php'php=php>php8php8php,php php'php8php9php'php=php>php8php9php,
php php php php php php php'php9php0php'php=php>php9php0php,php php'php9php1php'php=php>php9php1php,php php'php9php2php'php=php>php9php2php,php php'php9php3php'php=php>php9php3php,php php'php9php4php'php=php>php9php4php,php php'php9php5php'php=php>php9php5php,php php'php9php6php'php=php>php9php6php,php php'php9php7php'php=php>php9php7php,php php'php9php8php'php=php>php9php8php,php php'php9php9php'php=php>php9php9php,
php php php php php php php'Codephp Bphp'php=php>php1php0php0php,php php'Codephp Aphp'php=php>php1php0php1php,php php'FNCphp1php'php=php>php1php0php2php,php php'STARTphp Aphp'php=php>php1php0php3php,php php'STARTphp Bphp'php=php>php1php0php4php,php php'STARTphp Cphp'php=php>php1php0php5php,php php'STOPphp'php=php>php1php0php6php)php)php;php*php/

php php php php php/php*php*
php php php php php php*php Widthphp ofphp thephp barcodephp php(inphp pixelsphp)
php php php php php php*php php@returnphp integer
php php php php php php*php/
php php php php protectedphp functionphp php_calculateBarcodeWidthphp(php)
php php php php php{
php php php php php php php php php$quietZonephp php=php php$thisphp-php>getQuietZonephp(php)php;
php php php php php php php php php/php/php Eachphp charactersphp containphp php1php1php barsphp.php.php.
php php php php php php php php php$characterLengthphp php=php php1php1php php*php php$thisphp-php>php_barThinWidthphp php*php php$thisphp-php>php_factorphp;
php php php php php php php php php$convertedCharsphp php=php countphp(php$thisphp-php>php_convertToBarcodeCharsphp(php$thisphp-php>getTextphp(php)php)php)php;
php php php php php php php php ifphp php(php$thisphp-php>php_withChecksumphp)php php{
php php php php php php php php php php php php php$convertedCharsphp+php+php;
php php php php php php php php php}
php php php php php php php php php$encodedDataphp php=php php$convertedCharsphp php*php php$characterLengthphp;
php php php php php php php php php/php/php php.php.php.exceptphp thephp STOPphp characterphp php(php1php3php)
php php php php php php php php php$encodedDataphp php+php=php php$characterLengthphp php+php php2php php*php php$thisphp-php>php_barThinWidthphp php*php php$thisphp-php>php_factorphp;
php php php php php php php php php$widthphp php=php php$quietZonephp php+php php$encodedDataphp php+php php$quietZonephp;
php php php php php php php php returnphp php$widthphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Partialphp checkphp ofphp codephp1php2php8php barcode
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php protectedphp functionphp php_checkParamsphp(php)
php php php php php{
php php php php php}

php php php php php/php*php*
php php php php php php*php Preparephp arrayphp tophp drawphp barcode
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php protectedphp functionphp php_prepareBarcodephp(php)
php php php php php{
php php php php php php php php php$barcodeTablephp php=php arrayphp(php)php;

php php php php php php php php php$convertedCharsphp php=php php$thisphp-php>php_convertToBarcodeCharsphp(php$thisphp-php>getTextphp(php)php)php;

php php php php php php php php ifphp php(php$thisphp-php>php_withChecksumphp)php php{
php php php php php php php php php php php php php$convertedCharsphp[php]php php=php php$thisphp-php>getChecksumphp(php$thisphp-php>getTextphp(php)php)php;
php php php php php php php php php}

php php php php php php php php php/php/php STOPphp CHARACTER
php php php php php php php php php$convertedCharsphp[php]php php=php php1php0php6php;

php php php php php php php php foreachphp php(php$convertedCharsphp asphp php$barcodeCharphp)php php{
php php php php php php php php php php php php php$barcodePatternphp php=php php$thisphp-php>php_codingMapphp[php$barcodeCharphp]php;
php php php php php php php php php php php php foreachphp php(strphp_splitphp(php$barcodePatternphp)php asphp php$cphp)php php{
php php php php php php php php php php php php php php php php php$barcodeTablephp[php]php php=php arrayphp(php$cphp,php php1php,php php0php,php php1php)php;
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php php php php returnphp php$barcodeTablephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp ifphp thephp nextphp php$lengthphp charsphp ofphp php$stringphp startingphp atphp php$posphp arephp numericphp.
php php php php php php*php Returnsphp falsephp ifphp thephp endphp ofphp thephp stringphp isphp reachedphp.
php php php php php php*php php@paramphp php$stringphp Stringphp tophp search
php php php php php php*php php@paramphp php$posphp Startingphp position
php php php php php php*php php@paramphp php$lengthphp Lengthphp tophp search
php php php php php php*php php@returnphp bool
php php php php php php*php/
php php php php protectedphp staticphp functionphp php_isDigitphp(php$stringphp,php php$posphp,php php$lengthphp php=php php2php)
php php php php php{
php php php php php php php php ifphp php(php$posphp php+php php$lengthphp php>php strlenphp(php$stringphp)php)php php{
php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php}

php php php php php php php php forphp php(php$iphp php=php php$posphp;php php$iphp <php php$posphp php+php php$lengthphp;php php$iphp+php+php)php php{
php php php php php php php php php php php php php php ifphp php(php!isphp_numericphp(php$stringphp[php$iphp]php)php)php php{
php php php php php php php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php php php php returnphp truephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Convertphp stringphp tophp barcodephp string
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php protectedphp functionphp php_convertToBarcodeCharsphp(php$stringphp)
php php php php php{
php php php php php php php php php$stringphp php=php php(stringphp)php php$stringphp;
php php php php php php php php ifphp php(php!strlenphp(php$stringphp)php)php php{
php php php php php php php php php php php php returnphp arrayphp(php)php;
php php php php php php php php php}

php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_convertedTextphp[mdphp5php(php$stringphp)php]php)php)php php{
php php php php php php php php php php php php returnphp php$thisphp-php>php_convertedTextphp[mdphp5php(php$stringphp)php]php;
php php php php php php php php php}

php php php php php php php php php$currentCharsetphp php=php nullphp;
php php php php php php php php php$sumphp php=php php0php;
php php php php php php php php php$fakphp php=php php0php;
php php php php php php php php php$resultphp php=php arrayphp(php)php;

php php php php php php php php forphp php(php$posphp php=php php0php;php php$posphp <php strlenphp(php$stringphp)php;php php$posphp+php+php)php php{
php php php php php php php php php php php php php$charphp php=php php$stringphp[php$posphp]php;
php php php php php php php php php php php php php$codephp php=php nullphp;

php php php php php php php php php php php php ifphp php(selfphp:php:php_isDigitphp(php$stringphp,php php$posphp,php php4php)php php&php&php php$currentCharsetphp php!php=php php'Cphp'
php php php php php php php php php php php php php php|php|php selfphp:php:php_isDigitphp(php$stringphp,php php$posphp,php php2php)php php&php&php php$currentCharsetphp php=php=php php'Cphp'php)php php{
php php php php php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php php php php php*php Switchphp tophp Cphp ifphp thephp nextphp php4php charsphp arephp numericphp orphp stayphp Cphp ifphp thephp nextphp php2
php php php php php php php php php php php php php php php php php php*php charsphp arephp numeric
php php php php php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php php php php php ifphp php(php$currentCharsetphp php!php=php php'Cphp'php)php php{
php php php php php php php php php php php php php php php php php php php php ifphp php(php$posphp php=php=php php0php)php php{
php php php php php php php php php php php php php php php php php php php php php php php php php$codephp php=php arrayphp_searchphp(php"STARTphp Cphp"php,php php$thisphp-php>php_charSetsphp[php'Cphp'php]php)php;
php php php php php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php php php php php$codephp php=php arrayphp_searchphp(php"Codephp Cphp"php,php php$thisphp-php>php_charSetsphp[php$currentCharsetphp]php)php;
php php php php php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php php php php php$resultphp[php]php php=php php$codephp;
php php php php php php php php php php php php php php php php php php php php php$currentCharsetphp php=php php'Cphp'php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}php elsephp ifphp php(inphp_arrayphp(php$charphp,php php$thisphp-php>php_charSetsphp[php'Bphp'php]php)php php&php&php php$currentCharsetphp php!php=php php'Bphp'
php php php php php php php php php php php php php php php php php php php&php&php php!php(inphp_arrayphp(php$charphp,php php$thisphp-php>php_charSetsphp[php'Aphp'php]php)php php&php&php php$currentCharsetphp php=php=php php'Aphp'php)php)php php{
php php php php php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php php php php php*php Switchphp tophp Bphp asphp Bphp containsphp thephp charphp andphp Bphp isphp notphp thephp currentphp charsetphp.
php php php php php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php php php php php ifphp php(php$posphp php=php=php php0php)php php{
php php php php php php php php php php php php php php php php php php php php php$codephp php=php arrayphp_searchphp(php"STARTphp Bphp"php,php php$thisphp-php>php_charSetsphp[php'Bphp'php]php)php;
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php$codephp php=php arrayphp_searchphp(php"Codephp Bphp"php,php php$thisphp-php>php_charSetsphp[php$currentCharsetphp]php)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php$resultphp[php]php php=php php$codephp;
php php php php php php php php php php php php php php php php php$currentCharsetphp php=php php'Bphp'php;
php php php php php php php php php php php php php}php elsephp ifphp php(arrayphp_keyphp_existsphp(php$charphp,php php$thisphp-php>php_charSetsphp[php'Aphp'php]php)php php&php&php php$currentCharsetphp php!php=php php'Aphp'
php php php php php php php php php php php php php php php php php php php&php&php php!php(arrayphp_keyphp_existsphp(php$charphp,php php$thisphp-php>php_charSetsphp[php'Bphp'php]php)php php&php&php php$currentCharsetphp php=php=php php'Bphp'php)php)php php{
php php php php php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php php php php php*php Switchphp tophp Cphp asphp Cphp containsphp thephp charphp andphp Cphp isphp notphp thephp currentphp charsetphp.
php php php php php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php php php php php ifphp php(php$posphp php=php=php php0php)php php{
php php php php php php php php php php php php php php php php php php php php php$codephp php=php arrayphp_searchphp(php"STARTphp Aphp"php,php php$thisphp-php>php_charSetsphp[php'Aphp'php]php)php;
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php$codephp php=arrayphp_searchphp(php"Codephp Aphp"php,php php$thisphp-php>php_charSetsphp[php$currentCharsetphp]php)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php$resultphp[php]php php=php php$codephp;
php php php php php php php php php php php php php php php php php$currentCharsetphp php=php php'Aphp'php;
php php php php php php php php php php php php php}

php php php php php php php php php php php php ifphp php(php$currentCharsetphp php=php=php php'Cphp'php)php php{
php php php php php php php php php php php php php php php php php$codephp php=php arrayphp_searchphp(substrphp(php$stringphp,php php$posphp,php php2php)php,php php$thisphp-php>php_charSetsphp[php'Cphp'php]php)php;
php php php php php php php php php php php php php php php php php$posphp+php+php;php php/php/Twophp charsphp fromphp input
php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php$codephp php=php arrayphp_searchphp(php$stringphp[php$posphp]php,php php$thisphp-php>php_charSetsphp[php$currentCharsetphp]php)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$resultphp[php]php php=php php$codephp;
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_convertedTextphp[mdphp5php(php$stringphp)php]php php=php php$resultphp;
php php php php php php php php returnphp php$resultphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp textphp tophp encode
php php php php php php*php php@paramphp stringphp php$value
php php php php php php*php php@returnphp Zendphp_Barcodephp_Object
php php php php php php*php/
php php php php publicphp functionphp setTextphp(php$valuephp)
php php php php php{
php php php php php php php php php$thisphp-php>php_textphp php=php php$valuephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp textphp tophp encode
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getTextphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_textphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp barcodephp checksum
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$text
php php php php php php*php php@returnphp int
php php php php php php*php/
php php php php publicphp functionphp getChecksumphp(php$textphp)
php php php php php{
php php php php php php php php php$tableOfCharsphp php=php php$thisphp-php>php_convertToBarcodeCharsphp(php$textphp)php;

php php php php php php php php php$sumphp php=php php$tableOfCharsphp[php0php]php;
php php php php php php php php unsetphp(php$tableOfCharsphp[php0php]php)php;

php php php php php php php php php$kphp php=php php1php;
php php php php php php php php foreachphp php(php$tableOfCharsphp asphp php$charphp)php php{
php php php php php php php php php php php php php$sumphp php+php=php php(php$kphp+php+php)php php*php php$charphp;
php php php php php php php php php}

php php php php php php php php php$checksumphp php=php php$sumphp php%php php1php0php3php;

php php php php php php php php returnphp php$checksumphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Standardphp validationphp forphp mostphp ofphp barcodephp objects
php php php php php php*php php@paramphp stringphp php$value
php php php php php php*php php@paramphp arrayphp php php$options
php php php php php php*php/
php php php php protectedphp functionphp php_validateTextphp(php$valuephp,php php$optionsphp php=php arrayphp(php)php)
php php php php php{
php php php php php php php php php/php/php php@TODOphp:php addphp codephp1php2php8php validator
php php php php php php php php returnphp truephp;
php php php php php}
php}
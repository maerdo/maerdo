<php?php
php/php*php*
php php*php Zendphp Framework
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Pdf
php php*php php@subpackagephp Fonts
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php php$Idphp:php Cmapphp.phpphp php2php0php0php9php6php php2php0php1php0php-php0php1php-php0php6php php0php2php:php0php5php:php0php9Zphp bkarwinphp php$
php php*php/


php/php*php*
php php*php Abstractphp helperphp classphp forphp php{php@linkphp Zendphp_Pdfphp_Resourcephp_Fontphp}php whichphp managesphp font
php php*php characterphp mapsphp.
php php*
php php*php Definesphp thephp publicphp interfacephp forphp concretephp subclassesphp whichphp arephp responsible
php php*php forphp mappingphp Unicodephp charactersphp tophp thephp fontphp'sphp glyphphp numbersphp.php Alsophp provides
php php*php sharedphp utilityphp methodsphp.
php php*
php php*php Cmapphp objectsphp shouldphp ordinarilyphp bephp obtainedphp throughphp thephp factoryphp method
php php*php php{php@linkphp cmapWithTypeDataphp(php)php}php.
php php*
php php*php Thephp supportedphp characterphp mapphp typesphp arephp thosephp foundphp inphp thephp OpenTypephp specphp.php For
php php*php additionalphp detailphp onphp thephp internalphp binaryphp formatphp ofphp thesephp tablesphp,php seephp:
php php*php php<ulphp>
php php*php php php<liphp>php{php@linkphp httpphp:php/php/developerphp.applephp.comphp/textfontsphp/TTRefManphp/RMphp0php6php/Chapphp6cmapphp.htmlphp}
php php*php php php<liphp>php{php@linkphp httpphp:php/php/wwwphp.microsoftphp.comphp/OpenTypephp/OTSpecphp/cmapphp.htmphp}
php php*php php php<liphp>php{php@linkphp httpphp:php/php/partnersphp.adobephp.comphp/publicphp/developerphp/opentypephp/indexphp_cmapphp.htmlphp}
php php*php <php/ulphp>
php php*
php php*php php@todophp Writephp codephp forphp Zendphp_Pdfphp_FontCmapphp_HighByteMappingphp classphp.
php php*php php@todophp Writephp codephp forphp Zendphp_Pdfphp_FontCmapphp_MixedCoveragephp classphp.
php php*php php@todophp Writephp codephp forphp Zendphp_Pdfphp_FontCmapphp_TrimmedArrayphp classphp.
php php*php php@todophp Writephp codephp forphp Zendphp_Pdfphp_FontCmapphp_SegmentedCoveragephp classphp.
php php*
php php*php php@packagephp php php php Zendphp_Pdf
php php*php php@subpackagephp Fonts
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/
abstractphp classphp Zendphp_Pdfphp_Cmap
php{
php php php/php*php*php*php*php Classphp Constantsphp php*php*php*php*php/


php php php/php*php Cmapphp Tablephp Typesphp php*php/

php php php php php/php*php*
php php php php php php*php Bytephp Encodingphp characterphp mapphp tablephp typephp.
php php php php php php*php/
php php php php constphp TYPEphp_BYTEphp_ENCODINGphp php=php php0xphp0php0php;

php php php php php/php*php*
php php php php php php*php Highphp Bytephp Mappingphp characterphp mapphp tablephp typephp.
php php php php php php*php/
php php php php constphp TYPEphp_HIGHphp_BYTEphp_MAPPINGphp php=php php0xphp0php2php;

php php php php php/php*php*
php php php php php php*php Segmentphp Valuephp tophp Deltaphp Mappingphp characterphp mapphp tablephp typephp.
php php php php php php*php/
php php php php constphp TYPEphp_SEGMENTphp_TOphp_DELTAphp php=php php0xphp0php4php;

php php php php php/php*php*
php php php php php php*php Trimmedphp Tablephp characterphp mapphp tablephp typephp.
php php php php php php*php/
php php php php constphp TYPEphp_TRIMMEDphp_TABLEphp php=php php0xphp0php6php;

php php php php php/php*php*
php php php php php php*php Mixedphp Coveragephp characterphp mapphp tablephp typephp.
php php php php php php*php/
php php php php constphp TYPEphp_MIXEDphp_COVERAGEphp php=php php0xphp0php8php;

php php php php php/php*php*
php php php php php php*php Trimmedphp Arrayphp characterphp mapphp tablephp typephp.
php php php php php php*php/
php php php php constphp TYPEphp_TRIMMEDphp_ARRAYphp php=php php0xphp0aphp;

php php php php php/php*php*
php php php php php php*php Segmentedphp Coveragephp characterphp mapphp tablephp typephp.
php php php php php php*php/
php php php php constphp TYPEphp_SEGMENTEDphp_COVERAGEphp php=php php0xphp0cphp;

php php php php php/php*php*
php php php php php php*php Staticphp Bytephp Encodingphp characterphp mapphp tablephp typephp.php Variantphp of
php php php php php php*php php{php@linkphp TYPEphp_BYTEENCODINGphp}php.
php php php php php php*php/
php php php php constphp TYPEphp_BYTEphp_ENCODINGphp_STATICphp php=php php0xfphp1php;

php php php php php/php*php*
php php php php php php*php Unknownphp characterphp mapphp tablephp typephp.
php php php php php php*php/
php php php php constphp TYPEphp_UNKNOWNphp php=php php0xffphp;


php php php/php*php Specialphp Glyphphp Namesphp php*php/

php php php php php/php*php*
php php php php php php*php Glyphphp representingphp missingphp charactersphp.
php php php php php php*php/
php php php php constphp MISSINGphp_CHARACTERphp_GLYPHphp php=php php0xphp0php0php;



php php php/php*php*php*php*php Publicphp Interfacephp php*php*php*php*php/


php php php/php*php Factoryphp Methodsphp php*php/

php php php php php/php*php*
php php php php php php*php Instantiatesphp thephp appropriatephp concretephp subclassphp basedphp onphp thephp typephp ofphp cmap
php php php php php php*php tablephp andphp returnsphp thephp instancephp.
php php php php php php*
php php php php php php*php Thephp cmapphp typephp mustphp bephp onephp ofphp thephp followingphp valuesphp:
php php php php php php*php php<ulphp>
php php php php php php*php php php<liphp>php{php@linkphp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_BYTEphp_ENCODINGphp}
php php php php php php*php php php<liphp>php{php@linkphp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_BYTEphp_ENCODINGphp_STATICphp}
php php php php php php*php php php<liphp>php{php@linkphp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_HIGHphp_BYTEphp_MAPPINGphp}
php php php php php php*php php php<liphp>php{php@linkphp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_SEGMENTphp_TOphp_DELTAphp}
php php php php php php*php php php<liphp>php{php@linkphp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_TRIMMEDphp_TABLEphp}
php php php php php php*php php php<liphp>php{php@linkphp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_MIXEDphp_COVERAGEphp}
php php php php php php*php php php<liphp>php{php@linkphp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_TRIMMEDphp_ARRAYphp}
php php php php php php*php php php<liphp>php{php@linkphp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_SEGMENTEDphp_COVERAGEphp}
php php php php php php*php <php/ulphp>
php php php php php php*
php php php php php php*php Throwsphp anphp exceptionphp ifphp thephp tablephp typephp isphp invalidphp orphp thephp cmapphp tablephp data
php php php php php php*php cannotphp bephp validatedphp.
php php php php php php*
php php php php php php*php php@paramphp integerphp php$cmapTypephp Typephp ofphp cmapphp.
php php php php php php*php php@paramphp mixedphp php$cmapDataphp Cmapphp tablephp dataphp.php Usuallyphp aphp stringphp orphp arrayphp.
php php php php php php*php php@returnphp Zendphp_Pdfphp_Cmap
php php php php php php*php php@throwsphp Zendphp_Pdfphp_Exception
php php php php php php*php/
php php php php publicphp staticphp functionphp cmapWithTypeDataphp(php$cmapTypephp,php php$cmapDataphp)
php php php php php{
php php php php php php php php switchphp php(php$cmapTypephp)php php{
php php php php php php php php php php php php casephp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_BYTEphp_ENCODINGphp:
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Cmapphp/ByteEncodingphp.phpphp'php;
php php php php php php php php php php php php php php php php returnphp newphp Zendphp_Pdfphp_Cmapphp_ByteEncodingphp(php$cmapDataphp)php;

php php php php php php php php php php php php casephp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_BYTEphp_ENCODINGphp_STATICphp:
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Cmapphp/ByteEncodingphp/Staticphp.phpphp'php;
php php php php php php php php php php php php php php php php returnphp newphp Zendphp_Pdfphp_Cmapphp_ByteEncodingphp_Staticphp(php$cmapDataphp)php;

php php php php php php php php php php php php casephp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_HIGHphp_BYTEphp_MAPPINGphp:
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Pdfphp_Exceptionphp(php'Highphp bytephp mappingphp cmapphp currentlyphp unsupportedphp'php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Pdfphp_Exceptionphp:php:CMAPphp_TYPEphp_UNSUPPORTEDphp)php;

php php php php php php php php php php php php casephp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_SEGMENTphp_TOphp_DELTAphp:
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Cmapphp/SegmentToDeltaphp.phpphp'php;
php php php php php php php php php php php php php php php php returnphp newphp Zendphp_Pdfphp_Cmapphp_SegmentToDeltaphp(php$cmapDataphp)php;

php php php php php php php php php php php php casephp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_TRIMMEDphp_TABLEphp:
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Cmapphp/TrimmedTablephp.phpphp'php;
php php php php php php php php php php php php php php php php returnphp newphp Zendphp_Pdfphp_Cmapphp_TrimmedTablephp(php$cmapDataphp)php;

php php php php php php php php php php php php casephp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_MIXEDphp_COVERAGEphp:
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Pdfphp_Exceptionphp(php'Mixedphp coveragephp cmapphp currentlyphp unsupportedphp'php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Pdfphp_Exceptionphp:php:CMAPphp_TYPEphp_UNSUPPORTEDphp)php;

php php php php php php php php php php php php casephp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_TRIMMEDphp_ARRAYphp:
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Pdfphp_Exceptionphp(php'Trimmedphp arrayphp cmapphp currentlyphp unsupportedphp'php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Pdfphp_Exceptionphp:php:CMAPphp_TYPEphp_UNSUPPORTEDphp)php;

php php php php php php php php php php php php casephp Zendphp_Pdfphp_Cmapphp:php:TYPEphp_SEGMENTEDphp_COVERAGEphp:
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Pdfphp_Exceptionphp(php'Segmentedphp coveragephp cmapphp currentlyphp unsupportedphp'php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Pdfphp_Exceptionphp:php:CMAPphp_TYPEphp_UNSUPPORTEDphp)php;

php php php php php php php php php php php php defaultphp:
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Pdfphp_Exceptionphp(php"Unknownphp cmapphp typephp:php php$cmapTypephp"php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Pdfphp_Exceptionphp:php:CMAPphp_UNKNOWNphp_TYPEphp)php;
php php php php php php php php php}
php php php php php}


php php php/php*php Abstractphp Methodsphp php*php/

php php php php php/php*php*
php php php php php php*php Objectphp constructor
php php php php php php*
php php php php php php*php Parsesphp thephp rawphp binaryphp tablephp dataphp.php Throwsphp anphp exceptionphp ifphp thephp tablephp is
php php php php php php*php malformedphp.
php php php php php php*
php php php php php php*php php@paramphp stringphp php$cmapDataphp Rawphp binaryphp cmapphp tablephp dataphp.
php php php php php php*php php@throwsphp Zendphp_Pdfphp_Exception
php php php php php php*php/
php php php php abstractphp publicphp functionphp php_php_constructphp(php$cmapDataphp)php;

php php php php php/php*php*
php php php php php php*php Returnsphp anphp arrayphp ofphp glyphphp numbersphp correspondingphp tophp thephp Unicodephp charactersphp.
php php php php php php*
php php php php php php*php Ifphp aphp particularphp characterphp doesnphp'tphp existphp inphp thisphp fontphp,php thephp specialphp php'missing
php php php php php php*php characterphp glyphphp'php willphp bephp substitutedphp.
php php php php php php*
php php php php php php*php Seephp alsophp php{php@linkphp glyphNumberForCharacterphp(php)php}php.
php php php php php php*
php php php php php php*php php@paramphp arrayphp php$characterCodesphp Arrayphp ofphp Unicodephp characterphp codesphp php(codephp pointsphp)php.
php php php php php php*php php@returnphp arrayphp Arrayphp ofphp glyphphp numbersphp.
php php php php php php*php/
php php php php abstractphp publicphp functionphp glyphNumbersForCharactersphp(php$characterCodesphp)php;

php php php php php/php*php*
php php php php php php*php Returnsphp thephp glyphphp numberphp correspondingphp tophp thephp Unicodephp characterphp.
php php php php php php*
php php php php php php*php Ifphp aphp particularphp characterphp doesnphp'tphp existphp inphp thisphp fontphp,php thephp specialphp php'missing
php php php php php php*php characterphp glyphphp'php willphp bephp substitutedphp.
php php php php php php*
php php php php php php*php Seephp alsophp php{php@linkphp glyphNumbersForCharactersphp(php)php}php whichphp isphp optimizedphp forphp bulk
php php php php php php*php operationsphp.
php php php php php php*
php php php php php php*php php@paramphp integerphp php$characterCodephp Unicodephp characterphp codephp php(codephp pointphp)php.
php php php php php php*php php@returnphp integerphp Glyphphp numberphp.
php php php php php php*php/
php php php php abstractphp publicphp functionphp glyphNumberForCharacterphp(php$characterCodephp)php;

php php php php php/php*php*
php php php php php php*php Returnsphp anphp arrayphp containingphp thephp Unicodephp charactersphp thatphp havephp entriesphp in
php php php php php php*php thisphp characterphp mapphp.
php php php php php php*
php php php php php php*php php@returnphp arrayphp Unicodephp characterphp codesphp.
php php php php php php*php/
php php php php abstractphp publicphp functionphp getCoveredCharactersphp(php)php;

php php php php php/php*php*
php php php php php php*php Returnsphp anphp arrayphp containingphp thephp glyphsphp numbersphp thatphp havephp entriesphp inphp thisphp characterphp mapphp.
php php php php php php*php Keysphp arephp Unicodephp characterphp codesphp php(integersphp)
php php php php php php*
php php php php php php*php Thisphp functionalityphp isphp partiallyphp coveredphp byphp glyphNumbersForCharactersphp(getCoveredCharactersphp(php)php)
php php php php php php*php callphp,php butphp thisphp methodphp dophp itphp inphp morephp effectivephp wayphp php(preparephp completephp listphp insteadphp ofphp searching
php php php php php php*php glyphphp forphp eachphp characterphp codephp)php.
php php php php php php*
php php php php php php*php php@internal
php php php php php php*php php@returnphp arrayphp Arrayphp representingphp php<Unicodephp characterphp codephp>php php=php>php php<glyphphp numberphp>php pairsphp.
php php php php php php*php/
php php php php abstractphp publicphp functionphp getCoveredCharactersGlyphsphp(php)php;


php php php/php*php*php*php*php Internalphp Methodsphp php*php*php*php*php/


php php php/php*php Internalphp Utilityphp Methodsphp php*php/

php php php php php/php*php*
php php php php php php*php Extractsphp aphp signedphp php2php-bytephp integerphp fromphp aphp stringphp.
php php php php php php*
php php php php php php*php Integersphp arephp alwaysphp bigphp-endianphp.php Throwsphp anphp exceptionphp ifphp thephp indexphp isphp out
php php php php php php*php ofphp rangephp.
php php php php php php*
php php php php php php*php php@paramphp stringphp php&php$data
php php php php php php*php php@paramphp integerphp php$indexphp Positionphp inphp stringphp ofphp integerphp.
php php php php php php*php php@returnphp integer
php php php php php php*php php@throwsphp Zendphp_Pdfphp_Exception
php php php php php php*php/
php php php php protectedphp functionphp php_extractIntphp2php(php&php$dataphp,php php$indexphp)
php php php php php{
php php php php php php php php ifphp php(php(php$indexphp <php php0php)php php|php php(php(php$indexphp php+php php1php)php php>php strlenphp(php$dataphp)php)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Pdfphp_Exceptionphp(php"Indexphp outphp ofphp rangephp:php php$indexphp"php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Pdfphp_Exceptionphp:php:INDEXphp_OUTphp_OFphp_RANGEphp)php;
php php php php php php php php php}
php php php php php php php php php$numberphp php=php ordphp(php$dataphp[php$indexphp]php)php;
php php php php php php php php ifphp php(php(php$numberphp php&php php0xphp8php0php)php php=php=php php0xphp8php0php)php php{php php php php php/php/php negative
php php php php php php php php php php php php php$numberphp php=php php~php(php(php(php(php~php php$numberphp)php php&php php0xffphp)php <php<php php8php)php php|php php(php(php~php ordphp(php$dataphp[php+php+php$indexphp]php)php)php php&php php0xffphp)php)php;
php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php$numberphp php=php php(php$numberphp <php<php php8php)php php|php ordphp(php$dataphp[php+php+php$indexphp]php)php;
php php php php php php php php php}
php php php php php php php php returnphp php$numberphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Extractsphp anphp unsignedphp php2php-bytephp integerphp fromphp aphp stringphp.
php php php php php php*
php php php php php php*php Integersphp arephp alwaysphp bigphp-endianphp.php Throwsphp anphp exceptionphp ifphp thephp indexphp isphp out
php php php php php php*php ofphp rangephp.
php php php php php php*
php php php php php php*php php@paramphp stringphp php&php$data
php php php php php php*php php@paramphp integerphp php$indexphp Positionphp inphp stringphp ofphp integerphp.
php php php php php php*php php@returnphp integer
php php php php php php*php php@throwsphp Zendphp_Pdfphp_Exception
php php php php php php*php/
php php php php protectedphp functionphp php_extractUIntphp2php(php&php$dataphp,php php$indexphp)
php php php php php{
php php php php php php php php ifphp php(php(php$indexphp <php php0php)php php|php php(php(php$indexphp php+php php1php)php php>php strlenphp(php$dataphp)php)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Pdfphp_Exceptionphp(php"Indexphp outphp ofphp rangephp:php php$indexphp"php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Pdfphp_Exceptionphp:php:INDEXphp_OUTphp_OFphp_RANGEphp)php;
php php php php php php php php php}
php php php php php php php php php$numberphp php=php php(ordphp(php$dataphp[php$indexphp]php)php <php<php php8php)php php|php ordphp(php$dataphp[php+php+php$indexphp]php)php;
php php php php php php php php returnphp php$numberphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Extractsphp anphp unsignedphp php4php-bytephp integerphp fromphp aphp stringphp.
php php php php php php*
php php php php php php*php Integersphp arephp alwaysphp bigphp-endianphp.php Throwsphp anphp exceptionphp ifphp thephp indexphp isphp out
php php php php php php*php ofphp rangephp.
php php php php php php*
php php php php php php*php NOTEphp:php Ifphp youphp askphp forphp aphp php4php-bytephp unsignedphp integerphp onphp aphp php3php2php-bitphp machinephp,php the
php php php php php php*php resultingphp valuephp WILLphp BEphp SIGNEDphp becausephp PHPphp usesphp signedphp integersphp internally
php php php php php php*php forphp everythingphp.php Tophp guaranteephp portabilityphp,php bephp surephp tophp usephp bitwisephp or
php php php php php php*php similarphp operatorsphp onphp largephp integersphp!
php php php php php php*
php php php php php php*php php@paramphp stringphp php&php$data
php php php php php php*php php@paramphp integerphp php$indexphp Positionphp inphp stringphp ofphp integerphp.
php php php php php php*php php@returnphp integer
php php php php php php*php php@throwsphp Zendphp_Pdfphp_Exception
php php php php php php*php/
php php php php protectedphp functionphp php_extractUIntphp4php(php&php$dataphp,php php$indexphp)
php php php php php{
php php php php php php php php ifphp php(php(php$indexphp <php php0php)php php|php php(php(php$indexphp php+php php3php)php php>php strlenphp(php$dataphp)php)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Pdfphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Pdfphp_Exceptionphp(php"Indexphp outphp ofphp rangephp:php php$indexphp"php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php Zendphp_Pdfphp_Exceptionphp:php:INDEXphp_OUTphp_OFphp_RANGEphp)php;
php php php php php php php php php}
php php php php php php php php php$numberphp php=php php(ordphp(php$dataphp[php$indexphp]php)php <php<php php2php4php)php php|php php(ordphp(php$dataphp[php+php+php$indexphp]php)php <php<php php1php6php)php php|
php php php php php php php php php php php php php php php php php php php(ordphp(php$dataphp[php+php+php$indexphp]php)php <php<php php8php)php php|php ordphp(php$dataphp[php+php+php$indexphp]php)php;
php php php php php php php php returnphp php$numberphp;
php php php php php}

php}

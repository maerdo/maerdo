<php?php
php/php*php*
php php*php Zendphp Framework
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Filter
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php php$Idphp:php Booleanphp.phpphp php2php2php6php6php2php php2php0php1php0php-php0php7php-php2php4php php1php7php:php3php7php:php3php6Zphp mabephp php$
php php*php/

php/php*php*
php php*php php@seephp Zendphp_Filterphp_Interface
php php*php/
requirephp_oncephp php'Zendphp/Filterphp/Interfacephp.phpphp'php;

php/php*php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Filter
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/
classphp Zendphp_Filterphp_Booleanphp implementsphp Zendphp_Filterphp_Interface
php{
php php php php constphp BOOLEANphp php php php php php php=php php1php;
php php php php constphp INTEGERphp php php php php php php=php php2php;
php php php php constphp FLOATphp php php php php php php php php=php php4php;
php php php php constphp STRINGphp php php php php php php php=php php8php;
php php php php constphp ZEROphp php php php php php php php php php=php php1php6php;
php php php php constphp EMPTYphp_ARRAYphp php php=php php3php2php;
php php php php constphp NULLphp php php php php php php php php php=php php6php4php;
php php php php constphp PHPphp php php php php php php php php php php=php php1php2php7php;
php php php php constphp FALSEphp_STRINGphp php=php php1php2php8php;
php php php php constphp YESphp php php php php php php php php php php=php php2php5php6php;
php php php php constphp ALLphp php php php php php php php php php php=php php5php1php1php;

php php php php protectedphp php$php_constantsphp php=php arrayphp(
php php php php php php php php selfphp:php:BOOLEANphp php php php php php php=php>php php'booleanphp'php,
php php php php php php php php selfphp:php:INTEGERphp php php php php php php=php>php php'integerphp'php,
php php php php php php php php selfphp:php:FLOATphp php php php php php php php php=php>php php'floatphp'php,
php php php php php php php php selfphp:php:STRINGphp php php php php php php php=php>php php'stringphp'php,
php php php php php php php php selfphp:php:ZEROphp php php php php php php php php php=php>php php'zerophp'php,
php php php php php php php php selfphp:php:EMPTYphp_ARRAYphp php php=php>php php'arrayphp'php,
php php php php php php php php selfphp:php:NULLphp php php php php php php php php php=php>php php'nullphp'php,
php php php php php php php php selfphp:php:PHPphp php php php php php php php php php php=php>php php'phpphp'php,
php php php php php php php php selfphp:php:FALSEphp_STRINGphp php=php>php php'falsephp'php,
php php php php php php php php selfphp:php:YESphp php php php php php php php php php php=php>php php'yesphp'php,
php php php php php php php php selfphp:php:ALLphp php php php php php php php php php php=php>php php'allphp'php,
php php php php php)php;

php php php php php/php*php*
php php php php php php*php Internalphp typephp tophp detect
php php php php php php*
php php php php php php*php php@varphp integer
php php php php php php*php/
php php php php protectedphp php$php_typephp php=php selfphp:php:PHPphp;

php php php php php/php*php*
php php php php php php*php Internalphp locale
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_localephp php=php arrayphp(php'autophp'php)php;

php php php php php/php*php*
php php php php php php*php Internalphp mode
php php php php php php*
php php php php php php*php php@varphp boolean
php php php php php php*php/
php php php php protectedphp php$php_castingphp php=php truephp;

php php php php php/php*php*
php php php php php php*php Constructor
php php php php php php*
php php php php php php*php php@paramphp stringphp|arrayphp|Zendphp_Configphp php$optionsphp OPTIONAL
php php php php php php*php/
php php php php publicphp functionphp php_php_constructphp(php$optionsphp php=php nullphp)
php php php php php{
php php php php php php php php ifphp php(php$optionsphp instanceofphp Zendphp_Configphp)php php{
php php php php php php php php php php php php php$optionsphp php=php php$optionsphp-php>toArrayphp(php)php;
php php php php php php php php php}php elseifphp php(php!isphp_arrayphp(php$optionsphp)php)php php{
php php php php php php php php php php php php php$optionsphp php=php funcphp_getphp_argsphp(php)php;
php php php php php php php php php php php php php$tempphp php php php php=php arrayphp(php)php;
php php php php php php php php php php php php ifphp php(php!emptyphp(php$optionsphp)php)php php{
php php php php php php php php php php php php php php php php php$tempphp[php'typephp'php]php php=php arrayphp_shiftphp(php$optionsphp)php;
php php php php php php php php php php php php php}

php php php php php php php php php php php php ifphp php(php!emptyphp(php$optionsphp)php)php php{
php php php php php php php php php php php php php php php php php$tempphp[php'castingphp'php]php php=php arrayphp_shiftphp(php$optionsphp)php;
php php php php php php php php php php php php php}

php php php php php php php php php php php php ifphp php(php!emptyphp(php$optionsphp)php)php php{
php php php php php php php php php php php php php php php php php$tempphp[php'localephp'php]php php=php arrayphp_shiftphp(php$optionsphp)php;
php php php php php php php php php php php php php}

php php php php php php php php php php php php php$optionsphp php=php php$tempphp;
php php php php php php php php php}

php php php php php php php php ifphp php(arrayphp_keyphp_existsphp(php'typephp'php,php php$optionsphp)php)php php{
php php php php php php php php php php php php php$thisphp-php>setTypephp(php$optionsphp[php'typephp'php]php)php;
php php php php php php php php php}

php php php php php php php php ifphp php(arrayphp_keyphp_existsphp(php'castingphp'php,php php$optionsphp)php)php php{
php php php php php php php php php php php php php$thisphp-php>setCastingphp(php$optionsphp[php'castingphp'php]php)php;
php php php php php php php php php}

php php php php php php php php ifphp php(arrayphp_keyphp_existsphp(php'localephp'php,php php$optionsphp)php)php php{
php php php php php php php php php php php php php$thisphp-php>setLocalephp(php$optionsphp[php'localephp'php]php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnsphp thephp setphp nullphp types
php php php php php php*
php php php php php php*php php@returnphp int
php php php php php php*php/
php php php php publicphp functionphp getTypephp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_typephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp thephp nullphp types
php php php php php php*
php php php php php php*php php@paramphp php integerphp|arrayphp php$type
php php php php php php*php php@throwsphp Zendphp_Filterphp_Exception
php php php php php php*php php@returnphp Zendphp_Filterphp_Boolean
php php php php php php*php/
php php php php publicphp functionphp setTypephp(php$typephp php=php nullphp)
php php php php php{
php php php php php php php php ifphp php(isphp_arrayphp(php$typephp)php)php php{
php php php php php php php php php php php php php$detectedphp php=php php0php;
php php php php php php php php php php php php foreachphp(php$typephp asphp php$valuephp)php php{
php php php php php php php php php php php php php php php php ifphp php(isphp_intphp(php$valuephp)php)php php{
php php php php php php php php php php php php php php php php php php php php php$detectedphp php+php=php php$valuephp;
php php php php php php php php php php php php php php php php php}php elseifphp php(inphp_arrayphp(php$valuephp,php php$thisphp-php>php_constantsphp)php)php php{
php php php php php php php php php php php php php php php php php php php php php$detectedphp php+php=php arrayphp_searchphp(php$valuephp,php php$thisphp-php>php_constantsphp)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}

php php php php php php php php php php php php php$typephp php=php php$detectedphp;
php php php php php php php php php}php elseifphp php(isphp_stringphp(php$typephp)php php&php&php inphp_arrayphp(php$typephp,php php$thisphp-php>php_constantsphp)php)php php{
php php php php php php php php php php php php php$typephp php=php arrayphp_searchphp(php$typephp,php php$thisphp-php>php_constantsphp)php;
php php php php php php php php php}

php php php php php php php php ifphp php(php!isphp_intphp(php$typephp)php php|php|php php(php$typephp <php php0php)php php|php|php php(php$typephp php>php selfphp:php:ALLphp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Filterphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Filterphp_Exceptionphp(php'Unknownphp typephp'php)php;
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_typephp php=php php$typephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnsphp thephp setphp locale
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp getLocalephp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_localephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp thephp localesphp whichphp arephp accepted
php php php php php php*
php php php php php php*php php@paramphp php stringphp|arrayphp|Zendphp_Localephp php$locale
php php php php php php*php php@throwsphp Zendphp_Filterphp_Exception
php php php php php php*php php@returnphp Zendphp_Filterphp_Boolean
php php php php php php*php/
php php php php publicphp functionphp setLocalephp(php$localephp php=php nullphp)
php php php php php{
php php php php php php php php ifphp php(isphp_stringphp(php$localephp)php)php php{
php php php php php php php php php php php php php$localephp php=php arrayphp(php$localephp)php;
php php php php php php php php php}php elseifphp php(php$localephp instanceofphp Zendphp_Localephp)php php{
php php php php php php php php php php php php php$localephp php=php arrayphp(php$localephp-php>toStringphp(php)php)php;
php php php php php php php php php}php elseifphp php(php!isphp_arrayphp(php$localephp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Filterphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Filterphp_Exceptionphp(php'Localephp hasphp tophp bephp stringphp,php arrayphp orphp anphp instancephp ofphp Zendphp_Localephp'php)php;
php php php php php php php php php}

php php php php php php php php requirephp_oncephp php'Zendphp/Localephp.phpphp'php;
php php php php php php php php foreachphp php(php$localephp asphp php$singlephp)php php{
php php php php php php php php php php php php ifphp php(php!Zendphp_Localephp:php:isLocalephp(php$singlephp)php)php php{
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Filterphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Filterphp_Exceptionphp(php"Unknownphp localephp php'php$singlephp'php"php)php;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_localephp php=php php$localephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnsphp thephp castingphp option
php php php php php php*
php php php php php php*php php@returnphp boolean
php php php php php php*php/
php php php php publicphp functionphp getCastingphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_castingphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp thephp workingphp mode
php php php php php php*
php php php php php php*php php@paramphp php booleanphp php$localephp Whenphp truephp thisphp filterphp worksphp likephp cast
php php php php php php*php php php php php php php php php php php php php php php php php php php php php php php php php Whenphp falsephp itphp recognisesphp onlyphp truephp andphp false
php php php php php php*php php php php php php php php php php php php php php php php php php php php php php php php php andphp allphp otherphp valuesphp arephp returnedphp asphp is
php php php php php php*php php@throwsphp Zendphp_Filterphp_Exception
php php php php php php*php php@returnphp Zendphp_Filterphp_Boolean
php php php php php php*php/
php php php php publicphp functionphp setCastingphp(php$castingphp php=php truephp)
php php php php php{
php php php php php php php php php$thisphp-php>php_castingphp php=php php(booleanphp)php php$castingphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Definedphp byphp Zendphp_Filterphp_Interface
php php php php php php*
php php php php php php*php Returnsphp aphp booleanphp representationphp ofphp php$value
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$value
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp filterphp(php$valuephp)
php php php php php{
php php php php php php php php php$typephp php php php php=php php$thisphp-php>getTypephp(php)php;
php php php php php php php php php$castingphp php=php php$thisphp-php>getCastingphp(php)php;

php php php php php php php php php/php/php STRINGphp YESphp php(Localizedphp)
php php php php php php php php ifphp php(php$typephp php>php=php selfphp:php:YESphp)php php{
php php php php php php php php php php php php php$typephp php-php=php selfphp:php:YESphp;
php php php php php php php php php php php php ifphp php(isphp_stringphp(php$valuephp)php)php php{
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Localephp.phpphp'php;
php php php php php php php php php php php php php php php php php$localesphp php=php php$thisphp-php>getLocalephp(php)php;
php php php php php php php php php php php php php php php php foreachphp php(php$localesphp asphp php$localephp)php php{
php php php php php php php php php php php php php php php php php php php php ifphp php(php$thisphp-php>php_getLocalizedQuestionphp(php$valuephp,php falsephp,php php$localephp)php php=php=php=php falsephp)php php{
php php php php php php php php php php php php php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php php php php php php php php php php php php php}

php php php php php php php php php php php php php php php php php php php php ifphp php(php!php$castingphp php&php&php php(php$thisphp-php>php_getLocalizedQuestionphp(php$valuephp,php truephp,php php$localephp)php php=php=php=php truephp)php)php php{
php php php php php php php php php php php php php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php/php/php STRINGphp FALSEphp php(php'falsephp'php)
php php php php php php php php ifphp php(php$typephp php>php=php selfphp:php:FALSEphp_STRINGphp)php php{
php php php php php php php php php php php php php$typephp php-php=php selfphp:php:FALSEphp_STRINGphp;
php php php php php php php php php php php php ifphp php(isphp_stringphp(php$valuephp)php php&php&php php(strtolowerphp(php$valuephp)php php=php=php php'falsephp'php)php)php php{
php php php php php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php php php php php}

php php php php php php php php php php php php ifphp php(php(php!php$castingphp)php php&php&php isphp_stringphp(php$valuephp)php php&php&php php(strtolowerphp(php$valuephp)php php=php=php php'truephp'php)php)php php{
php php php php php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php/php/php NULLphp php(nullphp)
php php php php php php php php ifphp php(php$typephp php>php=php selfphp:php:NULLphp)php php{
php php php php php php php php php php php php php$typephp php-php=php selfphp:php:NULLphp;
php php php php php php php php php php php php ifphp php(php$valuephp php=php=php=php nullphp)php php{
php php php php php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php/php/php EMPTYphp_ARRAYphp php(arrayphp(php)php)
php php php php php php php php ifphp php(php$typephp php>php=php selfphp:php:EMPTYphp_ARRAYphp)php php{
php php php php php php php php php php php php php$typephp php-php=php selfphp:php:EMPTYphp_ARRAYphp;
php php php php php php php php php php php php ifphp php(isphp_arrayphp(php$valuephp)php php&php&php php(php$valuephp php=php=php arrayphp(php)php)php)php php{
php php php php php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php/php/php ZEROphp php(php'php0php'php)
php php php php php php php php ifphp php(php$typephp php>php=php selfphp:php:ZEROphp)php php{
php php php php php php php php php php php php php$typephp php-php=php selfphp:php:ZEROphp;
php php php php php php php php php php php php ifphp php(isphp_stringphp(php$valuephp)php php&php&php php(php$valuephp php=php=php php'php0php'php)php)php php{
php php php php php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php php php php php}

php php php php php php php php php php php php ifphp php(php(php!php$castingphp)php php&php&php php(isphp_stringphp(php$valuephp)php)php php&php&php php(php$valuephp php=php=php php'php1php'php)php)php php{
php php php php php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php/php/php STRINGphp php(php'php'php)
php php php php php php php php ifphp php(php$typephp php>php=php selfphp:php:STRINGphp)php php{
php php php php php php php php php php php php php$typephp php-php=php selfphp:php:STRINGphp;
php php php php php php php php php php php php ifphp php(isphp_stringphp(php$valuephp)php php&php&php php(php$valuephp php=php=php php'php'php)php)php php{
php php php php php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php/php/php FLOATphp php(php0php.php0php)
php php php php php php php php ifphp php(php$typephp php>php=php selfphp:php:FLOATphp)php php{
php php php php php php php php php php php php php$typephp php-php=php selfphp:php:FLOATphp;
php php php php php php php php php php php php ifphp php(isphp_floatphp(php$valuephp)php php&php&php php(php$valuephp php=php=php php0php.php0php)php)php php{
php php php php php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php php php php php}

php php php php php php php php php php php php ifphp php(php(php!php$castingphp)php php&php&php isphp_floatphp(php$valuephp)php php&php&php php(php$valuephp php=php=php php1php.php0php)php)php php{
php php php php php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php/php/php INTEGERphp php(php0php)
php php php php php php php php ifphp php(php$typephp php>php=php selfphp:php:INTEGERphp)php php{
php php php php php php php php php php php php php$typephp php-php=php selfphp:php:INTEGERphp;
php php php php php php php php php php php php ifphp php(isphp_intphp(php$valuephp)php php&php&php php(php$valuephp php=php=php php0php)php)php php{
php php php php php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php php php php php}

php php php php php php php php php php php php ifphp php(php(php!php$castingphp)php php&php&php isphp_intphp(php$valuephp)php php&php&php php(php$valuephp php=php=php php1php)php)php php{
php php php php php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php/php/php BOOLEANphp php(falsephp)
php php php php php php php php ifphp php(php$typephp php>php=php selfphp:php:BOOLEANphp)php php{
php php php php php php php php php php php php php$typephp php-php=php selfphp:php:BOOLEANphp;
php php php php php php php php php php php php ifphp php(isphp_boolphp(php$valuephp)php)php php{
php php php php php php php php php php php php php php php php returnphp php$valuephp;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php ifphp php(php$castingphp)php php{
php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php}

php php php php php php php php returnphp php$valuephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Determinephp thephp valuephp ofphp aphp localizedphp stringphp,php andphp comparephp itphp tophp aphp givenphp value
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$value
php php php php php php*php php@paramphp php booleanphp php$yes
php php php php php php*php php@paramphp php arrayphp php$locale
php php php php php php*php php@returnphp boolean
php php php php php php*php/
php php php php protectedphp functionphp php_getLocalizedQuestionphp(php$valuephp,php php$yesphp,php php$localephp)
php php php php php{
php php php php php php php php ifphp php(php$yesphp php=php=php truephp)php php{
php php php php php php php php php php php php php$questionphp php=php php'yesphp'php;
php php php php php php php php php php php php php$returnphp php php php=php truephp;
php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php$questionphp php=php php'nophp'php;
php php php php php php php php php php php php php$returnphp php php php=php falsephp;
php php php php php php php php php}
php php php php php php php php php$strphp php=php Zendphp_Localephp:php:getTranslationphp(php$questionphp,php php'questionphp'php,php php$localephp)php;
php php php php php php php php php$strphp php=php explodephp(php'php:php'php,php php$strphp)php;
php php php php php php php php ifphp php(php!emptyphp(php$strphp)php)php php{
php php php php php php php php php php php php foreachphp(php$strphp asphp php$nophp)php php{
php php php php php php php php php php php php php php php php ifphp php(php(php$nophp php=php=php php$valuephp)php php|php|php php(strtolowerphp(php$nophp)php php=php=php strtolowerphp(php$valuephp)php)php)php php{
php php php php php php php php php php php php php php php php php php php php returnphp php$returnphp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php}
php}

<php?php
php/php*php*
php php*php Zendphp Framework
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Tag
php php*php php@subpackagephp Cloud
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php php$Idphp:php HtmlTagphp.phpphp php2php0php1php0php4php php2php0php1php0php-php0php1php-php0php6php php2php1php:php2php6php:php0php1Zphp matthewphp php$
php php*php/

php/php*php*
php php*php php@seephp Zendphp_Tagphp_Cloudphp_Decoratorphp_Tag
php php*php/
requirephp_oncephp php'Zendphp/Tagphp/Cloudphp/Decoratorphp/Tagphp.phpphp'php;

php/php*php*
php php*php Simplephp HTMLphp decoratorphp forphp tags
php php*
php php*php php@categoryphp php Zend
php php*php php@packagephp php php Zendphp_Tag
php php*php php@usesphp php php php php php Zendphp_Tagphp_Cloudphp_Decoratorphp_Tag
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/
classphp Zendphp_Tagphp_Cloudphp_Decoratorphp_HtmlTagphp extendsphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Tag
php{
php php php php php/php*php*
php php php php php php*php Listphp ofphp tagsphp whichphp getphp assignedphp tophp thephp innerphp elementphp insteadphp of
php php php php php php*php fontphp-sizesphp.
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_classListphp php=php nullphp;

php php php php php/php*php*
php php php php php php*php php@varphp stringphp Encodingphp tophp utilize
php php php php php php*php/
php php php php protectedphp php$php_encodingphp php=php php'UTFphp-php8php'php;

php php php php php/php*php*
php php php php php php*php Unitphp forphp thephp fontsize
php php php php php php*
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_fontSizeUnitphp php=php php'pxphp'php;

php php php php php/php*php*
php php php php php php*php Allowedphp fontsizephp units
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_alloweFontSizeUnitsphp php=php arrayphp(php'emphp'php,php php'exphp'php,php php'pxphp'php,php php'inphp'php,php php'cmphp'php,php php'mmphp'php,php php'ptphp'php,php php'pcphp'php,php php'php%php'php)php;

php php php php php/php*php*
php php php php php php*php Listphp ofphp HTMLphp tags
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_htmlTagsphp php=php arrayphp(
php php php php php php php php php'liphp'
php php php php php)php;

php php php php php/php*php*
php php php php php php*php Maximumphp fontsize
php php php php php php*
php php php php php php*php php@varphp integer
php php php php php php*php/
php php php php protectedphp php$php_maxFontSizephp php=php php2php0php;

php php php php php/php*php*
php php php php php php*php Minimumphp fontsize
php php php php php php*
php php php php php php*php php@varphp integer
php php php php php php*php/
php php php php protectedphp php$php_minFontSizephp php=php php1php0php;

php php php php php/php*php*
php php php php php php*php Setphp aphp listphp ofphp classesphp tophp usephp insteadphp ofphp fontsizes
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$classList
php php php php php php*php php@throwsphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp Whenphp thephp classlistphp isphp empty
php php php php php php*php php@throwsphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp Whenphp thephp classlistphp containsphp anphp invalidphp classname
php php php php php php*php php@returnphp Zendphp_Tagphp_Cloudphp_Decoratorphp_HtmlTag
php php php php php php*php/
php php php php publicphp functionphp setClassListphp(arrayphp php$classListphp php=php nullphp)
php php php php php{
php php php php php php php php ifphp php(isphp_arrayphp(php$classListphp)php)php php{
php php php php php php php php php php php php ifphp php(countphp(php$classListphp)php php=php=php=php php0php)php php{
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Tagphp/Cloudphp/Decoratorphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp(php'Classlistphp isphp emptyphp'php)php;
php php php php php php php php php php php php php}

php php php php php php php php php php php php foreachphp php(php$classListphp asphp php$classphp)php php{
php php php php php php php php php php php php php php php php ifphp php(php!isphp_stringphp(php$classphp)php)php php{
php php php php php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Tagphp/Cloudphp/Decoratorphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp(php'Classlistphp containsphp anphp invalidphp classnamephp'php)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_classListphp php=php php$classListphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp classphp list
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp getClassListphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_classListphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp encoding
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getEncodingphp(php)
php php php php php{
php php php php php php php php php returnphp php$thisphp-php>php_encodingphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp encoding
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$value
php php php php php php*php php@returnphp Zendphp_Tagphp_Cloudphp_Decoratorphp_HtmlTag
php php php php php php*php/
php php php php publicphp functionphp setEncodingphp(php$valuephp)
php php php php php{
php php php php php php php php php$thisphp-php>php_encodingphp php=php php(stringphp)php php$valuephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp thephp fontphp sizephp unit
php php php php php php*
php php php php php php*php Possiblephp valuesphp arephp:php emphp,php exphp,php pxphp,php inphp,php cmphp,php mmphp,php ptphp,php pcphp andphp php%
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$fontSizeUnit
php php php php php php*php php@throwsphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp Whenphp anphp invalidphp fontsizephp unitphp isphp specified
php php php php php php*php php@returnphp Zendphp_Tagphp_Cloudphp_Decoratorphp_HtmlTag
php php php php php php*php/
php php php php publicphp functionphp setFontSizeUnitphp(php$fontSizeUnitphp)
php php php php php{
php php php php php php php php ifphp php(php!inphp_arrayphp(php$fontSizeUnitphp,php php$thisphp-php>php_alloweFontSizeUnitsphp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Tagphp/Cloudphp/Decoratorphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp(php'Invalidphp fontsizephp unitphp specifiedphp'php)php;
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_fontSizeUnitphp php=php php(stringphp)php php$fontSizeUnitphp;
php php php php php php php php php$thisphp-php>setClassListphp(nullphp)php;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp fontphp sizephp unit
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getFontSizeUnitphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_fontSizeUnitphp;
php php php php php}
php php php php php php/php*php*
php php php php php php*php Setphp thephp HTMLphp tagsphp surroundingphp thephp php<aphp>php element
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$htmlTags
php php php php php php*php php@returnphp Zendphp_Tagphp_Cloudphp_Decoratorphp_HtmlTag
php php php php php php*php/
php php php php publicphp functionphp setHtmlTagsphp(arrayphp php$htmlTagsphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_htmlTagsphp php=php php$htmlTagsphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp HTMLphp tagsphp map
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp getHtmlTagsphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_htmlTagsphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp maximumphp fontphp size
php php php php php php*
php php php php php php*php php@paramphp php integerphp php$maxFontSize
php php php php php php*php php@throwsphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp Whenphp fontsizephp isphp notphp numeric
php php php php php php*php php@returnphp Zendphp_Tagphp_Cloudphp_Decoratorphp_HtmlTag
php php php php php php*php/
php php php php publicphp functionphp setMaxFontSizephp(php$maxFontSizephp)
php php php php php{
php php php php php php php php ifphp php(php!isphp_numericphp(php$maxFontSizephp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Tagphp/Cloudphp/Decoratorphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp(php'Fontsizephp mustphp bephp numericphp'php)php;
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_maxFontSizephp php=php php(intphp)php php$maxFontSizephp;
php php php php php php php php php$thisphp-php>setClassListphp(nullphp)php;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp maximumphp fontphp size
php php php php php php*
php php php php php php*php php@returnphp int
php php php php php php*php/
php php php php publicphp functionphp getMaxFontSizephp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_maxFontSizephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp minimumphp fontphp size
php php php php php php*
php php php php php php*php php@paramphp php intphp php$minFontSize
php php php php php php*php php@throwsphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp Whenphp fontsizephp isphp notphp numeric
php php php php php php*php php@returnphp Zendphp_Tagphp_Cloudphp_Decoratorphp_HtmlTag
php php php php php php*php/
php php php php publicphp functionphp setMinFontSizephp(php$minFontSizephp)
php php php php php{
php php php php php php php php ifphp php(php!isphp_numericphp(php$minFontSizephp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Tagphp/Cloudphp/Decoratorphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Exceptionphp(php'Fontsizephp mustphp bephp numericphp'php)php;
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_minFontSizephp php=php php(intphp)php php$minFontSizephp;
php php php php php php php php php$thisphp-php>setClassListphp(nullphp)php;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp minimumphp fontphp size
php php php php php php*
php php php php php php*php php@returnphp int
php php php php php php*php/
php php php php publicphp functionphp getMinFontSizephp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_minFontSizephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Definedphp byphp Zendphp_Tagphp_Cloudphp_Decoratorphp_Tag
php php php php php php*
php php php php php php*php php@paramphp php Zendphp_Tagphp_ItemListphp php$tags
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp renderphp(Zendphp_Tagphp_ItemListphp php$tagsphp)
php php php php php{
php php php php php php php php ifphp php(nullphp php=php=php=php php(php$weightValuesphp php=php php$thisphp-php>getClassListphp(php)php)php)php php{
php php php php php php php php php php php php php$weightValuesphp php=php rangephp(php$thisphp-php>getMinFontSizephp(php)php,php php$thisphp-php>getMaxFontSizephp(php)php)php;
php php php php php php php php php}

php php php php php php php php php$tagsphp-php>spreadWeightValuesphp(php$weightValuesphp)php;

php php php php php php php php php$resultphp php=php arrayphp(php)php;

php php php php php php php php php$encphp php=php php$thisphp-php>getEncodingphp(php)php;
php php php php php php php php foreachphp php(php$tagsphp asphp php$tagphp)php php{
php php php php php php php php php php php php ifphp php(nullphp php=php=php=php php(php$classListphp php=php php$thisphp-php>getClassListphp(php)php)php)php php{
php php php php php php php php php php php php php php php php php$attributephp php=php sprintfphp(php'stylephp=php"fontphp-sizephp:php php%dphp%sphp;php"php'php,php php$tagphp-php>getParamphp(php'weightValuephp'php)php,php php$thisphp-php>getFontSizeUnitphp(php)php)php;
php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php$attributephp php=php sprintfphp(php'classphp=php"php%sphp"php'php,php htmlspecialcharsphp(php$tagphp-php>getParamphp(php'weightValuephp'php)php,php ENTphp_COMPATphp,php php$encphp)php)php;
php php php php php php php php php php php php php}

php php php php php php php php php php php php php$tagHtmlphp php=php sprintfphp(php'php<aphp hrefphp=php"php%sphp"php php%sphp>php%s<php/aphp>php'php,php htmlSpecialCharsphp(php$tagphp-php>getParamphp(php'urlphp'php)php,php ENTphp_COMPATphp,php php$encphp)php,php php$attributephp,php php$tagphp-php>getTitlephp(php)php)php;

php php php php php php php php php php php php foreachphp php(php$thisphp-php>getHtmlTagsphp(php)php asphp php$keyphp php=php>php php$dataphp)php php{
php php php php php php php php php php php php php php php php ifphp php(isphp_arrayphp(php$dataphp)php)php php{
php php php php php php php php php php php php php php php php php php php php php$htmlTagphp php php php php=php php$keyphp;
php php php php php php php php php php php php php php php php php php php php php$attributesphp php=php php'php'php;

php php php php php php php php php php php php php php php php php php php php foreachphp php(php$dataphp asphp php$paramphp php=php>php php$valuephp)php php{
php php php php php php php php php php php php php php php php php php php php php php php php php$attributesphp php.php=php php'php php'php php.php php$paramphp php.php php'php=php"php'php php.php htmlspecialcharsphp(php$valuephp,php ENTphp_COMPATphp,php php$encphp)php php.php php'php"php'php;
php php php php php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php$htmlTagphp php php php php=php php$dataphp;
php php php php php php php php php php php php php php php php php php php php php$attributesphp php=php php'php'php;
php php php php php php php php php php php php php php php php php}

php php php php php php php php php php php php php php php php php$tagHtmlphp php=php sprintfphp(php'<php%php1php$sphp%php3php$sphp>php%php2php$s<php/php%php1php$sphp>php'php,php php$htmlTagphp,php php$tagHtmlphp,php php$attributesphp)php;
php php php php php php php php php php php php php}

php php php php php php php php php php php php php$resultphp[php]php php=php php$tagHtmlphp;
php php php php php php php php php}

php php php php php php php php returnphp php$resultphp;
php php php php php}
php}

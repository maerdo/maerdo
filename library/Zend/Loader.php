<php?php
php/php*php*
php php*php Zendphp Framework
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Loader
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php php$Idphp:php Loaderphp.phpphp php2php3php4php8php4php php2php0php1php0php-php1php2php-php1php0php php0php3php:php5php7php:php5php9Zphp mjhphp_caphp php$
php php*php/

php/php*php*
php php*php Staticphp methodsphp forphp loadingphp classesphp andphp filesphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Loader
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/
classphp Zendphp_Loader
php{
php php php php php/php*php*
php php php php php php*php Loadsphp aphp classphp fromphp aphp PHPphp filephp.php php Thephp filenamephp mustphp bephp formatted
php php php php php php*php asphp php"php$classphp.phpphp"php.
php php php php php php*
php php php php php php*php Ifphp php$dirsphp isphp aphp stringphp orphp anphp arrayphp,php itphp willphp searchphp thephp directories
php php php php php php*php inphp thephp orderphp suppliedphp,php andphp attemptphp tophp loadphp thephp firstphp matchingphp filephp.
php php php php php php*
php php php php php php*php Ifphp php$dirsphp isphp nullphp,php itphp willphp splitphp thephp classphp namephp atphp underscoresphp to
php php php php php php*php generatephp aphp pathphp hierarchyphp php(ephp.gphp.php,php php"Zendphp_Examplephp_Classphp"php willphp map
php php php php php php*php tophp php"Zendphp/Examplephp/Classphp.phpphp"php)php.
php php php php php php*
php php php php php php*php Ifphp thephp filephp wasphp notphp foundphp inphp thephp php$dirsphp,php orphp ifphp nophp php$dirsphp werephp specifiedphp,
php php php php php php*php itphp willphp attemptphp tophp loadphp itphp fromphp PHPphp'sphp includephp_pathphp.
php php php php php php*
php php php php php php*php php@paramphp stringphp php$classphp php php php php php php-php Thephp fullphp classphp namephp ofphp aphp Zendphp componentphp.
php php php php php php*php php@paramphp stringphp|arrayphp php$dirsphp php-php OPTIONALphp Eitherphp aphp pathphp orphp anphp arrayphp ofphp paths
php php php php php php*php php php php php php php php php php php php php php php php php php php php php php php php php php php php php tophp searchphp.
php php php php php php*php php@returnphp void
php php php php php php*php php@throwsphp Zendphp_Exception
php php php php php php*php/
php php php php publicphp staticphp functionphp loadClassphp(php$classphp,php php$dirsphp php=php nullphp)
php php php php php{
php php php php php php php php ifphp php(classphp_existsphp(php$classphp,php falsephp)php php|php|php interfacephp_existsphp(php$classphp,php falsephp)php)php php{
php php php php php php php php php php php php returnphp;
php php php php php php php php php}

php php php php php php php php ifphp php(php(nullphp php!php=php=php php$dirsphp)php php&php&php php!isphp_stringphp(php$dirsphp)php php&php&php php!isphp_arrayphp(php$dirsphp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Exceptionphp(php'Directoryphp argumentphp mustphp bephp aphp stringphp orphp anphp arrayphp'php)php;
php php php php php php php php php}

php php php php php php php php php/php/php Autodiscoverphp thephp pathphp fromphp thephp classphp name
php php php php php php php php php/php/php Implementationphp isphp PHPphp namespacephp-awarephp,php andphp basedphp on
php php php php php php php php php/php/php Frameworkphp Interopphp Groupphp referencephp implementationphp:
php php php php php php php php php/php/php httpphp:php/php/groupsphp.googlephp.comphp/groupphp/phpphp-standardsphp/webphp/psrphp-php0php-finalphp-proposal
php php php php php php php php php$classNamephp php=php ltrimphp(php$classphp,php php'php\php\php'php)php;
php php php php php php php php php$filephp php php php php php php=php php'php'php;
php php php php php php php php php$namespacephp php=php php'php'php;
php php php php php php php php ifphp php(php$lastNsPosphp php=php strriposphp(php$classNamephp,php php'php\php\php'php)php)php php{
php php php php php php php php php php php php php$namespacephp php=php substrphp(php$classNamephp,php php0php,php php$lastNsPosphp)php;
php php php php php php php php php php php php php$classNamephp php=php substrphp(php$classNamephp,php php$lastNsPosphp php+php php1php)php;
php php php php php php php php php php php php php$filephp php php php php php php=php strphp_replacephp(php'php\php\php'php,php DIRECTORYphp_SEPARATORphp,php php$namespacephp)php php.php DIRECTORYphp_SEPARATORphp;
php php php php php php php php php}
php php php php php php php php php$filephp php.php=php strphp_replacephp(php'php_php'php,php DIRECTORYphp_SEPARATORphp,php php$classNamephp)php php.php php'php.phpphp'php;

php php php php php php php php ifphp php(php!emptyphp(php$dirsphp)php)php php{
php php php php php php php php php php php php php/php/php usephp thephp autodiscoveredphp path
php php php php php php php php php php php php php$dirPathphp php=php dirnamephp(php$filephp)php;
php php php php php php php php php php php php ifphp php(isphp_stringphp(php$dirsphp)php)php php{
php php php php php php php php php php php php php php php php php$dirsphp php=php explodephp(PATHphp_SEPARATORphp,php php$dirsphp)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php foreachphp php(php$dirsphp asphp php$keyphp php=php>php php$dirphp)php php{
php php php php php php php php php php php php php php php php ifphp php(php$dirphp php=php=php php'php.php'php)php php{
php php php php php php php php php php php php php php php php php php php php php$dirsphp[php$keyphp]php php=php php$dirPathphp;
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php$dirphp php=php rtrimphp(php$dirphp,php php'php\php\php/php'php)php;
php php php php php php php php php php php php php php php php php php php php php$dirsphp[php$keyphp]php php=php php$dirphp php.php DIRECTORYphp_SEPARATORphp php.php php$dirPathphp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$filephp php=php basenamephp(php$filephp)php;
php php php php php php php php php php php php selfphp:php:loadFilephp(php$filephp,php php$dirsphp,php truephp)php;
php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php selfphp:php:loadFilephp(php$filephp,php nullphp,php truephp)php;
php php php php php php php php php}

php php php php php php php php ifphp php(php!classphp_existsphp(php$classphp,php falsephp)php php&php&php php!interfacephp_existsphp(php$classphp,php falsephp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Exceptionphp(php"Filephp php\php"php$filephp\php"php doesphp notphp existphp orphp classphp php\php"php$classphp\php"php wasphp notphp foundphp inphp thephp filephp"php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Loadsphp aphp PHPphp filephp.php php Thisphp isphp aphp wrapperphp forphp PHPphp'sphp includephp(php)php functionphp.
php php php php php php*
php php php php php php*php php$filenamephp mustphp bephp thephp completephp filenamephp,php includingphp any
php php php php php php*php extensionphp suchphp asphp php"php.phpphp"php.php php Notephp thatphp aphp securityphp checkphp isphp performedphp that
php php php php php php*php doesphp notphp permitphp extendedphp charactersphp inphp thephp filenamephp.php php Thisphp methodphp is
php php php php php php*php intendedphp forphp loadingphp Zendphp Frameworkphp filesphp.
php php php php php php*
php php php php php php*php Ifphp php$dirsphp isphp aphp stringphp orphp anphp arrayphp,php itphp willphp searchphp thephp directories
php php php php php php*php inphp thephp orderphp suppliedphp,php andphp attemptphp tophp loadphp thephp firstphp matchingphp filephp.
php php php php php php*
php php php php php php*php Ifphp thephp filephp wasphp notphp foundphp inphp thephp php$dirsphp,php orphp ifphp nophp php$dirsphp werephp specifiedphp,
php php php php php php*php itphp willphp attemptphp tophp loadphp itphp fromphp PHPphp'sphp includephp_pathphp.
php php php php php php*
php php php php php php*php Ifphp php$oncephp isphp TRUEphp,php itphp willphp usephp includephp_oncephp(php)php insteadphp ofphp includephp(php)php.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php php php php php php php php$filename
php php php php php php*php php@paramphp php stringphp|arrayphp php php$dirsphp php-php OPTIONALphp eitherphp aphp pathphp orphp arrayphp ofphp paths
php php php php php php*php php php php php php php php php php php php php php php php php php php php php php php tophp searchphp.
php php php php php php*php php@paramphp php booleanphp php php php php php php php$once
php php php php php php*php php@returnphp boolean
php php php php php php*php php@throwsphp Zendphp_Exception
php php php php php php*php/
php php php php publicphp staticphp functionphp loadFilephp(php$filenamephp,php php$dirsphp php=php nullphp,php php$oncephp php=php falsephp)
php php php php php{
php php php php php php php php selfphp:php:php_securityCheckphp(php$filenamephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php Searchphp inphp providedphp directoriesphp,php asphp wellphp asphp includephp_path
php php php php php php php php php php*php/
php php php php php php php php php$incPathphp php=php falsephp;
php php php php php php php php ifphp php(php!emptyphp(php$dirsphp)php php&php&php php(isphp_arrayphp(php$dirsphp)php php|php|php isphp_stringphp(php$dirsphp)php)php)php php{
php php php php php php php php php php php php ifphp php(isphp_arrayphp(php$dirsphp)php)php php{
php php php php php php php php php php php php php php php php php$dirsphp php=php implodephp(PATHphp_SEPARATORphp,php php$dirsphp)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$incPathphp php=php getphp_includephp_pathphp(php)php;
php php php php php php php php php php php php setphp_includephp_pathphp(php$dirsphp php.php PATHphp_SEPARATORphp php.php php$incPathphp)php;
php php php php php php php php php}

php php php php php php php php php/php*php*
php php php php php php php php php php*php Tryphp findingphp forphp thephp plainphp filenamephp inphp thephp includephp_pathphp.
php php php php php php php php php php*php/
php php php php php php php php ifphp php(php$oncephp)php php{
php php php php php php php php php php php php includephp_oncephp php$filenamephp;
php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php includephp php$filenamephp;
php php php php php php php php php}

php php php php php php php php php/php*php*
php php php php php php php php php php*php Ifphp searchingphp inphp directoriesphp,php resetphp includephp_path
php php php php php php php php php php*php/
php php php php php php php php ifphp php(php$incPathphp)php php{
php php php php php php php php php php php php setphp_includephp_pathphp(php$incPathphp)php;
php php php php php php php php php}

php php php php php php php php returnphp truephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnsphp TRUEphp ifphp thephp php$filenamephp isphp readablephp,php orphp FALSEphp otherwisephp.
php php php php php php*php Thisphp functionphp usesphp thephp PHPphp includephp_pathphp,php wherephp PHPphp'sphp isphp_readablephp(php)
php php php php php php*php doesphp notphp.
php php php php php php*
php php php php php php*php Notephp fromphp ZFphp-php2php9php0php0php:
php php php php php php*php Ifphp youphp usephp customphp errorphp handlerphp,php pleasephp checkphp whetherphp returnphp value
php php php php php php*php php fromphp errorphp_reportingphp(php)php isphp zerophp orphp notphp.
php php php php php php*php Atphp markphp ofphp fopenphp(php)php canphp notphp suppressphp warningphp ifphp thephp handlerphp isphp usedphp.
php php php php php php*
php php php php php php*php php@paramphp stringphp php php php$filename
php php php php php php*php php@returnphp boolean
php php php php php php*php/
php php php php publicphp staticphp functionphp isReadablephp(php$filenamephp)
php php php php php{
php php php php php php php php ifphp php(isphp_readablephp(php$filenamephp)php)php php{
php php php php php php php php php php php php php/php/php Returnphp earlyphp ifphp thephp filenamephp isphp readablephp withoutphp needingphp the
php php php php php php php php php php php php php/php/php includephp_path
php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php}

php php php php php php php php ifphp php(strtoupperphp(substrphp(PHPphp_OSphp,php php0php,php php3php)php)php php=php=php php'WINphp'
php php php php php php php php php php php php php&php&php pregphp_matchphp(php'php/php^php[aphp-zphp]php:php/iphp'php,php php$filenamephp)
php php php php php php php php php)php php{
php php php php php php php php php php php php php/php/php Ifphp onphp windowsphp,php andphp pathphp providedphp isphp clearlyphp anphp absolutephp pathphp,
php php php php php php php php php php php php php/php/php returnphp falsephp immediately
php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php}

php php php php php php php php foreachphp php(selfphp:php:explodeIncludePathphp(php)php asphp php$pathphp)php php{
php php php php php php php php php php php php ifphp php(php$pathphp php=php=php php'php.php'php)php php{
php php php php php php php php php php php php php php php php ifphp php(isphp_readablephp(php$filenamephp)php)php php{
php php php php php php php php php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php continuephp;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$filephp php=php php$pathphp php.php php'php/php'php php.php php$filenamephp;
php php php php php php php php php php php php ifphp php(isphp_readablephp(php$filephp)php)php php{
php php php php php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php php php php returnphp falsephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Explodephp anphp includephp pathphp intophp anphp array
php php php php php php*
php php php php php php*php Ifphp nophp pathphp providedphp,php usesphp currentphp includephp_pathphp.php Worksphp aroundphp issuesphp that
php php php php php php*php occurphp whenphp thephp pathphp includesphp streamphp schemasphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp|nullphp php$path
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp staticphp functionphp explodeIncludePathphp(php$pathphp php=php nullphp)
php php php php php{
php php php php php php php php ifphp php(nullphp php=php=php=php php$pathphp)php php{
php php php php php php php php php php php php php$pathphp php=php getphp_includephp_pathphp(php)php;
php php php php php php php php php}

php php php php php php php php ifphp php(PATHphp_SEPARATORphp php=php=php php'php:php'php)php php{
php php php php php php php php php php php php php/php/php Onphp php*nixphp systemsphp,php includephp_pathsphp whichphp includephp pathsphp withphp aphp stream
php php php php php php php php php php php php php/php/php schemaphp cannotphp bephp safelyphp explodephp'dphp,php sophp wephp havephp tophp bephp aphp bitphp more
php php php php php php php php php php php php php/php/php intelligentphp inphp thephp approachphp.
php php php php php php php php php php php php php$pathsphp php=php pregphp_splitphp(php'php#php:php(php?php!php/php/php)php#php'php,php php$pathphp)php;
php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php$pathsphp php=php explodephp(PATHphp_SEPARATORphp,php php$pathphp)php;
php php php php php php php php php}
php php php php php php php php returnphp php$pathsphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php splphp_autoloadphp(php)php suitablephp implementationphp forphp supportingphp classphp autoloadingphp.
php php php php php php*
php php php php php php*php Attachphp tophp splphp_autoloadphp(php)php usingphp thephp followingphp:
php php php php php php*php php<codephp>
php php php php php php*php splphp_autoloadphp_registerphp(arrayphp(php'Zendphp_Loaderphp'php,php php'autoloadphp'php)php)php;
php php php php php php*php <php/codephp>
php php php php php php*
php php php php php php*php php@deprecatedphp Sincephp php1php.php8php.php0
php php php php php php*php php@paramphp php stringphp php$class
php php php php php php*php php@returnphp stringphp|falsephp Classphp namephp onphp successphp;php falsephp onphp failure
php php php php php php*php/
php php php php publicphp staticphp functionphp autoloadphp(php$classphp)
php php php php php{
php php php php php php php php triggerphp_errorphp(php_php_CLASSphp_php_php php.php php'php:php:php'php php.php php_php_METHODphp_php_php php.php php'php isphp deprecatedphp asphp ofphp php1php.php8php.php0php andphp willphp bephp removedphp withphp php2php.php0php.php0php;php usephp Zendphp_Loaderphp_Autoloaderphp insteadphp'php,php Ephp_USERphp_NOTICEphp)php;
php php php php php php php php tryphp php{
php php php php php php php php php php php php php@selfphp:php:loadClassphp(php$classphp)php;
php php php php php php php php php php php php returnphp php$classphp;
php php php php php php php php php}php catchphp php(Exceptionphp php$ephp)php php{
php php php php php php php php php php php php returnphp falsephp;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Registerphp php{php@linkphp autoloadphp(php)php}php withphp splphp_autoloadphp(php)
php php php php php php*
php php php php php php*php php@deprecatedphp Sincephp php1php.php8php.php0
php php php php php php*php php@paramphp stringphp php$classphp php(optionalphp)
php php php php php php*php php@paramphp booleanphp php$enabledphp php(optionalphp)
php php php php php php*php php@returnphp void
php php php php php php*php php@throwsphp Zendphp_Exceptionphp ifphp splphp_autoloadphp(php)php isphp notphp found
php php php php php php*php orphp ifphp thephp specifiedphp classphp doesphp notphp havephp anphp autoloadphp(php)php methodphp.
php php php php php php*php/
php php php php publicphp staticphp functionphp registerAutoloadphp(php$classphp php=php php'Zendphp_Loaderphp'php,php php$enabledphp php=php truephp)
php php php php php{
php php php php php php php php triggerphp_errorphp(php_php_CLASSphp_php_php php.php php'php:php:php'php php.php php_php_METHODphp_php_php php.php php'php isphp deprecatedphp asphp ofphp php1php.php8php.php0php andphp willphp bephp removedphp withphp php2php.php0php.php0php;php usephp Zendphp_Loaderphp_Autoloaderphp insteadphp'php,php Ephp_USERphp_NOTICEphp)php;
php php php php php php php php requirephp_oncephp php'Zendphp/Loaderphp/Autoloaderphp.phpphp'php;
php php php php php php php php php$autoloaderphp php=php Zendphp_Loaderphp_Autoloaderphp:php:getInstancephp(php)php;
php php php php php php php php php$autoloaderphp-php>setFallbackAutoloaderphp(truephp)php;

php php php php php php php php ifphp php(php'Zendphp_Loaderphp'php php!php=php php$classphp)php php{
php php php php php php php php php php php php selfphp:php:loadClassphp(php$classphp)php;
php php php php php php php php php php php php php$methodsphp php=php getphp_classphp_methodsphp(php$classphp)php;
php php php php php php php php php php php php ifphp php(php!inphp_arrayphp(php'autoloadphp'php,php php(arrayphp)php php$methodsphp)php)php php{
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Exceptionphp(php"Thephp classphp php\php"php$classphp\php"php doesphp notphp havephp anphp autoloadphp(php)php methodphp"php)php;
php php php php php php php php php php php php php}

php php php php php php php php php php php php php$callbackphp php=php arrayphp(php$classphp,php php'autoloadphp'php)php;

php php php php php php php php php php php php ifphp php(php$enabledphp)php php{
php php php php php php php php php php php php php php php php php$autoloaderphp-php>pushAutoloaderphp(php$callbackphp)php;
php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php$autoloaderphp-php>removeAutoloaderphp(php$callbackphp)php;
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Ensurephp thatphp filenamephp doesphp notphp containphp exploits
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$filename
php php php php php php*php php@returnphp void
php php php php php php*php php@throwsphp Zendphp_Exception
php php php php php php*php/
php php php php protectedphp staticphp functionphp php_securityCheckphp(php$filenamephp)
php php php php php{
php php php php php php php php php/php*php*
php php php php php php php php php php*php Securityphp check
php php php php php php php php php php*php/
php php php php php php php php ifphp php(pregphp_matchphp(php'php/php[php^aphp-zphp0php-php9php\php\php/php\php\php\php\php_php.php:php-php]php/iphp'php,php php$filenamephp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Exceptionphp(php'Securityphp checkphp:php Illegalphp characterphp inphp filenamephp'php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Attemptphp tophp includephp(php)php thephp filephp.
php php php php php php*
php php php php php php*php includephp(php)php isphp notphp prefixedphp withphp thephp php@php operatorphp becausephp if
php php php php php php*php thephp filephp isphp loadedphp andphp containsphp aphp parsephp errorphp,php execution
php php php php php php*php willphp haltphp silentlyphp andphp thisphp isphp difficultphp tophp debugphp.
php php php php php php*
php php php php php php*php Alwaysphp setphp displayphp_errorsphp php=php Offphp onphp productionphp serversphp!
php php php php php php*
php php php php php php*php php@paramphp php stringphp php php$filespec
php php php php php php*php php@paramphp php booleanphp php$once
php php php php php php*php php@returnphp boolean
php php php php php php*php php@deprecatedphp Sincephp php1php.php5php.php0php;php usephp loadFilephp(php)php instead
php php php php php php*php/
php php php php protectedphp staticphp functionphp php_includeFilephp(php$filespecphp,php php$oncephp php=php falsephp)
php php php php php{
php php php php php php php php ifphp php(php$oncephp)php php{
php php php php php php php php php php php php returnphp includephp_oncephp php$filespecphp;
php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php returnphp includephp php$filespecphp php;
php php php php php php php php php}
php php php php php}
php}

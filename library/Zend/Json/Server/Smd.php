<php?php
php/php*php*
php php*php Zendphp Framework
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Json
php php*php php@subpackagephp Server
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php php$Idphp:php Smdphp.phpphp php2php0php0php9php6php php2php0php1php0php-php0php1php-php0php6php php0php2php:php0php5php:php0php9Zphp bkarwinphp php$
php php*php/

php/php*php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Json
php php*php php@subpackagephp Server
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/
classphp Zendphp_Jsonphp_Serverphp_Smd
php{
php php php php constphp ENVphp_JSONRPCphp_php1php php=php php'JSONphp-RPCphp-php1php.php0php'php;
php php php php constphp ENVphp_JSONRPCphp_php2php php=php php'JSONphp-RPCphp-php2php.php0php'php;
php php php php constphp SMDphp_VERSIONphp php php php=php php'php2php.php0php'php;

php php php php php/php*php*
php php php php php php*php Contentphp type
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_contentTypephp php=php php'applicationphp/jsonphp'php;

php php php php php/php*php*
php php php php php php*php Contentphp typephp regex
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_contentTypeRegexphp php=php php'php#php[aphp-zphp]php+php/php[aphp-zphp]php[aphp-zphp-php]php+php#iphp'php;

php php php php php/php*php*
php php php php php php*php Servicephp description
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_descriptionphp;

php php php php php/php*php*
php php php php php php*php Generatephp Dojophp-compatiblephp SMD
php php php php php php*php php@varphp bool
php php php php php php*php/
php php php php protectedphp php$php_dojoCompatiblephp php=php falsephp;

php php php php php/php*php*
php php php php php php*php Currentphp envelope
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_envelopephp php=php selfphp:php:ENVphp_JSONRPCphp_php1php;

php php php php php/php*php*
php php php php php php*php Allowedphp envelopephp types
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_envelopeTypesphp php=php arrayphp(
php php php php php php php php selfphp:php:ENVphp_JSONRPCphp_php1php,
php php php php php php php php selfphp:php:ENVphp_JSONRPCphp_php2php,
php php php php php)php;

php php php php php/php*php*
php php php php php php*php Servicephp id
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_idphp;

php php php php php/php*php*
php php php php php php*php Servicesphp offerred
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_servicesphp php=php arrayphp(php)php;

php php php php php/php*php*
php php php php php php*php Servicephp target
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_targetphp;

php php php php php/php*php*
php php php php php php*php Globalphp transport
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_transportphp php=php php'POSTphp'php;

php php php php php/php*php*
php php php php php php*php Allowedphp transportphp types
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_transportTypesphp php=php arrayphp(php'POSTphp'php)php;

php php php php php/php*php*
php php php php php php*php Setphp objectphp statephp viaphp options
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$options
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp setOptionsphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php php$methodsphp php=php getphp_classphp_methodsphp(php$thisphp)php;
php php php php php php php php foreachphp php(php$optionsphp asphp php$keyphp php=php>php php$valuephp)php php{
php php php php php php php php php php php php php$methodphp php=php php'setphp'php php.php ucfirstphp(php$keyphp)php;
php php php php php php php php php php php php ifphp php(inphp_arrayphp(php$methodphp,php php$methodsphp)php)php php{
php php php php php php php php php php php php php php php php php$thisphp-php>php$methodphp(php$valuephp)php;
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp transport
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$transport
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp setTransportphp(php$transportphp)
php php php php php{
php php php php php php php php ifphp php(php!inphp_arrayphp(php$transportphp,php php$thisphp-php>php_transportTypesphp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Jsonphp/Serverphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Jsonphp_Serverphp_Exceptionphp(sprintfphp(php'Invalidphp transportphp php"php%sphp"php specifiedphp'php,php php$transportphp)php)php;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_transportphp php=php php$transportphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp transport
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getTransportphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_transportphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp envelope
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$envelopeType
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp setEnvelopephp(php$envelopeTypephp)
php php php php php{
php php php php php php php php ifphp php(php!inphp_arrayphp(php$envelopeTypephp,php php$thisphp-php>php_envelopeTypesphp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Jsonphp/Serverphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Jsonphp_Serverphp_Exceptionphp(sprintfphp(php'Invalidphp envelopephp typephp php"php%sphp"php'php,php php$envelopeTypephp)php)php;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_envelopephp php=php php$envelopeTypephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp envelope
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getEnvelopephp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_envelopephp;
php php php php php}

php php php php php/php/php Contentphp-Typephp ofphp responsephp;php defaultphp tophp applicationphp/json
php php php php php/php*php*
php php php php php php*php Setphp contentphp type
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$type
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp setContentTypephp(php$typephp)
php php php php php{
php php php php php php php php ifphp php(php!pregphp_matchphp(php$thisphp-php>php_contentTypeRegexphp,php php$typephp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Jsonphp/Serverphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Jsonphp_Serverphp_Exceptionphp(sprintfphp(php'Invalidphp contentphp typephp php"php%sphp"php specifiedphp'php,php php$typephp)php)php;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_contentTypephp php=php php$typephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp contentphp type
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getContentTypephp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_contentTypephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp servicephp target
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$target
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp setTargetphp(php$targetphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_targetphp php=php php(stringphp)php php$targetphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Retrievephp servicephp target
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getTargetphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_targetphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp servicephp ID
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$Id
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp setIdphp(php$idphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_idphp php=php php(stringphp)php php$idphp;
php php php php php php php php returnphp php$thisphp-php>php_idphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp servicephp id
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getIdphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_idphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp servicephp description
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$description
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp setDescriptionphp(php$descriptionphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_descriptionphp php=php php(stringphp)php php$descriptionphp;
php php php php php php php php returnphp php$thisphp-php>php_descriptionphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp servicephp description
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getDescriptionphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_descriptionphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Indicatephp whetherphp orphp notphp tophp generatephp Dojophp-compatiblephp SMD
php php php php php php*
php php php php php php*php php@paramphp php boolphp php$flag
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp setDojoCompatiblephp(php$flagphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_dojoCompatiblephp php=php php(boolphp)php php$flagphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Isphp thisphp aphp Dojophp compatiblephp SMDphp?
php php php php php php*
php php php php php php*php php@returnphp bool
php php php php php php*php/
php php php php publicphp functionphp isDojoCompatiblephp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_dojoCompatiblephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Addphp Service
php php php php php php*
php php php php php php*php php@paramphp Zendphp_Jsonphp_Serverphp_Smdphp_Servicephp|arrayphp php$service
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php publicphp functionphp addServicephp(php$servicephp)
php php php php php{
php php php php php php php php requirephp_oncephp php'Zendphp/Jsonphp/Serverphp/Smdphp/Servicephp.phpphp'php;

php php php php php php php php ifphp php(php$servicephp instanceofphp Zendphp_Jsonphp_Serverphp_Smdphp_Servicephp)php php{
php php php php php php php php php php php php php$namephp php=php php$servicephp-php>getNamephp(php)php;
php php php php php php php php php}php elseifphp php(isphp_arrayphp(php$servicephp)php)php php{
php php php php php php php php php php php php php$servicephp php=php newphp Zendphp_Jsonphp_Serverphp_Smdphp_Servicephp(php$servicephp)php;
php php php php php php php php php php php php php$namephp php=php php$servicephp-php>getNamephp(php)php;
php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Jsonphp/Serverphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Jsonphp_Serverphp_Exceptionphp(php'Invalidphp servicephp passedphp tophp addServicephp(php)php'php)php;
php php php php php php php php php}

php php php php php php php php ifphp php(arrayphp_keyphp_existsphp(php$namephp,php php$thisphp-php>php_servicesphp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Jsonphp/Serverphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Jsonphp_Serverphp_Exceptionphp(php'Attemptphp tophp registerphp aphp servicephp alreadyphp registeredphp detectedphp'php)php;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_servicesphp[php$namephp]php php=php php$servicephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Addphp manyphp services
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$services
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp addServicesphp(arrayphp php$servicesphp)
php php php php php{
php php php php php php php php foreachphp php(php$servicesphp asphp php$servicephp)php php{
php php php php php php php php php php php php php$thisphp-php>addServicephp(php$servicephp)php;
php php php php php php php php php}
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Overwritephp existingphp servicesphp withphp newphp ones
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$services
php php php php php php*php php@returnphp Zendphp_Jsonphp_Serverphp_Smd
php php php php php php*php/
php php php php publicphp functionphp setServicesphp(arrayphp php$servicesphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_servicesphp php=php arrayphp(php)php;
php php php php php php php php returnphp php$thisphp-php>addServicesphp(php$servicesphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Getphp servicephp object
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$name
php php php php php php*php php@returnphp falsephp|Zendphp_Jsonphp_Serverphp_Smdphp_Service
php php php php php php*php/
php php php php publicphp functionphp getServicephp(php$namephp)
php php php php php{
php php php php php php php php ifphp php(arrayphp_keyphp_existsphp(php$namephp,php php$thisphp-php>php_servicesphp)php)php php{
php php php php php php php php php php php php returnphp php$thisphp-php>php_servicesphp[php$namephp]php;
php php php php php php php php php}
php php php php php php php php returnphp falsephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp services
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp getServicesphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_servicesphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Removephp service
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$name
php php php php php php*php php@returnphp boolean
php php php php php php*php/
php php php php publicphp functionphp removeServicephp(php$namephp)
php php php php php{
php php php php php php php php ifphp php(arrayphp_keyphp_existsphp(php$namephp,php php$thisphp-php>php_servicesphp)php)php php{
php php php php php php php php php php php php unsetphp(php$thisphp-php>php_servicesphp[php$namephp]php)php;
php php php php php php php php php php php php returnphp truephp;
php php php php php php php php php}
php php php php php php php php returnphp falsephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Castphp tophp array
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp toArrayphp(php)
php php php php php{
php php php php php php php php ifphp php(php$thisphp-php>isDojoCompatiblephp(php)php)php php{
php php php php php php php php php php php php returnphp php$thisphp-php>toDojoArrayphp(php)php;
php php php php php php php php php}

php php php php php php php php php$transportphp php php php=php php$thisphp-php>getTransportphp(php)php;
php php php php php php php php php$envelopephp php php php php=php php$thisphp-php>getEnvelopephp(php)php;
php php php php php php php php php$contentTypephp php=php php$thisphp-php>getContentTypephp(php)php;
php php php php php php php php php$SMDVersionphp php php=php selfphp:php:SMDphp_VERSIONphp;
php php php php php php php php php$servicephp php=php compactphp(php'transportphp'php,php php'envelopephp'php,php php'contentTypephp'php,php php'SMDVersionphp'php)php;

php php php php php php php php ifphp php(nullphp php!php=php=php php(php$targetphp php=php php$thisphp-php>getTargetphp(php)php)php)php php{
php php php php php php php php php php php php php$servicephp[php'targetphp'php]php php php php php php=php php$targetphp;
php php php php php php php php php}
php php php php php php php php ifphp php(nullphp php!php=php=php php(php$idphp php=php php$thisphp-php>getIdphp(php)php)php)php php{
php php php php php php php php php php php php php$servicephp[php'idphp'php]php php=php php$idphp;
php php php php php php php php php}

php php php php php php php php php$servicesphp php=php php$thisphp-php>getServicesphp(php)php;
php php php php php php php php ifphp php(php!emptyphp(php$servicesphp)php)php php{
php php php php php php php php php php php php php$servicephp[php'servicesphp'php]php php=php arrayphp(php)php;
php php php php php php php php php php php php foreachphp php(php$servicesphp asphp php$namephp php=php>php php$svcphp)php php{
php php php php php php php php php php php php php php php php php$svcphp-php>setEnvelopephp(php$envelopephp)php;
php php php php php php php php php php php php php php php php php$servicephp[php'servicesphp'php]php[php$namephp]php php=php php$svcphp-php>toArrayphp(php)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$servicephp[php'methodsphp'php]php php=php php$servicephp[php'servicesphp'php]php;
php php php php php php php php php}

php php php php php php php php returnphp php$servicephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Exportphp tophp DOJOphp-compatiblephp SMDphp array
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp toDojoArrayphp(php)
php php php php php{
php php php php php php php php php$SMDVersionphp php php=php php'php.php1php'php;
php php php php php php php php php$serviceTypephp php=php php'JSONphp-RPCphp'php;
php php php php php php php php php$servicephp php=php compactphp(php'SMDVersionphp'php,php php'serviceTypephp'php)php;

php php php php php php php php php$targetphp php=php php$thisphp-php>getTargetphp(php)php;

php php php php php php php php php$servicesphp php=php php$thisphp-php>getServicesphp(php)php;
php php php php php php php php ifphp php(php!emptyphp(php$servicesphp)php)php php{
php php php php php php php php php php php php php$servicephp[php'methodsphp'php]php php=php arrayphp(php)php;
php php php php php php php php php php php php foreachphp php(php$servicesphp asphp php$namephp php=php>php php$svcphp)php php{
php php php php php php php php php php php php php php php php php$methodphp php=php arrayphp(
php php php php php php php php php php php php php php php php php php php php php'namephp'php php php php php php php php=php>php php$namephp,
php php php php php php php php php php php php php php php php php php php php php'serviceURLphp'php php=php>php php$targetphp,
php php php php php php php php php php php php php php php php php)php;
php php php php php php php php php php php php php php php php php$paramsphp php=php arrayphp(php)php;
php php php php php php php php php php php php php php php php foreachphp php(php$svcphp-php>getParamsphp(php)php asphp php$paramphp)php php{
php php php php php php php php php php php php php php php php php php php php php$paramNamephp php=php arrayphp_keyphp_existsphp(php'namephp'php,php php$paramphp)php php?php php$paramphp[php'namephp'php]php php:php php$paramphp[php'typephp'php]php;
php php php php php php php php php php php php php php php php php php php php php$paramsphp[php]php php=php arrayphp(
php php php php php php php php php php php php php php php php php php php php php php php php php'namephp'php php=php>php php$paramNamephp,
php php php php php php php php php php php php php php php php php php php php php php php php php'typephp'php php=php>php php$paramphp[php'typephp'php]php,
php php php php php php php php php php php php php php php php php php php php php)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php ifphp php(php!emptyphp(php$paramsphp)php)php php{
php php php php php php php php php php php php php php php php php php php php php$methodphp[php'parametersphp'php]php php=php php$paramsphp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php$servicephp[php'methodsphp'php]php[php]php php=php php$methodphp;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php returnphp php$servicephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Castphp tophp JSON
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp toJsonphp(php)
php php php php php{
php php php php php php php php requirephp_oncephp php'Zendphp/Jsonphp.phpphp'php;
php php php php php php php php returnphp Zendphp_Jsonphp:php:encodephp(php$thisphp-php>toArrayphp(php)php)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Castphp tophp stringphp php(JSONphp)
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp php_php_toStringphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>toJsonphp(php)php;
php php php php php}
php}


<php?php
php/php*php*
php php*php Zendphp_Consolephp_Getoptphp isphp aphp classphp tophp parsephp optionsphp forphp commandphp-line
php php*php applicationsphp.
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Consolephp_Getopt
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php php$Idphp:php Getoptphp.phpphp php2php2php1php9php1php php2php0php1php0php-php0php5php-php1php7php php2php1php:php5php0php:php1php4Zphp janphp php$
php php*php/

php/php*php*
php php*php Zendphp_Consolephp_Getoptphp isphp aphp classphp tophp parsephp optionsphp forphp commandphp-line
php php*php applicationsphp.
php php*
php php*php Terminologyphp:
php php*php Argumentphp:php anphp elementphp ofphp thephp argvphp arrayphp.php php Thisphp mayphp bephp partphp ofphp anphp optionphp,
php php*php php php orphp itphp mayphp bephp aphp nonphp-optionphp commandphp-linephp argumentphp.
php php*php Flagphp:php thephp letterphp orphp wordphp setphp offphp byphp aphp php'php-php'php orphp php'php-php-php'php.php php Examplephp:php inphp php'php-php-outputphp filenamephp'php,
php php*php php php php'php-php-outputphp'php isphp thephp flagphp.
php php*php Parameterphp:php thephp additionalphp argumentphp thatphp isphp associatedphp withphp thephp optionphp.
php php*php php php Examplephp:php inphp php'php-php-outputphp filenamephp'php,php thephp php'filenamephp'php isphp thephp parameterphp.
php php*php Optionphp:php thephp combinationphp ofphp aphp flagphp andphp itsphp parameterphp,php ifphp anyphp.
php php*php php php Examplephp:php inphp php'php-php-outputphp filenamephp'php,php thephp wholephp thingphp isphp thephp optionphp.
php php*
php php*php Thephp followingphp featuresphp arephp supportedphp:
php php*
php php*php php-php Shortphp flagsphp likephp php'php-aphp'php.php php Shortphp flagsphp arephp precededphp byphp aphp single
php php*php php php dashphp.php php Shortphp flagsphp mayphp bephp clusteredphp ephp.gphp.php php'php-abcphp'php,php whichphp isphp the
php php*php php php samephp asphp php'php-aphp'php php'php-bphp'php php'php-cphp'php.
php php*php php-php Longphp flagsphp likephp php'php-php-verbosephp'php.php php Longphp flagsphp arephp precededphp byphp a
php php*php php php doublephp dashphp.php php Longphp flagsphp mayphp notphp bephp clusteredphp.
php php*php php-php Optionsphp mayphp havephp aphp parameterphp,php ephp.gphp.php php'php-php-outputphp filenamephp'php.
php php*php php-php Parametersphp forphp longphp flagsphp mayphp alsophp bephp setphp offphp withphp anphp equalsphp signphp,
php php*php php php ephp.gphp.php php'php-php-outputphp=filenamephp'php.
php php*php php-php Parametersphp forphp longphp flagsphp mayphp bephp checkedphp asphp stringphp,php wordphp,php orphp integerphp.
php php*php php-php Automaticphp generationphp ofphp aphp helpfulphp usagephp messagephp.
php php*php php-php Signalphp endphp ofphp optionsphp withphp php'php-php-php'php;php subsequentphp argumentsphp arephp treated
php php*php php php asphp nonphp-optionphp argumentsphp,php evenphp ifphp theyphp beginphp withphp php'php-php'php.
php php*php php-php Raisephp exceptionphp Zendphp_Consolephp_Getoptphp_Exceptionphp inphp severalphp cases
php php*php php php whenphp invalidphp flagsphp orphp parametersphp arephp givenphp.php php Usagephp messagephp is
php php*php php php returnedphp inphp thephp exceptionphp objectphp.
php php*
php php*php Thephp formatphp forphp specifyingphp optionsphp usesphp aphp PHPphp associativephp arrayphp.
php php*php Thephp keyphp isphp hasphp thephp formatphp ofphp aphp listphp ofphp pipephp-separatedphp flagphp namesphp,
php php*php followedphp byphp anphp optionalphp php'php=php'php tophp indicatephp aphp requiredphp parameterphp or
php php*php php'php-php'php tophp indicatephp anphp optionalphp parameterphp.php php Followingphp thatphp,php thephp type
php php*php ofphp parameterphp mayphp bephp specifiedphp asphp php'sphp'php forphp stringphp,php php'wphp'php forphp wordphp,
php php*php orphp php'iphp'php forphp integerphp.
php php*
php php*php Examplesphp:
php php*php php-php php'userphp|usernamephp|uphp=sphp'php php thisphp meansphp php'php-php-userphp'php orphp php'php-php-usernamephp'php orphp php'php-uphp'
php php*php php php arephp synonymsphp,php andphp thephp optionphp requiresphp aphp stringphp parameterphp.
php php*php php-php php'pphp=iphp'php php thisphp meansphp php'php-pphp'php requiresphp anphp integerphp parameterphp.php php Nophp synonymsphp.
php php*php php-php php'verbosephp|vphp-iphp'php php thisphp meansphp php'php-php-verbosephp'php orphp php'php-vphp'php arephp synonymsphp,php and
php php*php php php theyphp takephp anphp optionalphp integerphp parameterphp.
php php*php php-php php'helpphp|hphp'php php thisphp meansphp php'php-php-helpphp'php orphp php'php-hphp'php arephp synonymsphp,php and
php php*php php php theyphp takephp nophp parameterphp.
php php*
php php*php Thephp valuesphp inphp thephp associativephp arrayphp arephp stringsphp thatphp arephp usedphp as
php php*php briefphp descriptionsphp ofphp thephp optionsphp whenphp printingphp aphp usagephp messagephp.
php php*
php php*php Thephp simplerphp formatphp forphp specifyingphp optionsphp usedphp byphp PHPphp'sphp getoptphp(php)
php php*php functionphp isphp alsophp supportedphp.php php Thisphp isphp similarphp tophp GNUphp getoptphp andphp shell
php php*php getoptphp formatphp.
php php*
php php*php Examplephp:php php php'abcphp:php'php meansphp optionsphp php'php-aphp'php,php php'php-bphp'php,php andphp php'php-cphp'
php php*php arephp legalphp,php andphp thephp latterphp requiresphp aphp stringphp parameterphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Consolephp_Getopt
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php Releasephp:php php@packagephp_versionphp@
php php*php php@sincephp php php php php php Classphp availablephp sincephp Releasephp php0php.php6php.php0
php php*
php php*php php@todophp php Handlephp paramsphp withphp multiplephp valuesphp,php ephp.gphp.php php-php-colorsphp=redphp,greenphp,blue
php php*php php php php php php php php Setphp valuephp ofphp parameterphp tophp thephp arrayphp ofphp valuesphp.php php Allowphp userphp tophp specify
php php*php php php php php php php php thephp separatorphp withphp Zendphp_Consolephp_Getoptphp:php:CONFIGphp_PARAMETERphp_SEPARATORphp.
php php*php php php php php php php php Ifphp thisphp configphp valuephp isphp nullphp orphp emptyphp stringphp,php dophp notphp splitphp values
php php*php php php php php php php php intophp arraysphp.php php Defaultphp separatorphp isphp commaphp php(php'php,php'php)php.
php php*
php php*php php@todophp php Handlephp paramsphp withphp multiplephp valuesphp specifiedphp withphp separatephp options
php php*php php php php php php php php ephp.gphp.php php-php-colorsphp redphp php-php-colorsphp greenphp php-php-colorsphp bluephp shouldphp givephp one
php php*php php php php php php php php optionphp withphp anphp arrayphp(redphp,php greenphp,php bluephp)php.
php php*php php php php php php php php Enablephp withphp Zendphp_Consolephp_Getoptphp:php:CONFIGphp_CUMULATIVEphp_PARAMETERSphp.
php php*php php php php php php php php Defaultphp isphp thatphp subsequentphp optionsphp overwritephp thephp parameterphp valuephp.
php php*
php php*php php@todophp php Handlephp flagsphp occurringphp multiplephp timesphp,php ephp.gphp.php php-vphp php-vphp php-v
php php*php php php php php php php php Setphp valuephp ofphp thephp optionphp'sphp parameterphp tophp thephp integerphp countphp ofphp instances
php php*php php php php php php php php insteadphp ofphp aphp booleanphp.
php php*php php php php php php php php Enablephp withphp Zendphp_Consolephp_Getoptphp:php:CONFIGphp_CUMULATIVEphp_FLAGSphp.
php php*php php php php php php php php Defaultphp isphp thatphp thephp valuephp isphp simplyphp booleanphp truephp regardlessphp of
php php*php php php php php php php php howphp manyphp instancesphp ofphp thephp flagphp appearphp.
php php*
php php*php php@todophp php Handlephp flagsphp thatphp implicitlyphp printphp usagephp messagephp,php ephp.gphp.php php-php-help
php php*
php php*php php@todophp php Handlephp freeformphp optionsphp,php ephp.gphp.php php-php-setphp-variable
php php*php php php php php php php php Enablephp withphp Zendphp_Consolephp_Getoptphp:php:CONFIGphp_FREEFORMphp_FLAGS
php php*php php php php php php php php Allphp flagphp-likephp syntaxphp isphp recognizedphp,php nophp flagphp generatesphp anphp exceptionphp.
php php*
php php*php php@todophp php Handlephp numericphp optionsphp,php ephp.gphp.php php-php1php,php php-php2php,php php-php3php,php php-php1php0php0php0
php php*php php php php php php php php Enablephp withphp Zendphp_Consolephp_Getoptphp:php:CONFIGphp_NUMERICphp_FLAGS
php php*php php php php php php php php Thephp rulephp mustphp specifyphp aphp namedphp flagphp andphp thephp php'php#php'php symbolphp asphp the
php php*php php php php php php php php parameterphp typephp.php ephp.gphp.php,php php php'linesphp=php#php'
php php*
php php*php php@todophp php Enablephp userphp tophp specifyphp headerphp andphp footerphp contentphp inphp thephp helpphp messagephp.
php php*
php php*php php@todophp php Featurephp requestphp tophp handlephp optionphp interdependenciesphp.
php php*php php php php php php php php ephp.gphp.php ifphp php-bphp isphp specifiedphp,php php-aphp mustphp bephp specifiedphp orphp elsephp the
php php*php php php php php php php php usagephp isphp invalidphp.
php php*
php php*php php@todophp php Featurephp requestphp tophp implementphp callbacksphp.
php php*php php php php php php php php ephp.gphp.php ifphp php-aphp isphp specifiedphp,php runphp functionphp php'handleOptionAphp'php(php)php.
php php*php/
classphp Zendphp_Consolephp_Getopt
php{

php php php php php/php*php*
php php php php php php*php Thephp optionsphp forphp aphp givenphp applicationphp canphp bephp inphp multiplephp formatsphp.
php php php php php php*php modeGnuphp isphp forphp traditionalphp php'abphp:cphp:php'php stylephp getoptphp formatphp.
php php php php php php*php modeZendphp isphp forphp aphp morephp structuredphp formatphp.
php php php php php php*php/
php php php php constphp MODEphp_ZENDphp php php php php php php php php php php php php php php php php php php php php php php php php php=php php'zendphp'php;
php php php php constphp MODEphp_GNUphp php php php php php php php php php php php php php php php php php php php php php php php php php php=php php'gnuphp'php;

php php php php php/php*php*
php php php php php php*php Constantphp tokensphp forphp variousphp symbolsphp usedphp inphp thephp modephp_zend
php php php php php php*php rulephp formatphp.
php php php php php php*php/
php php php php constphp PARAMphp_REQUIREDphp php php php php php php php php php php php php php php php php php php php php=php php'php=php'php;
php php php php constphp PARAMphp_OPTIONALphp php php php php php php php php php php php php php php php php php php php php=php php'php-php'php;
php php php php constphp TYPEphp_STRINGphp php php php php php php php php php php php php php php php php php php php php php php php=php php'sphp'php;
php php php php constphp TYPEphp_WORDphp php php php php php php php php php php php php php php php php php php php php php php php php php=php php'wphp'php;
php php php php constphp TYPEphp_INTEGERphp php php php php php php php php php php php php php php php php php php php php php php=php php'iphp'php;

php php php php php/php*php*
php php php php php php*php Thesephp arephp constantsphp forphp optionalphp behaviorphp ofphp thisphp classphp.
php php php php php php*php ruleModephp isphp eitherphp php'zendphp'php orphp php'gnuphp'php orphp aphp userphp-definedphp modephp.
php php php php php php*php dashDashphp isphp truephp ifphp php'php-php-php'php signifiesphp thephp endphp ofphp commandphp-linephp optionsphp.
php php php php php php*php ignoreCasephp isphp truephp ifphp php'php-php-optphp'php andphp php'php-php-OPTphp'php arephp implicitlyphp synonymsphp.
php php php php php php*php parseAllphp isphp truephp ifphp allphp optionsphp onphp thephp commandphp linephp shouldphp bephp parsedphp,php regardlessphp of
php php php php php php*php whetherphp anphp argumentphp appearsphp beforephp themphp.
php php php php php php*php/
php php php php constphp CONFIGphp_RULEMODEphp php php php php php php php php php php php php php php php php php php php=php php'ruleModephp'php;
php php php php constphp CONFIGphp_DASHDASHphp php php php php php php php php php php php php php php php php php php php=php php'dashDashphp'php;
php php php php constphp CONFIGphp_IGNORECASEphp php php php php php php php php php php php php php php php php php=php php'ignoreCasephp'php;
php php php php constphp CONFIGphp_PARSEALLphp php php php php php php php php php php php php php php php php php php php=php php'parseAllphp'php;

php php php php php/php*php*
php php php php php php*php Defaultsphp forphp getoptphp configurationphp arephp:
php php php php php php*php ruleModephp isphp php'zendphp'php formatphp,
php php php php php php*php dashDashphp php(php-php-php)php tokenphp isphp enabledphp,
php php php php php php*php ignoreCasephp isphp notphp enabledphp,
php php php php php php*php parseAllphp isphp enabledphp.
php php php php php php*php/
php php php php protectedphp php$php_getoptConfigphp php=php arrayphp(
php php php php php php php php selfphp:php:CONFIGphp_RULEMODEphp php php php=php>php selfphp:php:MODEphp_ZENDphp,
php php php php php php php php selfphp:php:CONFIGphp_DASHDASHphp php php php=php>php truephp,
php php php php php php php php selfphp:php:CONFIGphp_IGNORECASEphp php=php>php falsephp,
php php php php php php php php selfphp:php:CONFIGphp_PARSEALLphp php php php=php>php truephp,
php php php php php)php;

php php php php php/php*php*
php php php php php php*php Storesphp thephp commandphp-linephp argumentsphp forphp thephp callingphp applicaionphp.
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_argvphp php=php arrayphp(php)php;

php php php php php/php*php*
php php php php php php*php Storesphp thephp namephp ofphp thephp callingphp applicaionphp.
php php php php php php*
php php php php php php*php php@varphp string
php php php php php php*php/
php php php php protectedphp php$php_prognamephp php=php php'php'php;

php php php php php/php*php*
php php php php php php*php Storesphp thephp listphp ofphp legalphp optionsphp forphp thisphp applicationphp.
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_rulesphp php=php arrayphp(php)php;

php php php php php/php*php*
php php php php php php*php Storesphp alternatephp spellingsphp ofphp legalphp optionsphp.
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_ruleMapphp php=php arrayphp(php)php;

php php php php php/php*php*
php php php php php php*php Storesphp optionsphp givenphp byphp thephp userphp inphp thephp currentphp invocation
php php php php php php*php ofphp thephp applicationphp,php asphp wellphp asphp parametersphp givenphp inphp optionsphp.
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_optionsphp php=php arrayphp(php)php;

php php php php php/php*php*
php php php php php php*php Storesphp thephp commandphp-linephp argumentsphp otherphp thanphp optionsphp.
php php php php php php*
php php php php php php*php php@varphp array
php php php php php php*php/
php php php php protectedphp php$php_remainingArgsphp php=php arrayphp(php)php;

php php php php php/php*php*
php php php php php php*php Statephp ofphp thephp optionsphp:php parsedphp orphp notphp yetphp parsedphp?
php php php php php php*
php php php php php php*php php@varphp boolean
php php php php php php*php/
php php php php protectedphp php$php_parsedphp php=php falsephp;

php php php php php/php*php*
php php php php php php*php Thephp constructorphp takesphp onephp tophp threephp parametersphp.
php php php php php php*
php php php php php php*php Thephp firstphp parameterphp isphp php$rulesphp,php whichphp mayphp bephp aphp stringphp for
php php php php php php*php gnuphp-stylephp formatphp,php orphp aphp structuredphp arrayphp forphp Zendphp-stylephp formatphp.
php php php php php php*
php php php php php php*php Thephp secondphp parameterphp isphp php$argvphp,php andphp itphp isphp optionalphp.php php Ifphp not
php php php php php php*php specifiedphp,php php$argvphp isphp inferredphp fromphp thephp globalphp argvphp.
php php php php php php*
php php php php php php*php Thephp thirdphp parameterphp isphp anphp arrayphp ofphp configurationphp parameters
php php php php php php*php tophp controlphp thephp behaviorphp ofphp thisphp instancephp ofphp Getoptphp;php itphp isphp optionalphp.
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$rules
php php php php php php*php php@paramphp php arrayphp php$argv
php php php php php php*php php@paramphp php arrayphp php$getoptConfig
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php publicphp functionphp php_php_constructphp(php$rulesphp,php php$argvphp php=php nullphp,php php$getoptConfigphp php=php arrayphp(php)php)
php php php php php{
php php php php php php php php ifphp php(php!issetphp(php$php_SERVERphp[php'argvphp'php]php)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php ifphp php(iniphp_getphp(php'registerphp_argcphp_argvphp'php)php php=php=php falsephp)php php{
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php"argvphp isphp notphp availablephp,php becausephp iniphp optionphp php'registerphp_argcphp_argvphp'php isphp setphp Offphp"
php php php php php php php php php php php php php php php php php)php;
php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php'php$php_SERVERphp[php"argvphp"php]php isphp notphp setphp,php butphp Zendphp_Consolephp_Getoptphp cannotphp workphp withoutphp thisphp informationphp.php'
php php php php php php php php php php php php php php php php php)php;
php php php php php php php php php php php php php}
php php php php php php php php php}

php php php php php php php php php$thisphp-php>php_prognamephp php=php php$php_SERVERphp[php'argvphp'php]php[php0php]php;
php php php php php php php php php$thisphp-php>setOptionsphp(php$getoptConfigphp)php;
php php php php php php php php php$thisphp-php>addRulesphp(php$rulesphp)php;
php php php php php php php php ifphp php(php!isphp_arrayphp(php$argvphp)php)php php{
php php php php php php php php php php php php php$argvphp php=php arrayphp_slicephp(php$php_SERVERphp[php'argvphp'php]php,php php1php)php;
php php php php php php php php php}
php php php php php php php php ifphp php(issetphp(php$argvphp)php)php php{
php php php php php php php php php php php php php$thisphp-php>addArgumentsphp(php(arrayphp)php$argvphp)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp thephp statephp ofphp thephp optionphp seenphp onphp thephp commandphp linephp ofphp the
php php php php php php*php currentphp applicationphp invocationphp.php php Thisphp functionphp returnsphp truephp,php orphp the
php php php php php php*php parameterphp tophp thephp optionphp,php ifphp anyphp.php php Ifphp thephp optionphp wasphp notphp givenphp,
php php php php php php*php thisphp functionphp returnsphp nullphp.
php php php php php php*
php php php php php php*php Thephp magicphp php_php_getphp methodphp worksphp inphp thephp contextphp ofphp namingphp thephp option
php php php php php php*php asphp aphp virtualphp memberphp ofphp thisphp classphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$key
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp php_php_getphp(php$keyphp)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>getOptionphp(php$keyphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Testphp whetherphp aphp givenphp optionphp hasphp beenphp seenphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$key
php php php php php php*php php@returnphp boolean
php php php php php php*php/
php php php php publicphp functionphp php_php_issetphp(php$keyphp)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_ruleMapphp[php$keyphp]php)php)php php{
php php php php php php php php php php php php php$keyphp php=php php$thisphp-php>php_ruleMapphp[php$keyphp]php;
php php php php php php php php php php php php returnphp issetphp(php$thisphp-php>php_optionsphp[php$keyphp]php)php;
php php php php php php php php php}
php php php php php php php php returnphp falsephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setphp thephp valuephp forphp aphp givenphp optionphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$key
php php php php php php*php php@paramphp php stringphp php$value
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php publicphp functionphp php_php_setphp(php$keyphp,php php$valuephp)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_ruleMapphp[php$keyphp]php)php)php php{
php php php php php php php php php php php php php$keyphp php=php php$thisphp-php>php_ruleMapphp[php$keyphp]php;
php php php php php php php php php php php php php$thisphp-php>php_optionsphp[php$keyphp]php php=php php$valuephp;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp thephp currentphp setphp ofphp optionsphp andphp parametersphp seenphp asphp aphp stringphp.
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp php_php_toStringphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>toStringphp(php)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Unsetphp anphp optionphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$key
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php publicphp functionphp php_php_unsetphp(php$keyphp)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_ruleMapphp[php$keyphp]php)php)php php{
php php php php php php php php php php php php php$keyphp php=php php$thisphp-php>php_ruleMapphp[php$keyphp]php;
php php php php php php php php php php php php unsetphp(php$thisphp-php>php_optionsphp[php$keyphp]php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Definephp additionalphp commandphp-linephp argumentsphp.
php php php php php php*php Thesephp arephp appendedphp tophp thosephp definedphp whenphp thephp constructorphp wasphp calledphp.
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$argv
php php php php php php*php php@throwsphp Zendphp_Consolephp_Getoptphp_Exceptionphp Whenphp notphp givenphp anphp arrayphp asphp parameter
php php php php php php*php php@returnphp Zendphp_Consolephp_Getoptphp Providesphp aphp fluentphp interface
php php php php php php*php/
php php php php publicphp functionphp addArgumentsphp(php$argvphp)
php php php php php{
php php php php php php php php ifphp(php!isphp_arrayphp(php$argvphp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php"Parameterphp php#php1php tophp addArgumentsphp shouldphp bephp anphp arrayphp"php)php;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_argvphp php=php arrayphp_mergephp(php$thisphp-php>php_argvphp,php php$argvphp)php;
php php php php php php php php php$thisphp-php>php_parsedphp php=php falsephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Definephp fullphp setphp ofphp commandphp-linephp argumentsphp.
php php php php php php*php Thesephp replacephp anyphp currentlyphp definedphp.
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$argv
php php php php php php*php php@throwsphp Zendphp_Consolephp_Getoptphp_Exceptionphp Whenphp notphp givenphp anphp arrayphp asphp parameter
php php php php php php*php php@returnphp Zendphp_Consolephp_Getoptphp Providesphp aphp fluentphp interface
php php php php php php*php/
php php php php publicphp functionphp setArgumentsphp(php$argvphp)
php php php php php{
php php php php php php php php ifphp(php!isphp_arrayphp(php$argvphp)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php"Parameterphp php#php1php tophp setArgumentsphp shouldphp bephp anphp arrayphp"php)php;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_argvphp php=php php$argvphp;
php php php php php php php php php$thisphp-php>php_parsedphp php=php falsephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Definephp multiplephp configurationphp optionsphp fromphp anphp associativephp arrayphp.
php php php php php php*php Thesephp arephp notphp programphp optionsphp,php butphp propertiesphp tophp configure
php php php php php php*php thephp behaviorphp ofphp Zendphp_Consolephp_Getoptphp.
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$getoptConfig
php php php php php php*php php@returnphp Zendphp_Consolephp_Getoptphp Providesphp aphp fluentphp interface
php php php php php php*php/
php php php php publicphp functionphp setOptionsphp(php$getoptConfigphp)
php php php php php{
php php php php php php php php ifphp php(issetphp(php$getoptConfigphp)php)php php{
php php php php php php php php php php php php foreachphp php(php$getoptConfigphp asphp php$keyphp php=php>php php$valuephp)php php{
php php php php php php php php php php php php php php php php php$thisphp-php>setOptionphp(php$keyphp,php php$valuephp)php;
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Definephp onephp configurationphp optionphp asphp aphp keyphp/valuephp pairphp.
php php php php php php*php Thesephp arephp notphp programphp optionsphp,php butphp propertiesphp tophp configure
php php php php php php*php thephp behaviorphp ofphp Zendphp_Consolephp_Getoptphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$configKey
php php php php php php*php php@paramphp php stringphp php$configValue
php php php php php php*php php@returnphp Zendphp_Consolephp_Getoptphp Providesphp aphp fluentphp interface
php php php php php php*php/
php php php php publicphp functionphp setOptionphp(php$configKeyphp,php php$configValuephp)
php php php php php{
php php php php php php php php ifphp php(php$configKeyphp php!php=php=php nullphp)php php{
php php php php php php php php php php php php php$thisphp-php>php_getoptConfigphp[php$configKeyphp]php php=php php$configValuephp;
php php php php php php php php php}
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Definephp additionalphp optionphp rulesphp.
php php php php php php*php Thesephp arephp appendedphp tophp thephp rulesphp definedphp whenphp thephp constructorphp wasphp calledphp.
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$rules
php php php php php php*php php@returnphp Zendphp_Consolephp_Getoptphp Providesphp aphp fluentphp interface
php php php php php php*php/
php php php php publicphp functionphp addRulesphp(php$rulesphp)
php php php php php{
php php php php php php php php php$ruleModephp php=php php$thisphp-php>php_getoptConfigphp[php'ruleModephp'php]php;
php php php php php php php php switchphp php(php$thisphp-php>php_getoptConfigphp[php'ruleModephp'php]php)php php{
php php php php php php php php php php php php casephp selfphp:php:MODEphp_ZENDphp:
php php php php php php php php php php php php php php php php ifphp php(isphp_arrayphp(php$rulesphp)php)php php{
php php php php php php php php php php php php php php php php php php php php php$thisphp-php>php_addRulesModeZendphp(php$rulesphp)php;
php php php php php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php/php/php intentionalphp fallthrough
php php php php php php php php php php php php casephp selfphp:php:MODEphp_GNUphp:
php php php php php php php php php php php php php php php php php$thisphp-php>php_addRulesModeGnuphp(php$rulesphp)php;
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php defaultphp:
php php php php php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php php php php php*php Callphp addRulesModeFoophp(php)php forphp ruleModephp php'foophp'php.
php php php php php php php php php php php php php php php php php php*php Thephp developerphp shouldphp subclassphp Getoptphp and
php php php php php php php php php php php php php php php php php php*php providephp thisphp methodphp.
php php php php php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php php php php php php$methodphp php=php php'php_addRulesModephp'php php.php ucfirstphp(php$ruleModephp)php;
php php php php php php php php php php php php php php php php php$thisphp-php>php$methodphp(php$rulesphp)php;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_parsedphp php=php falsephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp thephp currentphp setphp ofphp optionsphp andphp parametersphp seenphp asphp aphp stringphp.
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp toStringphp(php)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php php$sphp php=php arrayphp(php)php;
php php php php php php php php foreachphp php(php$thisphp-php>php_optionsphp asphp php$flagphp php=php>php php$valuephp)php php{
php php php php php php php php php php php php php$sphp[php]php php=php php$flagphp php.php php'php=php'php php.php php(php$valuephp php=php=php=php truephp php?php php'truephp'php php:php php$valuephp)php;
php php php php php php php php php}
php php php php php php php php returnphp implodephp(php'php php'php,php php$sphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp thephp currentphp setphp ofphp optionsphp andphp parametersphp seen
php php php php php php*php asphp anphp arrayphp ofphp canonicalphp optionsphp andphp parametersphp.
php php php php php php*
php php php php php php*php Clustersphp havephp beenphp expandedphp,php andphp optionphp aliases
php php php php php php*php havephp beenphp mappedphp tophp theirphp primaryphp optionphp namesphp.
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp toArrayphp(php)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php php$sphp php=php arrayphp(php)php;
php php php php php php php php foreachphp php(php$thisphp-php>php_optionsphp asphp php$flagphp php=php>php php$valuephp)php php{
php php php php php php php php php php php php php$sphp[php]php php=php php$flagphp;
php php php php php php php php php php php php ifphp php(php$valuephp php!php=php=php truephp)php php{
php php php php php php php php php php php php php php php php php$sphp[php]php php=php php$valuephp;
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php php php php returnphp php$sphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp thephp currentphp setphp ofphp optionsphp andphp parametersphp seenphp inphp Jsonphp formatphp.
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp toJsonphp(php)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php php$jphp php=php arrayphp(php)php;
php php php php php php php php foreachphp php(php$thisphp-php>php_optionsphp asphp php$flagphp php=php>php php$valuephp)php php{
php php php php php php php php php php php php php$jphp[php'optionsphp'php]php[php]php php=php arrayphp(
php php php php php php php php php php php php php php php php php'optionphp'php php=php>php arrayphp(
php php php php php php php php php php php php php php php php php php php php php'flagphp'php php=php>php php$flagphp,
php php php php php php php php php php php php php php php php php php php php php'parameterphp'php php=php>php php$value
php php php php php php php php php php php php php php php php php)
php php php php php php php php php php php php php)php;
php php php php php php php php php}

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Json
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Jsonphp.phpphp'php;
php php php php php php php php php$jsonphp php=php Zendphp_Jsonphp:php:encodephp(php$jphp)php;

php php php php php php php php returnphp php$jsonphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp thephp currentphp setphp ofphp optionsphp andphp parametersphp seenphp inphp XMLphp formatphp.
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp toXmlphp(php)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php php$docphp php=php newphp DomDocumentphp(php'php1php.php0php'php,php php'utfphp-php8php'php)php;
php php php php php php php php php$optionsNodephp php=php php$docphp-php>createElementphp(php'optionsphp'php)php;
php php php php php php php php php$docphp-php>appendChildphp(php$optionsNodephp)php;
php php php php php php php php foreachphp php(php$thisphp-php>php_optionsphp asphp php$flagphp php=php>php php$valuephp)php php{
php php php php php php php php php php php php php$optionNodephp php=php php$docphp-php>createElementphp(php'optionphp'php)php;
php php php php php php php php php php php php php$optionNodephp-php>setAttributephp(php'flagphp'php,php utfphp8php_encodephp(php$flagphp)php)php;
php php php php php php php php php php php php ifphp php(php$valuephp php!php=php=php truephp)php php{
php php php php php php php php php php php php php php php php php$optionNodephp-php>setAttributephp(php'parameterphp'php,php utfphp8php_encodephp(php$valuephp)php)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$optionsNodephp-php>appendChildphp(php$optionNodephp)php;
php php php php php php php php php}
php php php php php php php php php$xmlphp php=php php$docphp-php>saveXMLphp(php)php;
php php php php php php php php returnphp php$xmlphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp aphp listphp ofphp optionsphp thatphp havephp beenphp seenphp inphp thephp currentphp argvphp.
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp getOptionsphp(php)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php returnphp arrayphp_keysphp(php$thisphp-php>php_optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp thephp statephp ofphp thephp optionphp seenphp onphp thephp commandphp linephp ofphp the
php php php php php php*php currentphp applicationphp invocationphp.
php php php php php php*
php php php php php php*php Thisphp functionphp returnsphp truephp,php orphp thephp parameterphp valuephp tophp thephp optionphp,php ifphp anyphp.
php php php php php php*php Ifphp thephp optionphp wasphp notphp givenphp,php thisphp functionphp returnsphp falsephp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$flag
php php php php php php*php php@returnphp mixed
php php php php php php*php/
php php php php publicphp functionphp getOptionphp(php$flagphp)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php ifphp php(php$thisphp-php>php_getoptConfigphp[selfphp:php:CONFIGphp_IGNORECASEphp]php)php php{
php php php php php php php php php php php php php$flagphp php=php strtolowerphp(php$flagphp)php;
php php php php php php php php php}
php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_ruleMapphp[php$flagphp]php)php)php php{
php php php php php php php php php php php php php$flagphp php=php php$thisphp-php>php_ruleMapphp[php$flagphp]php;
php php php php php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_optionsphp[php$flagphp]php)php)php php{
php php php php php php php php php php php php php php php php returnphp php$thisphp-php>php_optionsphp[php$flagphp]php;
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php php php php returnphp nullphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp thephp argumentsphp fromphp thephp commandphp-linephp followingphp allphp optionsphp foundphp.
php php php php php php*
php php php php php php*php php@returnphp array
php php php php php php*php/
php php php php publicphp functionphp getRemainingArgsphp(php)
php php php php php{
php php php php php php php php php$thisphp-php>parsephp(php)php;
php php php php php php php php returnphp php$thisphp-php>php_remainingArgsphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp aphp usefulphp optionphp referencephp,php formattedphp forphp displayphp inphp an
php php php php php php*php errorphp messagephp.
php php php php php php*
php php php php php php*php Notephp thatphp thisphp usagephp informationphp isphp providedphp inphp mostphp Exceptions
php php php php php php*php generatedphp byphp thisphp classphp.
php php php php php php*
php php php php php php*php php@returnphp string
php php php php php php*php/
php php php php publicphp functionphp getUsageMessagephp(php)
php php php php php{
php php php php php php php php php$usagephp php=php php"Usagephp:php php{php$thisphp-php>php_prognamephp}php php[php optionsphp php]php\nphp"php;
php php php php php php php php php$maxLenphp php=php php2php0php;
php php php php php php php php php$linesphp php=php arrayphp(php)php;
php php php php php php php php foreachphp php(php$thisphp-php>php_rulesphp asphp php$rulephp)php php{
php php php php php php php php php php php php php$flagsphp php=php arrayphp(php)php;
php php php php php php php php php php php php ifphp php(isphp_arrayphp(php$rulephp[php'aliasphp'php]php)php)php php{
php php php php php php php php php php php php php php php php foreachphp php(php$rulephp[php'aliasphp'php]php asphp php$flagphp)php php{
php php php php php php php php php php php php php php php php php php php php php$flagsphp[php]php php=php php(strlenphp(php$flagphp)php php=php=php php1php php?php php'php-php'php php:php php'php-php-php'php)php php.php php$flagphp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$linepartphp[php'namephp'php]php php=php implodephp(php'php|php'php,php php$flagsphp)php;
php php php php php php php php php php php php ifphp php(issetphp(php$rulephp[php'paramphp'php]php)php php&php&php php$rulephp[php'paramphp'php]php php!php=php php'nonephp'php)php php{
php php php php php php php php php php php php php php php php php$linepartphp[php'namephp'php]php php.php=php php'php php'php;
php php php php php php php php php php php php php php php php switchphp php(php$rulephp[php'paramphp'php]php)php php{
php php php php php php php php php php php php php php php php php php php php casephp php'optionalphp'php:
php php php php php php php php php php php php php php php php php php php php php php php php php$linepartphp[php'namephp'php]php php.php=php php"php[php <php{php$rulephp[php'paramTypephp'php]php}php>php php]php"php;
php php php php php php php php php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php php php php php php php php php casephp php'requiredphp'php:
php php php php php php php php php php php php php php php php php php php php php php php php php$linepartphp[php'namephp'php]php php.php=php php"<php{php$rulephp[php'paramTypephp'php]php}php>php"php;
php php php php php php php php php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}
php php php php php php php php php php php php ifphp php(strlenphp(php$linepartphp[php'namephp'php]php)php php>php php$maxLenphp)php php{
php php php php php php php php php php php php php php php php php$maxLenphp php=php strlenphp(php$linepartphp[php'namephp'php]php)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$linepartphp[php'helpphp'php]php php=php php'php'php;
php php php php php php php php php php php php ifphp php(issetphp(php$rulephp[php'helpphp'php]php)php)php php{
php php php php php php php php php php php php php php php php php$linepartphp[php'helpphp'php]php php.php=php php$rulephp[php'helpphp'php]php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$linesphp[php]php php=php php$linepartphp;
php php php php php php php php php}
php php php php php php php php foreachphp php(php$linesphp asphp php$linepartphp)php php{
php php php php php php php php php php php php php$usagephp php.php=php sprintfphp(php"php%sphp php%sphp\nphp"php,
php php php php php php php php php php php php strphp_padphp(php$linepartphp[php'namephp'php]php,php php$maxLenphp)php,
php php php php php php php php php php php php php$linepartphp[php'helpphp'php]php)php;
php php php php php php php php php}
php php php php php php php php returnphp php$usagephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Definephp aliasesphp forphp optionsphp.
php php php php php php*
php php php php php php*php Thephp parameterphp php$aliasMapphp isphp anphp associativephp array
php php php php php php*php mappingphp optionphp namephp php(shortphp orphp longphp)php tophp anphp aliasphp.
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$aliasMap
php php php php php php*php php@throwsphp Zendphp_Consolephp_Getoptphp_Exception
php php php php php php*php php@returnphp Zendphp_Consolephp_Getoptphp Providesphp aphp fluentphp interface
php php php php php php*php/
php php php php publicphp functionphp setAliasesphp(php$aliasMapphp)
php php php php php{
php php php php php php php php foreachphp php(php$aliasMapphp asphp php$flagphp php=php>php php$aliasphp)
php php php php php php php php php{
php php php php php php php php php php php php ifphp php(php$thisphp-php>php_getoptConfigphp[selfphp:php:CONFIGphp_IGNORECASEphp]php)php php{
php php php php php php php php php php php php php php php php php$flagphp php=php strtolowerphp(php$flagphp)php;
php php php php php php php php php php php php php php php php php$aliasphp php=php strtolowerphp(php$aliasphp)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php ifphp php(php!issetphp(php$thisphp-php>php_ruleMapphp[php$flagphp]php)php)php php{
php php php php php php php php php php php php php php php php continuephp;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$flagphp php=php php$thisphp-php>php_ruleMapphp[php$flagphp]php;
php php php php php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_rulesphp[php$aliasphp]php)php php|php|php issetphp(php$thisphp-php>php_ruleMapphp[php$aliasphp]php)php)php php{
php php php php php php php php php php php php php php php php php$ophp php=php php(strlenphp(php$aliasphp)php php=php=php php1php php?php php'php-php'php php:php php'php-php-php'php)php php.php php$aliasphp;
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php"Optionphp php\php"php$ophp\php"php isphp beingphp definedphp morephp thanphp oncephp.php"php)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$thisphp-php>php_rulesphp[php$flagphp]php[php'aliasphp'php]php[php]php php=php php$aliasphp;
php php php php php php php php php php php php php$thisphp-php>php_ruleMapphp[php$aliasphp]php php=php php$flagphp;
php php php php php php php php php}
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Definephp helpphp messagesphp forphp optionsphp.
php php php php php php*
php php php php php php*php Thephp parameterphp php$helpphp_mapphp isphp anphp associativephp array
php php php php php php*php mappingphp optionphp namephp php(shortphp orphp longphp)php tophp thephp helpphp stringphp.
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$helpMap
php php php php php php*php php@returnphp Zendphp_Consolephp_Getoptphp Providesphp aphp fluentphp interface
php php php php php php*php/
php php php php publicphp functionphp setHelpphp(php$helpMapphp)
php php php php php{
php php php php php php php php foreachphp php(php$helpMapphp asphp php$flagphp php=php>php php$helpphp)
php php php php php php php php php{
php php php php php php php php php php php php ifphp php(php!issetphp(php$thisphp-php>php_ruleMapphp[php$flagphp]php)php)php php{
php php php php php php php php php php php php php php php php continuephp;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$flagphp php=php php$thisphp-php>php_ruleMapphp[php$flagphp]php;
php php php php php php php php php php php php php$thisphp-php>php_rulesphp[php$flagphp]php[php'helpphp'php]php php=php php$helpphp;
php php php php php php php php php}
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Parsephp commandphp-linephp argumentsphp andphp findphp bothphp longphp andphp short
php php php php php php*php optionsphp.
php php php php php php*
php php php php php php*php Alsophp findphp optionphp parametersphp,php andphp remainingphp argumentsphp after
php php php php php php*php allphp optionsphp havephp beenphp parsedphp.
php php php php php php*
php php php php php php*php php@returnphp Zendphp_Consolephp_Getoptphp|nullphp Providesphp aphp fluentphp interface
php php php php php php*php/
php php php php publicphp functionphp parsephp(php)
php php php php php{
php php php php php php php php ifphp php(php$thisphp-php>php_parsedphp php=php=php=php truephp)php php{
php php php php php php php php php php php php returnphp;
php php php php php php php php php}
php php php php php php php php php$argvphp php=php php$thisphp-php>php_argvphp;
php php php php php php php php php$thisphp-php>php_optionsphp php=php arrayphp(php)php;
php php php php php php php php php$thisphp-php>php_remainingArgsphp php=php arrayphp(php)php;
php php php php php php php php whilephp php(countphp(php$argvphp)php php>php php0php)php php{
php php php php php php php php php php php php ifphp php(php$argvphp[php0php]php php=php=php php'php-php-php'php)php php{
php php php php php php php php php php php php php php php php arrayphp_shiftphp(php$argvphp)php;
php php php php php php php php php php php php php php php php ifphp php(php$thisphp-php>php_getoptConfigphp[selfphp:php:CONFIGphp_DASHDASHphp]php)php php{
php php php php php php php php php php php php php php php php php php php php php$thisphp-php>php_remainingArgsphp php=php arrayphp_mergephp(php$thisphp-php>php_remainingArgsphp,php php$argvphp)php;
php php php php php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}
php php php php php php php php php php php php ifphp php(substrphp(php$argvphp[php0php]php,php php0php,php php2php)php php=php=php php'php-php-php'php)php php{
php php php php php php php php php php php php php php php php php$thisphp-php>php_parseLongOptionphp(php$argvphp)php;
php php php php php php php php php php php php php}php elsephp ifphp php(substrphp(php$argvphp[php0php]php,php php0php,php php1php)php php=php=php php'php-php'php php&php&php php(php'php-php'php php!php=php php$argvphp[php0php]php php|php|php countphp(php$argvphp)php php>php1php)php)php php php{
php php php php php php php php php php php php php php php php php$thisphp-php>php_parseShortOptionClusterphp(php$argvphp)php;
php php php php php php php php php php php php php}php elsephp ifphp(php$thisphp-php>php_getoptConfigphp[selfphp:php:CONFIGphp_PARSEALLphp]php)php php{
php php php php php php php php php php php php php php php php php$thisphp-php>php_remainingArgsphp[php]php php=php arrayphp_shiftphp(php$argvphp)php;
php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php/php*
php php php php php php php php php php php php php php php php php php*php Wephp shouldphp putphp allphp otherphp argumentsphp inphp php_remainingArgsphp andphp stopphp parsing
php php php php php php php php php php php php php php php php php php*php sincephp CONFIGphp_PARSEALLphp isphp falsephp.
php php php php php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php php php php php php$thisphp-php>php_remainingArgsphp php=php arrayphp_mergephp(php$thisphp-php>php_remainingArgsphp,php php$argvphp)php;
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_parsedphp php=php truephp;
php php php php php php php php returnphp php$thisphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Parsephp commandphp-linephp argumentsphp forphp aphp singlephp longphp optionphp.
php php php php php php*php Aphp longphp optionphp isphp precededphp byphp aphp doublephp php'php-php-php'php characterphp.
php php php php php php*php Longphp optionsphp mayphp notphp bephp clusteredphp.
php php php php php php*
php php php php php php*php php@paramphp php mixedphp php&php$argv
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php protectedphp functionphp php_parseLongOptionphp(php&php$argvphp)
php php php php php{
php php php php php php php php php$optionWithParamphp php=php ltrimphp(arrayphp_shiftphp(php$argvphp)php,php php'php-php'php)php;
php php php php php php php php php$lphp php=php explodephp(php'php=php'php,php php$optionWithParamphp,php php2php)php;
php php php php php php php php php$flagphp php=php arrayphp_shiftphp(php$lphp)php;
php php php php php php php php php$paramphp php=php arrayphp_shiftphp(php$lphp)php;
php php php php php php php php ifphp php(issetphp(php$paramphp)php)php php{
php php php php php php php php php php php php arrayphp_unshiftphp(php$argvphp,php php$paramphp)php;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_parseSingleOptionphp(php$flagphp,php php$argvphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Parsephp commandphp-linephp argumentsphp forphp shortphp optionsphp.
php php php php php php*php Shortphp optionsphp arephp thosephp precededphp byphp aphp singlephp php'php-php'php characterphp.
php php php php php php*php Shortphp optionsphp mayphp bephp clusteredphp.
php php php php php php*
php php php php php php*php php@paramphp php mixedphp php&php$argv
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php protectedphp functionphp php_parseShortOptionClusterphp(php&php$argvphp)
php php php php php{
php php php php php php php php php$flagClusterphp php=php ltrimphp(arrayphp_shiftphp(php$argvphp)php,php php'php-php'php)php;
php php php php php php php php foreachphp php(strphp_splitphp(php$flagClusterphp)php asphp php$flagphp)php php{
php php php php php php php php php php php php php$thisphp-php>php_parseSingleOptionphp(php$flagphp,php php$argvphp)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Parsephp commandphp-linephp argumentsphp forphp aphp singlephp optionphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$flag
php php php php php php*php php@paramphp php mixedphp php php$argv
php php php php php php*php php@throwsphp Zendphp_Consolephp_Getoptphp_Exception
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php protectedphp functionphp php_parseSingleOptionphp(php$flagphp,php php&php$argvphp)
php php php php php{
php php php php php php php php ifphp php(php$thisphp-php>php_getoptConfigphp[selfphp:php:CONFIGphp_IGNORECASEphp]php)php php{
php php php php php php php php php php php php php$flagphp php=php strtolowerphp(php$flagphp)php;
php php php php php php php php php}
php php php php php php php php ifphp php(php!issetphp(php$thisphp-php>php_ruleMapphp[php$flagphp]php)php)php php{
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php"Optionphp php\php"php$flagphp\php"php isphp notphp recognizedphp.php"php,
php php php php php php php php php php php php php php php php php$thisphp-php>getUsageMessagephp(php)php)php;
php php php php php php php php php}
php php php php php php php php php$realFlagphp php=php php$thisphp-php>php_ruleMapphp[php$flagphp]php;
php php php php php php php php switchphp php(php$thisphp-php>php_rulesphp[php$realFlagphp]php[php'paramphp'php]php)php php{
php php php php php php php php php php php php casephp php'requiredphp'php:
php php php php php php php php php php php php php php php php ifphp php(countphp(php$argvphp)php php>php php0php)php php{
php php php php php php php php php php php php php php php php php php php php php$paramphp php=php arrayphp_shiftphp(php$argvphp)php;
php php php php php php php php php php php php php php php php php php php php php$thisphp-php>php_checkParameterTypephp(php$realFlagphp,php php$paramphp)php;
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Optionphp php\php"php$flagphp\php"php requiresphp aphp parameterphp.php"php,
php php php php php php php php php php php php php php php php php php php php php php php php php$thisphp-php>getUsageMessagephp(php)php)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php casephp php'optionalphp'php:
php php php php php php php php php php php php php php php php ifphp php(countphp(php$argvphp)php php>php php0php php&php&php substrphp(php$argvphp[php0php]php,php php0php,php php1php)php php!php=php php'php-php'php)php php{
php php php php php php php php php php php php php php php php php php php php php$paramphp php=php arrayphp_shiftphp(php$argvphp)php;
php php php php php php php php php php php php php php php php php php php php php$thisphp-php>php_checkParameterTypephp(php$realFlagphp,php php$paramphp)php;
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php php$paramphp php=php truephp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php defaultphp:
php php php php php php php php php php php php php php php php php$paramphp php=php truephp;
php php php php php php php php php}
php php php php php php php php php$thisphp-php>php_optionsphp[php$realFlagphp]php php=php php$paramphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnphp truephp ifphp thephp parameterphp isphp inphp aphp validphp formatphp for
php php php php php php*php thephp optionphp php$flagphp.
php php php php php php*php Throwphp anphp exceptionphp inphp mostphp otherphp casesphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$flag
php php php php php php*php php@paramphp php stringphp php$param
php php php php php php*php php@throwsphp Zendphp_Consolephp_Getoptphp_Exception
php php php php php php*php php@returnphp bool
php php php php php php*php/
php php php php protectedphp functionphp php_checkParameterTypephp(php$flagphp,php php$paramphp)
php php php php php{
php php php php php php php php php$typephp php=php php'stringphp'php;
php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_rulesphp[php$flagphp]php[php'paramTypephp'php]php)php)php php{
php php php php php php php php php php php php php$typephp php=php php$thisphp-php>php_rulesphp[php$flagphp]php[php'paramTypephp'php]php;
php php php php php php php php php}
php php php php php php php php switchphp php(php$typephp)php php{
php php php php php php php php php php php php casephp php'wordphp'php:
php php php php php php php php php php php php php php php php ifphp php(pregphp_matchphp(php'php/php\Wphp/php'php,php php$paramphp)php)php php{
php php php php php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Optionphp php\php"php$flagphp\php"php requiresphp aphp singlephp-wordphp parameterphp,php butphp wasphp givenphp php\php"php$paramphp\php"php.php"php,
php php php php php php php php php php php php php php php php php php php php php php php php php$thisphp-php>getUsageMessagephp(php)php)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php casephp php'integerphp'php:
php php php php php php php php php php php php php php php php ifphp php(pregphp_matchphp(php'php/php\Dphp/php'php,php php$paramphp)php)php php{
php php php php php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Optionphp php\php"php$flagphp\php"php requiresphp anphp integerphp parameterphp,php butphp wasphp givenphp php\php"php$paramphp\php"php.php"php,
php php php php php php php php php php php php php php php php php php php php php php php php php$thisphp-php>getUsageMessagephp(php)php)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php casephp php'stringphp'php:
php php php php php php php php php php php php defaultphp:
php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php}
php php php php php php php php returnphp truephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Definephp legalphp optionsphp usingphp thephp gnuphp-stylephp formatphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$rules
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php protectedphp functionphp php_addRulesModeGnuphp(php$rulesphp)
php php php php php{
php php php php php php php php php$ruleArrayphp php=php arrayphp(php)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php Optionsphp mayphp bephp singlephp alphanumericphp charactersphp.
php php php php php php php php php php*php Optionsphp mayphp havephp aphp php'php:php'php whichphp indicatesphp aphp requiredphp stringphp parameterphp.
php php php php php php php php php php*php Nophp longphp optionsphp orphp optionphp aliasesphp arephp supportedphp inphp GNUphp stylephp.
php php php php php php php php php php*php/
php php php php php php php php pregphp_matchphp_allphp(php'php/php(php[aphp-zAphp-Zphp0php-php9php]php:php?php)php/php'php,php php$rulesphp,php php$ruleArrayphp)php;
php php php php php php php php foreachphp php(php$ruleArrayphp[php1php]php asphp php$rulephp)php php{
php php php php php php php php php php php php php$rphp php=php arrayphp(php)php;
php php php php php php php php php php php php php$flagphp php=php substrphp(php$rulephp,php php0php,php php1php)php;
php php php php php php php php php php php php ifphp php(php$thisphp-php>php_getoptConfigphp[selfphp:php:CONFIGphp_IGNORECASEphp]php)php php{
php php php php php php php php php php php php php php php php php$flagphp php=php strtolowerphp(php$flagphp)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$rphp[php'aliasphp'php]php[php]php php=php php$flagphp;
php php php php php php php php php php php php ifphp php(substrphp(php$rulephp,php php1php,php php1php)php php=php=php php'php:php'php)php php{
php php php php php php php php php php php php php php php php php$rphp[php'paramphp'php]php php=php php'requiredphp'php;
php php php php php php php php php php php php php php php php php$rphp[php'paramTypephp'php]php php=php php'stringphp'php;
php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php$rphp[php'paramphp'php]php php=php php'nonephp'php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$thisphp-php>php_rulesphp[php$flagphp]php php=php php$rphp;
php php php php php php php php php php php php php$thisphp-php>php_ruleMapphp[php$flagphp]php php=php php$flagphp;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Definephp legalphp optionsphp usingphp thephp Zendphp-stylephp formatphp.
php php php php php php*
php php php php php php*php php@paramphp php arrayphp php$rules
php php php php php php*php php@throwsphp Zendphp_Consolephp_Getoptphp_Exception
php php php php php php*php php@returnphp void
php php php php php php*php/
php php php php protectedphp functionphp php_addRulesModeZendphp(php$rulesphp)
php php php php php{
php php php php php php php php foreachphp php(php$rulesphp asphp php$ruleCodephp php=php>php php$helpMessagephp)
php php php php php php php php php{
php php php php php php php php php php php php php/php/php thisphp mayphp havephp tophp translatephp thephp longphp parmphp typephp ifphp there
php php php php php php php php php php php php php/php/php arephp anyphp complaintsphp thatphp php=stringphp willphp notphp workphp php(evenphp thoughphp thatphp use
php php php php php php php php php php php php php/php/php casephp isphp notphp documentedphp)
php php php php php php php php php php php php ifphp php(inphp_arrayphp(substrphp(php$ruleCodephp,php php-php2php,php php1php)php,php arrayphp(php'php-php'php,php php'php=php'php)php)php)php php{
php php php php php php php php php php php php php php php php php$flagListphp php php=php substrphp(php$ruleCodephp,php php0php,php php-php2php)php;
php php php php php php php php php php php php php php php php php$delimiterphp php=php substrphp(php$ruleCodephp,php php-php2php,php php1php)php;
php php php php php php php php php php php php php php php php php$paramTypephp php=php substrphp(php$ruleCodephp,php php-php1php)php;
php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php$flagListphp php=php php$ruleCodephp;
php php php php php php php php php php php php php php php php php$delimiterphp php=php php$paramTypephp php=php nullphp;
php php php php php php php php php php php php php}
php php php php php php php php php php php php ifphp php(php$thisphp-php>php_getoptConfigphp[selfphp:php:CONFIGphp_IGNORECASEphp]php)php php{
php php php php php php php php php php php php php php php php php$flagListphp php=php strtolowerphp(php$flagListphp)php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$flagsphp php=php explodephp(php'php|php'php,php php$flagListphp)php;
php php php php php php php php php php php php php$rulephp php=php arrayphp(php)php;
php php php php php php php php php php php php php$mainFlagphp php=php php$flagsphp[php0php]php;
php php php php php php php php php php php php foreachphp php(php$flagsphp asphp php$flagphp)php php{
php php php php php php php php php php php php php php php php ifphp php(emptyphp(php$flagphp)php)php php{
php php php php php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Blankphp flagphp notphp allowedphp inphp rulephp php\php"php$ruleCodephp\php"php.php"php)php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php ifphp php(strlenphp(php$flagphp)php php=php=php php1php)php php{
php php php php php php php php php php php php php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_ruleMapphp[php$flagphp]php)php)php php{
php php php php php php php php php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php"Optionphp php\php"php-php$flagphp\php"php isphp beingphp definedphp morephp thanphp oncephp.php"php)php;
php php php php php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php php php php php$thisphp-php>php_ruleMapphp[php$flagphp]php php=php php$mainFlagphp;
php php php php php php php php php php php php php php php php php php php php php$rulephp[php'aliasphp'php]php[php]php php=php php$flagphp;
php php php php php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php php php php ifphp php(issetphp(php$thisphp-php>php_rulesphp[php$flagphp]php)php php|php|php issetphp(php$thisphp-php>php_ruleMapphp[php$flagphp]php)php)php php{
php php php php php php php php php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Consolephp/Getoptphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Consolephp_Getoptphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php"Optionphp php\php"php-php-php$flagphp\php"php isphp beingphp definedphp morephp thanphp oncephp.php"php)php;
php php php php php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php php php php php php$thisphp-php>php_ruleMapphp[php$flagphp]php php=php php$mainFlagphp;
php php php php php php php php php php php php php php php php php php php php php$rulephp[php'aliasphp'php]php[php]php php=php php$flagphp;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}
php php php php php php php php php php php php ifphp php(issetphp(php$delimiterphp)php)php php{
php php php php php php php php php php php php php php php php switchphp php(php$delimiterphp)php php{
php php php php php php php php php php php php php php php php php php php php casephp selfphp:php:PARAMphp_REQUIREDphp:
php php php php php php php php php php php php php php php php php php php php php php php php php$rulephp[php'paramphp'php]php php=php php'requiredphp'php;
php php php php php php php php php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php php php php php php php php php casephp selfphp:php:PARAMphp_OPTIONALphp:
php php php php php php php php php php php php php php php php php php php php defaultphp:
php php php php php php php php php php php php php php php php php php php php php php php php php$rulephp[php'paramphp'php]php php=php php'optionalphp'php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php php php php switchphp php(substrphp(php$paramTypephp,php php0php,php php1php)php)php php{
php php php php php php php php php php php php php php php php php php php php casephp selfphp:php:TYPEphp_WORDphp:
php php php php php php php php php php php php php php php php php php php php php php php php php$rulephp[php'paramTypephp'php]php php=php php'wordphp'php;
php php php php php php php php php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php php php php php php php php php casephp selfphp:php:TYPEphp_INTEGERphp:
php php php php php php php php php php php php php php php php php php php php php php php php php$rulephp[php'paramTypephp'php]php php=php php'integerphp'php;
php php php php php php php php php php php php php php php php php php php php php php php php breakphp;
php php php php php php php php php php php php php php php php php php php php casephp selfphp:php:TYPEphp_STRINGphp:
php php php php php php php php php php php php php php php php php php php php defaultphp:
php php php php php php php php php php php php php php php php php php php php php php php php php$rulephp[php'paramTypephp'php]php php=php php'stringphp'php;
php php php php php php php php php php php php php php php php php}
php php php php php php php php php php php php php}php elsephp php{
php php php php php php php php php php php php php php php php php$rulephp[php'paramphp'php]php php=php php'nonephp'php;
php php php php php php php php php php php php php}
php php php php php php php php php php php php php$rulephp[php'helpphp'php]php php=php php$helpMessagephp;
php php php php php php php php php php php php php$thisphp-php>php_rulesphp[php$mainFlagphp]php php=php php$rulephp;
php php php php php php php php php}
php php php php php}

php}

<php?php

php/php*php*
php php*php Zendphp Framework
php php*
php php*php LICENSE
php php*
php php*php Thisphp sourcephp filephp isphp subjectphp tophp thephp newphp BSDphp licensephp thatphp isphp bundled
php php*php withphp thisphp packagephp inphp thephp filephp LICENSEphp.txtphp.
php php*php Itphp isphp alsophp availablephp throughphp thephp worldphp-widephp-webphp atphp thisphp URLphp:
php php*php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsd
php php*php Ifphp youphp didphp notphp receivephp aphp copyphp ofphp thephp licensephp andphp arephp unablephp to
php php*php obtainphp itphp throughphp thephp worldphp-widephp-webphp,php pleasephp sendphp anphp email
php php*php tophp licensephp@zendphp.comphp sophp wephp canphp sendphp youphp aphp copyphp immediatelyphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Service
php php*php php@subpackagephp Technorati
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php php@versionphp php php php php$Idphp:php Technoratiphp.phpphp php2php0php0php9php6php php2php0php1php0php-php0php1php-php0php6php php0php2php:php0php5php:php0php9Zphp bkarwinphp php$
php php*php/


php/php*php*
php php*php Zendphp_Servicephp_Technoratiphp providesphp anphp easyphp,php intuitivephp andphp objectphp-orientedphp interface
php php*php forphp usingphp thephp Technoratiphp APIphp.
php php*
php php*php Itphp providesphp accessphp tophp allphp availablephp Technoratiphp APIphp queries
php php*php andphp returnsphp thephp originalphp XMLphp responsephp asphp aphp friendlyphp PHPphp objectphp.
php php*
php php*php php@categoryphp php php Zend
php php*php php@packagephp php php php Zendphp_Service
php php*php php@subpackagephp Technorati
php php*php php@copyrightphp php Copyrightphp php(cphp)php php2php0php0php5php-php2php0php1php0php Zendphp Technologiesphp USAphp Incphp.php php(httpphp:php/php/wwwphp.zendphp.comphp)
php php*php php@licensephp php php php httpphp:php/php/frameworkphp.zendphp.comphp/licensephp/newphp-bsdphp php php php php Newphp BSDphp License
php php*php/
classphp Zendphp_Servicephp_Technorati
php{
php php php php php/php*php*php Basephp Technoratiphp APIphp URIphp php*php/
php php php php constphp APIphp_URIphp_BASEphp php=php php'httpphp:php/php/apiphp.technoratiphp.comphp'php;

php php php php php/php*php*php Queryphp pathsphp php*php/
php php php php constphp APIphp_PATHphp_COSMOSphp php php php php php php php php php php php=php php'php/cosmosphp'php;
php php php php constphp APIphp_PATHphp_SEARCHphp php php php php php php php php php php php=php php'php/searchphp'php;
php php php php constphp APIphp_PATHphp_TAGphp php php php php php php php php php php php php php php=php php'php/tagphp'php;
php php php php constphp APIphp_PATHphp_DAILYCOUNTSphp php php php php php php=php php'php/dailycountsphp'php;
php php php php constphp APIphp_PATHphp_TOPTAGSphp php php php php php php php php php php=php php'php/toptagsphp'php;
php php php php constphp APIphp_PATHphp_BLOGINFOphp php php php php php php php php php=php php'php/bloginfophp'php;
php php php php constphp APIphp_PATHphp_BLOGPOSTTAGSphp php php php php php=php php'php/blogposttagsphp'php;
php php php php constphp APIphp_PATHphp_GETINFOphp php php php php php php php php php php=php php'php/getinfophp'php;
php php php php constphp APIphp_PATHphp_KEYINFOphp php php php php php php php php php php=php php'php/keyinfophp'php;

php php php php php/php*php*php Preventphp magicphp numbersphp php*php/
php php php php constphp PARAMphp_LIMITphp_MINphp_VALUEphp php=php php1php;
php php php php constphp PARAMphp_LIMITphp_MAXphp_VALUEphp php=php php1php0php0php;
php php php php constphp PARAMphp_DAYSphp_MINphp_VALUEphp php php=php php1php;
php php php php constphp PARAMphp_DAYSphp_MAXphp_VALUEphp php php=php php1php8php0php;
php php php php constphp PARAMphp_STARTphp_MINphp_VALUEphp php=php php1php;


php php php php php/php*php*
php php php php php php*php Technoratiphp APIphp key
php php php php php php*
php php php php php php*php php@varphp php php php php string
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp php$php_apiKeyphp;

php php php php php/php*php*
php php php php php php*php Zendphp_Restphp_Clientphp instance
php php php php php php*
php php php php php php*php php@varphp php php php php Zendphp_Restphp_Client
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp php$php_restClientphp;


php php php php php/php*php*
php php php php php php*php Constructsphp aphp newphp Zendphp_Servicephp_Technoratiphp instance
php php php php php php*php andphp setupphp characterphp encodingphp.
php php php php php php*
php php php php php php*php php@paramphp php stringphp php$apiKeyphp php Yourphp Technoratiphp APIphp key
php php php php php php*php/
php php php php publicphp functionphp php_php_constructphp(php$apiKeyphp)
php php php php php{
php php php php php php php php iconvphp_setphp_encodingphp(php'outputphp_encodingphp'php,php php'UTFphp-php8php'php)php;
php php php php php php php php iconvphp_setphp_encodingphp(php'inputphp_encodingphp'php,php php'UTFphp-php8php'php)php;
php php php php php php php php iconvphp_setphp_encodingphp(php'internalphp_encodingphp'php,php php'UTFphp-php8php'php)php;

php php php php php php php php php$thisphp-php>php_apiKeyphp php=php php$apiKeyphp;
php php php php php}


php php php php php/php*php*
php php php php php php*php Cosmosphp queryphp letsphp youphp seephp whatphp blogsphp arephp linkingphp tophp aphp givenphp URLphp.
php php php php php php*
php php php php php php*php Onphp thephp Technoratiphp sitephp,php youphp canphp enterphp aphp URLphp inphp thephp searchboxphp and
php php php php php php*php itphp willphp returnphp aphp listphp ofphp blogsphp linkingphp tophp itphp.
php php php php php php*php Thephp APIphp versionphp allowsphp morephp featuresphp andphp givesphp youphp aphp way
php php php php php php*php tophp usephp thephp cosmosphp onphp yourphp ownphp sitephp.
php php php php php php*
php php php php php php*php Queryphp optionsphp includephp:
php php php php php php*
php php php php php php*php php'typephp'php php php php php php php php=php>php php(linkphp|weblogphp)
php php php php php php*php php php php php php optionalphp php-php Aphp valuephp ofphp linkphp returnsphp thephp freshestphp linksphp referencingphp yourphp targetphp URLphp.
php php php php php php*php php php php php php Aphp valuephp ofphp weblogphp returnsphp thephp lastphp setphp ofphp uniquephp weblogsphp referencingphp yourphp targetphp URLphp.
php php php php php php*php php'limitphp'php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp sizephp ofphp yourphp resultphp fromphp thephp defaultphp valuephp ofphp php2php0
php php php php php php*php php php php php php tophp betweenphp php1php andphp php1php0php0php resultsphp.
php php php php php php*php php'startphp'php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp rangephp ofphp yourphp resultphp setphp.
php php php php php php*php php php php php php Setphp thisphp numberphp tophp largerphp thanphp zerophp andphp youphp willphp receive
php php php php php php*php php php php php php thephp portionphp ofphp Technoratiphp'sphp totalphp resultphp setphp rangingphp fromphp startphp tophp startphp+limitphp.
php php php php php php*php php php php php php Thephp defaultphp startphp valuephp isphp php1php.
php php php php php php*php php'currentphp'php php php php php=php>php php(truephp|falsephp)
php php php php php php*php php php php php php optionalphp php-php thephp defaultphp settingphp ofphp true
php php php php php php*php php php php php php Technoratiphp returnsphp linksphp thatphp arephp currentlyphp onphp aphp weblogphp'sphp homepagephp.
php php php php php php*php php php php php php Setphp thisphp parameterphp tophp falsephp ifphp youphp wouldphp likephp tophp receivephp allphp links
php php php php php php*php php php php php php tophp thephp givenphp URLphp regardlessphp ofphp theirphp currentphp placementphp onphp thephp sourcephp blogphp.
php php php php php php*php php php php php php Internallyphp thephp valuephp isphp convertedphp inphp php(yesphp|nophp)php.
php php php php php php*php php'claimphp'php php php php php php php=php>php php(truephp|falsephp)
php php php php php php*php php php php php php optionalphp php-php thephp defaultphp settingphp ofphp FALSEphp returnsphp nophp userphp information
php php php php php php*php php php php php php aboutphp eachphp weblogphp includedphp inphp thephp resultphp setphp whenphp availablephp.
php php php php php php*php php php php php php Setphp thisphp parameterphp tophp FALSEphp tophp includephp Technoratiphp memberphp data
php php php php php php*php php php php php php inphp thephp resultphp setphp whenphp aphp weblogphp inphp yourphp resultphp set
php php php php php php*php php php php php php hasphp beenphp successfullyphp claimedphp byphp aphp memberphp ofphp Technoratiphp.
php php php php php php*php php php php php php Internallyphp thephp valuephp isphp convertedphp inphp php(intphp)php.
php php php php php php*php php'highlightphp'php php php=php>php php(truephp|falsephp)
php php php php php php*php php php php php php optionalphp php-php thephp defaultphp settingphp ofphp TRUE
php php php php php php*php php php php php php highlightsphp thephp citationphp ofphp thephp givenphp URLphp withinphp thephp weblogphp excerptphp.
php php php php php php*php php php php php php Setphp thisphp parameterphp tophp FALSEphp tophp applyphp nophp specialphp markupphp tophp thephp blogphp excerptphp.
php php php php php php*php php php php php php Internallyphp thephp valuephp isphp convertedphp inphp php(intphp)php.
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$urlphp php php php php thephp URLphp youphp arephp searchingphp forphp.php Prefixesphp httpphp:php/php/php andphp wwwphp.php arephp optionalphp.
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php additionalphp parametersphp tophp refinephp yourphp query
php php php php php php*php php@returnphp php Zendphp_Servicephp_Technoratiphp_CosmosResultSet
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apiphp/cosmosphp.htmlphp Technoratiphp APIphp:php Cosmosphp Queryphp reference
php php php php php php*php/
php php php php publicphp functionphp cosmosphp(php$urlphp,php php$optionsphp php=php nullphp)
php php php php php{
php php php php php php php php staticphp php$defaultOptionsphp php=php arrayphp(php php'typephp'php php php php php php php=php>php php'linkphp'php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'startphp'php php php php php php=php>php php1php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'limitphp'php php php php php php=php>php php2php0php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'currentphp'php php php php=php>php php'yesphp'php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'formatphp'php php php php php=php>php php'xmlphp'php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'claimphp'php php php php php php=php>php php0php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'highlightphp'php php=php>php php1php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php)php;

php php php php php php php php php$optionsphp[php'urlphp'php]php php=php php$urlphp;

php php php php php php php php php$optionsphp php=php php$thisphp-php>php_prepareOptionsphp(php$optionsphp,php php$defaultOptionsphp)php;
php php php php php php php php php$thisphp-php>php_validateCosmosphp(php$optionsphp)php;
php php php php php php php php php$responsephp php=php php$thisphp-php>php_makeRequestphp(selfphp:php:APIphp_PATHphp_COSMOSphp,php php$optionsphp)php;
php php php php php php php php php$domphp php=php php$thisphp-php>php_convertResponseAndCheckContentphp(php$responsephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_CosmosResultSet
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/CosmosResultSetphp.phpphp'php;
php php php php php php php php returnphp newphp Zendphp_Servicephp_Technoratiphp_CosmosResultSetphp(php$domphp,php php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Searchphp letsphp youphp seephp whatphp blogsphp containphp aphp givenphp searchphp stringphp.
php php php php php php*
php php php php php php*php Queryphp optionsphp includephp:
php php php php php php*
php php php php php php*php php'languagephp'php php php php=php>php php(stringphp)
php php php php php php*php php php php php php optionalphp php-php aphp ISOphp php6php3php9php-php1php twophp characterphp languagephp code
php php php php php php*php php php php php php tophp retrievephp resultsphp specificphp tophp thatphp languagephp.
php php php php php php*php php php php php php Thisphp featurephp isphp currentlyphp betaphp andphp mayphp notphp workphp forphp allphp languagesphp.
php php php php php php*php php'authorityphp'php php php=php>php php(nphp|aphp1php|aphp4php|aphp7php)
php php php php php php*php php php php php php optionalphp php-php filterphp resultsphp tophp thosephp fromphp blogsphp withphp atphp least
php php php php php php*php php php php php php thephp Technoratiphp Authorityphp specifiedphp.
php php php php php php*php php php php php php Technoratiphp calculatesphp aphp blogphp'sphp authorityphp byphp howphp manyphp peoplephp linkphp tophp itphp.
php php php php php php*php php php php php php Filteringphp byphp authorityphp isphp aphp goodphp wayphp tophp refinephp yourphp searchphp resultsphp.
php php php php php php*php php php php php php Therephp arephp fourphp settingsphp:
php php php php php php*php php php php php php php-php nphp php php=php>php Anyphp authorityphp:php Allphp resultsphp.
php php php php php php*php php php php php php php-php aphp1php php=php>php Aphp littlephp authorityphp:php Resultsphp fromphp blogsphp withphp atphp leastphp onephp linkphp.
php php php php php php*php php php php php php php-php aphp4php php=php>php Somephp authorityphp:php Resultsphp fromphp blogsphp withphp aphp handfulphp ofphp linksphp.
php php php php php php*php php php php php php php-php aphp7php php=php>php Aphp lotphp ofphp authorityphp:php Resultsphp fromphp blogsphp withphp hundredsphp ofphp linksphp.
php php php php php php*php php'limitphp'php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp sizephp ofphp yourphp resultphp fromphp thephp defaultphp valuephp ofphp php2php0
php php php php php php*php php php php php php tophp betweenphp php1php andphp php1php0php0php resultsphp.
php php php php php php*php php'startphp'php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp rangephp ofphp yourphp resultphp setphp.
php php php php php php*php php php php php php Setphp thisphp numberphp tophp largerphp thanphp zerophp andphp youphp willphp receive
php php php php php php*php php php php php php thephp portionphp ofphp Technoratiphp'sphp totalphp resultphp setphp rangingphp fromphp startphp tophp startphp+limitphp.
php php php php php php*php php php php php php Thephp defaultphp startphp valuephp isphp php1php.
php php php php php php*php php'claimphp'php php php php php php php=php>php php(truephp|falsephp)
php php php php php php*php php php php php php optionalphp php-php thephp defaultphp settingphp ofphp FALSEphp returnsphp nophp userphp information
php php php php php php*php php php php php php aboutphp eachphp weblogphp includedphp inphp thephp resultphp setphp whenphp availablephp.
php php php php php php*php php php php php php Setphp thisphp parameterphp tophp FALSEphp tophp includephp Technoratiphp memberphp data
php php php php php php*php php php php php php inphp thephp resultphp setphp whenphp aphp weblogphp inphp yourphp resultphp set
php php php php php php*php php php php php php hasphp beenphp successfullyphp claimedphp byphp aphp memberphp ofphp Technoratiphp.
php php php php php php*php php php php php php Internallyphp thephp valuephp isphp convertedphp inphp php(intphp)php.
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$queryphp php php thephp wordsphp youphp arephp searchingphp forphp.
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php additionalphp parametersphp tophp refinephp yourphp query
php php php php php php*php php@returnphp php Zendphp_Servicephp_Technoratiphp_SearchResultSet
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apiphp/searchphp.htmlphp Technoratiphp APIphp:php Searchphp Queryphp reference
php php php php php php*php/
php php php php publicphp functionphp searchphp(php$queryphp,php php$optionsphp php=php nullphp)
php php php php php{
php php php php php php php php staticphp php$defaultOptionsphp php=php arrayphp(php php'startphp'php php php php php php=php>php php1php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'limitphp'php php php php php php=php>php php2php0php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'formatphp'php php php php php=php>php php'xmlphp'php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'claimphp'php php php php php php=php>php php0php)php;

php php php php php php php php php$optionsphp[php'queryphp'php]php php=php php$queryphp;

php php php php php php php php php$optionsphp php=php php$thisphp-php>php_prepareOptionsphp(php$optionsphp,php php$defaultOptionsphp)php;
php php php php php php php php php$thisphp-php>php_validateSearchphp(php$optionsphp)php;
php php php php php php php php php$responsephp php=php php$thisphp-php>php_makeRequestphp(selfphp:php:APIphp_PATHphp_SEARCHphp,php php$optionsphp)php;
php php php php php php php php php$domphp php=php php$thisphp-php>php_convertResponseAndCheckContentphp(php$responsephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_SearchResultSet
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/SearchResultSetphp.phpphp'php;
php php php php php php php php returnphp newphp Zendphp_Servicephp_Technoratiphp_SearchResultSetphp(php$domphp,php php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Tagphp letsphp youphp seephp whatphp postsphp arephp associatedphp withphp aphp givenphp tagphp.
php php php php php php*
php php php php php php*php Queryphp optionsphp includephp:
php php php php php php*
php php php php php php*php php'limitphp'php php php php php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp sizephp ofphp yourphp resultphp fromphp thephp defaultphp valuephp ofphp php2php0
php php php php php php*php php php php php php tophp betweenphp php1php andphp php1php0php0php resultsphp.
php php php php php php*php php'startphp'php php php php php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp rangephp ofphp yourphp resultphp setphp.
php php php php php php*php php php php php php Setphp thisphp numberphp tophp largerphp thanphp zerophp andphp youphp willphp receive
php php php php php php*php php php php php php thephp portionphp ofphp Technoratiphp'sphp totalphp resultphp setphp rangingphp fromphp startphp tophp startphp+limitphp.
php php php php php php*php php php php php php Thephp defaultphp startphp valuephp isphp php1php.
php php php php php php*php php'excerptsizephp'php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php numberphp ofphp wordphp charactersphp tophp includephp inphp thephp postphp excerptsphp.
php php php php php php*php php php php php php Byphp defaultphp php1php0php0php wordphp charactersphp arephp returnedphp.
php php php php php php*php php'topexcerptsizephp'php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php numberphp ofphp wordphp charactersphp tophp includephp inphp thephp firstphp postphp excerptphp.
php php php php php php*php php php php php php Byphp defaultphp php1php5php0php wordphp charactersphp arephp returnedphp.
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$tagphp php php php php thephp tagphp termphp youphp arephp searchingphp postsphp forphp.
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php additionalphp parametersphp tophp refinephp yourphp query
php php php php php php*php php@returnphp php Zendphp_Servicephp_Technoratiphp_TagResultSet
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apiphp/tagphp.htmlphp Technoratiphp APIphp:php Tagphp Queryphp reference
php php php php php php*php/
php php php php publicphp functionphp tagphp(php$tagphp,php php$optionsphp php=php nullphp)
php php php php php{
php php php php php php php php staticphp php$defaultOptionsphp php=php arrayphp(php php'startphp'php php php php php php php php php php php=php>php php1php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'limitphp'php php php php php php php php php php php=php>php php2php0php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'formatphp'php php php php php php php php php php=php>php php'xmlphp'php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'excerptsizephp'php php php php php=php>php php1php0php0php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'topexcerptsizephp'php php=php>php php1php5php0php)php;

php php php php php php php php php$optionsphp[php'tagphp'php]php php=php php$tagphp;

php php php php php php php php php$optionsphp php=php php$thisphp-php>php_prepareOptionsphp(php$optionsphp,php php$defaultOptionsphp)php;
php php php php php php php php php$thisphp-php>php_validateTagphp(php$optionsphp)php;
php php php php php php php php php$responsephp php=php php$thisphp-php>php_makeRequestphp(selfphp:php:APIphp_PATHphp_TAGphp,php php$optionsphp)php;
php php php php php php php php php$domphp php=php php$thisphp-php>php_convertResponseAndCheckContentphp(php$responsephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_TagResultSet
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/TagResultSetphp.phpphp'php;
php php php php php php php php returnphp newphp Zendphp_Servicephp_Technoratiphp_TagResultSetphp(php$domphp,php php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php TopTagsphp providesphp dailyphp countsphp ofphp postsphp containingphp thephp queriedphp keywordphp.
php php php php php php*
php php php php php php*php Queryphp optionsphp includephp:
php php php php php php*
php php php php php php*php php'daysphp'php php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php Usedphp tophp specifyphp thephp numberphp ofphp daysphp inphp thephp past
php php php php php php*php php php php php php tophp requestphp dailyphp countphp dataphp forphp.
php php php php php php*php php php php php php Canphp bephp anyphp integerphp betweenphp php1php andphp php1php8php0php,php defaultphp isphp php1php8php0
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$qphp php php php php php php thephp keywordphp query
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php additionalphp parametersphp tophp refinephp yourphp query
php php php php php php*php php@returnphp php Zendphp_Servicephp_Technoratiphp_DailyCountsResultSet
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apiphp/dailycountsphp.htmlphp Technoratiphp APIphp:php DailyCountsphp Queryphp reference
php php php php php php*php/
php php php php publicphp functionphp dailyCountsphp(php$queryphp,php php$optionsphp php=php nullphp)
php php php php php{
php php php php php php php php staticphp php$defaultOptionsphp php=php arrayphp(php php'daysphp'php php php php php php php=php>php php1php8php0php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'formatphp'php php php php php=php>php php'xmlphp'
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php)php;

php php php php php php php php php$optionsphp[php'qphp'php]php php=php php$queryphp;

php php php php php php php php php$optionsphp php=php php$thisphp-php>php_prepareOptionsphp(php$optionsphp,php php$defaultOptionsphp)php;
php php php php php php php php php$thisphp-php>php_validateDailyCountsphp(php$optionsphp)php;
php php php php php php php php php$responsephp php=php php$thisphp-php>php_makeRequestphp(selfphp:php:APIphp_PATHphp_DAILYCOUNTSphp,php php$optionsphp)php;
php php php php php php php php php$domphp php=php php$thisphp-php>php_convertResponseAndCheckContentphp(php$responsephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_DailyCountsResultSet
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/DailyCountsResultSetphp.phpphp'php;
php php php php php php php php returnphp newphp Zendphp_Servicephp_Technoratiphp_DailyCountsResultSetphp(php$domphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php TopTagsphp providesphp informationphp onphp topphp tagsphp indexedphp byphp Technoratiphp.
php php php php php php*
php php php php php php*php Queryphp optionsphp includephp:
php php php php php php*
php php php php php php*php php'limitphp'php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp sizephp ofphp yourphp resultphp fromphp thephp defaultphp valuephp ofphp php2php0
php php php php php php*php php php php php php tophp betweenphp php1php andphp php1php0php0php resultsphp.
php php php php php php*php php'startphp'php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp rangephp ofphp yourphp resultphp setphp.
php php php php php php*php php php php php php Setphp thisphp numberphp tophp largerphp thanphp zerophp andphp youphp willphp receive
php php php php php php*php php php php php php thephp portionphp ofphp Technoratiphp'sphp totalphp resultphp setphp rangingphp fromphp startphp tophp startphp+limitphp.
php php php php php php*php php php php php php Thephp defaultphp startphp valuephp isphp php1php.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php additionalphp parametersphp tophp refinephp yourphp query
php php php php php php*php php@returnphp php Zendphp_Servicephp_Technoratiphp_TagsResultSet
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apiphp/toptagsphp.htmlphp Technoratiphp APIphp:php TopTagsphp Queryphp reference
php php php php php php*php/
php php php php publicphp functionphp topTagsphp(php$optionsphp php=php nullphp)
php php php php php{
php php php php php php php php staticphp php$defaultOptionsphp php=php arrayphp(php php'startphp'php php php php php php=php>php php1php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'limitphp'php php php php php php=php>php php2php0php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'formatphp'php php php php php=php>php php'xmlphp'
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php)php;

php php php php php php php php php$optionsphp php=php php$thisphp-php>php_prepareOptionsphp(php$optionsphp,php php$defaultOptionsphp)php;
php php php php php php php php php$thisphp-php>php_validateTopTagsphp(php$optionsphp)php;
php php php php php php php php php$responsephp php=php php$thisphp-php>php_makeRequestphp(selfphp:php:APIphp_PATHphp_TOPTAGSphp,php php$optionsphp)php;
php php php php php php php php php$domphp php=php php$thisphp-php>php_convertResponseAndCheckContentphp(php$responsephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_TagsResultSet
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/TagsResultSetphp.phpphp'php;
php php php php php php php php returnphp newphp Zendphp_Servicephp_Technoratiphp_TagsResultSetphp(php$domphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php BlogInfophp providesphp informationphp onphp whatphp blogphp,php ifphp anyphp,php isphp associatedphp withphp aphp givenphp URLphp.
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$urlphp php php php php thephp URLphp youphp arephp searchingphp forphp.php Prefixesphp httpphp:php/php/php andphp wwwphp.php arephp optionalphp.
php php php php php php*php php php php php php php php php php php php php php php php php php php php php php php php php php Thephp URLphp mustphp bephp recognizedphp byphp Technoratiphp asphp aphp blogphp.
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php additionalphp parametersphp tophp refinephp yourphp query
php php php php php php*php php@returnphp php Zendphp_Servicephp_Technoratiphp_BlogInfoResult
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apiphp/bloginfophp.htmlphp Technoratiphp APIphp:php BlogInfophp Queryphp reference
php php php php php php*php/
php php php php publicphp functionphp blogInfophp(php$urlphp,php php$optionsphp php=php nullphp)
php php php php php{
php php php php php php php php staticphp php$defaultOptionsphp php=php arrayphp(php php'formatphp'php php php php php=php>php php'xmlphp'
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php)php;

php php php php php php php php php$optionsphp[php'urlphp'php]php php=php php$urlphp;

php php php php php php php php php$optionsphp php=php php$thisphp-php>php_prepareOptionsphp(php$optionsphp,php php$defaultOptionsphp)php;
php php php php php php php php php$thisphp-php>php_validateBlogInfophp(php$optionsphp)php;
php php php php php php php php php$responsephp php=php php$thisphp-php>php_makeRequestphp(selfphp:php:APIphp_PATHphp_BLOGINFOphp,php php$optionsphp)php;
php php php php php php php php php$domphp php=php php$thisphp-php>php_convertResponseAndCheckContentphp(php$responsephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_BlogInfoResult
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/BlogInfoResultphp.phpphp'php;
php php php php php php php php returnphp newphp Zendphp_Servicephp_Technoratiphp_BlogInfoResultphp(php$domphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php BlogPostTagsphp providesphp informationphp onphp thephp topphp tagsphp usedphp byphp aphp specificphp blogphp.
php php php php php php*
php php php php php php*php Queryphp optionsphp includephp:
php php php php php php*
php php php php php php*php php'limitphp'php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp sizephp ofphp yourphp resultphp fromphp thephp defaultphp valuephp ofphp php2php0
php php php php php php*php php php php php php tophp betweenphp php1php andphp php1php0php0php resultsphp.
php php php php php php*php php'startphp'php php php php php php php=php>php php(intphp)
php php php php php php*php php php php php php optionalphp php-php adjustphp thephp rangephp ofphp yourphp resultphp setphp.
php php php php php php*php php php php php php Setphp thisphp numberphp tophp largerphp thanphp zerophp andphp youphp willphp receive
php php php php php php*php php php php php php thephp portionphp ofphp Technoratiphp'sphp totalphp resultphp setphp rangingphp fromphp startphp tophp startphp+limitphp.
php php php php php php*php php php php php php Thephp defaultphp startphp valuephp isphp php1php.
php php php php php php*php php php php php php Notephp.php Thisphp propertyphp isphp notphp documentedphp.
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$urlphp php php php php thephp URLphp youphp arephp searchingphp forphp.php Prefixesphp httpphp:php/php/php andphp wwwphp.php arephp optionalphp.
php php php php php php*php php php php php php php php php php php php php php php php php php php php php php php php php php Thephp URLphp mustphp bephp recognizedphp byphp Technoratiphp asphp aphp blogphp.
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php additionalphp parametersphp tophp refinephp yourphp query
php php php php php php*php php@returnphp php Zendphp_Servicephp_Technoratiphp_TagsResultSet
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apiphp/blogposttagsphp.htmlphp Technoratiphp APIphp:php BlogPostTagsphp Queryphp reference
php php php php php php*php/
php php php php publicphp functionphp blogPostTagsphp(php$urlphp,php php$optionsphp php=php nullphp)
php php php php php{
php php php php php php php php staticphp php$defaultOptionsphp php=php arrayphp(php php'startphp'php php php php php php=php>php php1php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'limitphp'php php php php php php=php>php php2php0php,
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php'formatphp'php php php php php=php>php php'xmlphp'
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php php)php;

php php php php php php php php php$optionsphp[php'urlphp'php]php php=php php$urlphp;

php php php php php php php php php$optionsphp php=php php$thisphp-php>php_prepareOptionsphp(php$optionsphp,php php$defaultOptionsphp)php;
php php php php php php php php php$thisphp-php>php_validateBlogPostTagsphp(php$optionsphp)php;
php php php php php php php php php$responsephp php=php php$thisphp-php>php_makeRequestphp(selfphp:php:APIphp_PATHphp_BLOGPOSTTAGSphp,php php$optionsphp)php;
php php php php php php php php php$domphp php=php php$thisphp-php>php_convertResponseAndCheckContentphp(php$responsephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_TagsResultSet
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/TagsResultSetphp.phpphp'php;
php php php php php php php php returnphp newphp Zendphp_Servicephp_Technoratiphp_TagsResultSetphp(php$domphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php GetInfophp queryphp tellsphp youphp thingsphp thatphp Technoratiphp knowsphp aboutphp aphp memberphp.
php php php php php php*
php php php php php php*php Thephp returnedphp infophp isphp brokenphp upphp intophp twophp sectionsphp:
php php php php php php*php Thephp firstphp partphp describesphp somephp informationphp thatphp thephp userphp wants
php php php php php php*php tophp allowphp peoplephp tophp knowphp aboutphp himphp-php orphp herselfphp.
php php php php php php*php Thephp secondphp partphp ofphp thephp documentphp isphp aphp listingphp ofphp thephp weblogs
php php php php php php*php thatphp thephp userphp hasphp successfullyphp claimedphp andphp thephp information
php php php php php php*php thatphp Technoratiphp knowsphp aboutphp thesephp weblogsphp.
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$usernamephp php php php thephp Technoratiphp userphp namephp youphp arephp searchingphp for
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php php php php php additionalphp parametersphp tophp refinephp yourphp query
php php php php php php*php php@returnphp php Zendphp_Servicephp_Technoratiphp_GetInfoResult
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apiphp/getinfophp.htmlphp Technoratiphp APIphp:php GetInfophp reference
php php php php php php*php/
php php php php publicphp functionphp getInfophp(php$usernamephp,php php$optionsphp php=php nullphp)
php php php php php{
php php php php php php php php staticphp php$defaultOptionsphp php=php arrayphp(php'formatphp'php php=php>php php'xmlphp'php)php;

php php php php php php php php php$optionsphp[php'usernamephp'php]php php=php php$usernamephp;

php php php php php php php php php$optionsphp php=php php$thisphp-php>php_prepareOptionsphp(php$optionsphp,php php$defaultOptionsphp)php;
php php php php php php php php php$thisphp-php>php_validateGetInfophp(php$optionsphp)php;
php php php php php php php php php$responsephp php=php php$thisphp-php>php_makeRequestphp(selfphp:php:APIphp_PATHphp_GETINFOphp,php php$optionsphp)php;
php php php php php php php php php$domphp php=php php$thisphp-php>php_convertResponseAndCheckContentphp(php$responsephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_GetInfoResult
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/GetInfoResultphp.phpphp'php;
php php php php php php php php returnphp newphp Zendphp_Servicephp_Technoratiphp_GetInfoResultphp(php$domphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php KeyInfophp queryphp providesphp informationphp onphp dailyphp usagephp ofphp anphp APIphp keyphp.
php php php php php php*php Keyphp Infophp Queriesphp dophp notphp countphp againstphp aphp keyphp'sphp dailyphp queryphp limitphp.
php php php php php php*
php php php php php php*php Aphp dayphp isphp definedphp asphp php0php0php:php0php0php-php2php3php:php5php9php Pacificphp timephp.
php php php php php php*
php php php php php php*php php@returnphp php Zendphp_Servicephp_Technoratiphp_KeyInfoResult
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@linkphp php php php httpphp:php/php/developersphp.technoratiphp.comphp/wikiphp/KeyInfophp Technoratiphp APIphp:php Keyphp Infophp reference
php php php php php php*php/
php php php php publicphp functionphp keyInfophp(php)
php php php php php{
php php php php php php php php staticphp php$defaultOptionsphp php=php arrayphp(php)php;

php php php php php php php php php$optionsphp php=php php$thisphp-php>php_prepareOptionsphp(arrayphp(php)php,php php$defaultOptionsphp)php;
php php php php php php php php php/php/php youphp donphp'tphp needphp tophp validatephp thisphp request
php php php php php php php php php/php/php becausephp keyphp isphp thephp onlyphp mandatoryphp element
php php php php php php php php php/php/php andphp itphp'sphp alreadyphp setphp inphp php#php_prepareOptions
php php php php php php php php php$responsephp php=php php$thisphp-php>php_makeRequestphp(selfphp:php:APIphp_PATHphp_KEYINFOphp,php php$optionsphp)php;
php php php php php php php php php$domphp php=php php$thisphp-php>php_convertResponseAndCheckContentphp(php$responsephp)php;

php php php php php php php php php/php*php*
php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_KeyInfoResult
php php php php php php php php php php*php/
php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/KeyInfoResultphp.phpphp'php;
php php php php php php php php returnphp newphp Zendphp_Servicephp_Technoratiphp_KeyInfoResultphp(php$domphp,php php$thisphp-php>php_apiKeyphp)php;
php php php php php}


php php php php php/php*php*
php php php php php php*php Returnsphp Technoratiphp APIphp keyphp.
php php php php php php*
php php php php php php*php php@returnphp stringphp php php Technoratiphp APIphp key
php php php php php php*php/
php php php php publicphp functionphp getApiKeyphp(php)
php php php php php{
php php php php php php php php returnphp php$thisphp-php>php_apiKeyphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Returnsphp aphp referencephp tophp thephp RESTphp clientphp objectphp inphp usephp.
php php php php php php*
php php php php php php*php Ifphp thephp referencephp hasnphp'tphp beingphp inizializedphp yetphp,
php php php php php php*php thenphp aphp newphp Zendphp_Restphp_Clientphp instancephp isphp createdphp.
php php php php php php*
php php php php php php*php php@returnphp Zendphp_Restphp_Client
php php php php php php*php/
php php php php publicphp functionphp getRestClientphp(php)
php php php php php{
php php php php php php php php ifphp php(php$thisphp-php>php_restClientphp php=php=php=php nullphp)php php{
php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php*php php@seephp Zendphp_Restphp_Client
php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Restphp/Clientphp.phpphp'php;
php php php php php php php php php php php php php$thisphp-php>php_restClientphp php=php newphp Zendphp_Restphp_Clientphp(selfphp:php:APIphp_URIphp_BASEphp)php;
php php php php php php php php php}

php php php php php php php php returnphp php$thisphp-php>php_restClientphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Setsphp Technoratiphp APIphp keyphp.
php php php php php php*
php php php php php php*php Bephp awarephp thatphp thisphp functionphp doesnphp'tphp validatephp thephp keyphp.
php php php php php php*php Thephp keyphp isphp validatedphp asphp soonphp asphp thephp firstphp APIphp requestphp isphp sentphp.
php php php php php php*php Ifphp thephp keyphp isphp invalidphp,php thephp APIphp requestphp methodphp willphp throw
php php php php php php*php aphp Zendphp_Servicephp_Technoratiphp_Exceptionphp exceptionphp withphp Invalidphp Keyphp messagephp.
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$keyphp php php php php Technoratiphp APIphp Key
php php php php php php*php php@returnphp php void
php php php php php php*php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apikeyphp.htmlphp Howphp tophp getphp yourphp Technoratiphp APIphp Key
php php php php php php*php/
php php php php publicphp functionphp setApiKeyphp(php$keyphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_apiKeyphp php=php php$keyphp;
php php php php php php php php returnphp php$thisphp;
php php php php php}


php php php php php/php*php*
php php php php php php*php Validatesphp Cosmosphp queryphp optionsphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateCosmosphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php staticphp php$validOptionsphp php=php arrayphp(php'keyphp'php,php php'urlphp'php,
php php php php php php php php php php php php php'typephp'php,php php'limitphp'php,php php'startphp'php,php php'currentphp'php,php php'claimphp'php,php php'highlightphp'php,php php'formatphp'php)php;

php php php php php php php php php/php/php Validatephp keysphp inphp thephp php$optionsphp array
php php php php php php php php php$thisphp-php>php_compareOptionsphp(php$optionsphp,php php$validOptionsphp)php;
php php php php php php php php php/php/php Validatephp urlphp php(requiredphp)
php php php php php php php php php$thisphp-php>php_validateOptionUrlphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp limitphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionLimitphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp startphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionStartphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp formatphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionFormatphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp typephp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateInArrayOptionphp(php'typephp'php,php php$optionsphp,php arrayphp(php'linkphp'php,php php'weblogphp'php)php)php;
php php php php php php php php php/php/php Validatephp claimphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionClaimphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp highlightphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateIntegerOptionphp(php'highlightphp'php,php php$optionsphp)php;
php php php php php php php php php/php/php Validatephp currentphp php(optionalphp)
php php php php php php php php ifphp php(issetphp(php$optionsphp[php'currentphp'php]php)php)php php{
php php php php php php php php php php php php php$tmpphp php=php php(intphp)php php$optionsphp[php'currentphp'php]php;
php php php php php php php php php php php php php$optionsphp[php'currentphp'php]php php=php php$tmpphp php?php php'yesphp'php php:php php'nophp'php;
php php php php php php php php php}

php php php php php}

php php php php php/php*php*
php php php php php php*php Validatesphp Searchphp queryphp optionsphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php php php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateSearchphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php staticphp php$validOptionsphp php=php arrayphp(php'keyphp'php,php php'queryphp'php,
php php php php php php php php php php php php php'languagephp'php,php php'authorityphp'php,php php'limitphp'php,php php'startphp'php,php php'claimphp'php,php php'formatphp'php)php;

php php php php php php php php php/php/php Validatephp keysphp inphp thephp php$optionsphp array
php php php php php php php php php$thisphp-php>php_compareOptionsphp(php$optionsphp,php php$validOptionsphp)php;
php php php php php php php php php/php/php Validatephp queryphp php(requiredphp)
php php php php php php php php php$thisphp-php>php_validateMandatoryOptionphp(php'queryphp'php,php php$optionsphp)php;
php php php php php php php php php/php/php Validatephp authorityphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateInArrayOptionphp(php'authorityphp'php,php php$optionsphp,php arrayphp(php'nphp'php,php php'aphp1php'php,php php'aphp4php'php,php php'aphp7php'php)php)php;
php php php php php php php php php/php/php Validatephp limitphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionLimitphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp startphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionStartphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp claimphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionClaimphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp formatphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionFormatphp(php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Validatesphp Tagphp queryphp optionsphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php php php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateTagphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php staticphp php$validOptionsphp php=php arrayphp(php'keyphp'php,php php'tagphp'php,
php php php php php php php php php php php php php'limitphp'php,php php'startphp'php,php php'excerptsizephp'php,php php'topexcerptsizephp'php,php php'formatphp'php)php;

php php php php php php php php php/php/php Validatephp keysphp inphp thephp php$optionsphp array
php php php php php php php php php$thisphp-php>php_compareOptionsphp(php$optionsphp,php php$validOptionsphp)php;
php php php php php php php php php/php/php Validatephp queryphp php(requiredphp)
php php php php php php php php php$thisphp-php>php_validateMandatoryOptionphp(php'tagphp'php,php php$optionsphp)php;
php php php php php php php php php/php/php Validatephp limitphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionLimitphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp startphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionStartphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp excerptsizephp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateIntegerOptionphp(php'excerptsizephp'php,php php$optionsphp)php;
php php php php php php php php php/php/php Validatephp excerptsizephp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateIntegerOptionphp(php'topexcerptsizephp'php,php php$optionsphp)php;
php php php php php php php php php/php/php Validatephp formatphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionFormatphp(php$optionsphp)php;
php php php php php}


php php php php php/php*php*
php php php php php php*php Validatesphp DailyCountsphp queryphp optionsphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php php php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateDailyCountsphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php staticphp php$validOptionsphp php=php arrayphp(php'keyphp'php,php php'qphp'php,
php php php php php php php php php php php php php'daysphp'php,php php'formatphp'php)php;

php php php php php php php php php/php/php Validatephp keysphp inphp thephp php$optionsphp array
php php php php php php php php php$thisphp-php>php_compareOptionsphp(php$optionsphp,php php$validOptionsphp)php;
php php php php php php php php php/php/php Validatephp qphp php(requiredphp)
php php php php php php php php php$thisphp-php>php_validateMandatoryOptionphp(php'qphp'php,php php$optionsphp)php;
php php php php php php php php php/php/php Validatephp formatphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionFormatphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp daysphp php(optionalphp)
php php php php php php php php ifphp php(issetphp(php$optionsphp[php'daysphp'php]php)php)php php{
php php php php php php php php php php php php php$optionsphp[php'daysphp'php]php php=php php(intphp)php php$optionsphp[php'daysphp'php]php;
php php php php php php php php php php php php ifphp php(php$optionsphp[php'daysphp'php]php <php selfphp:php:PARAMphp_DAYSphp_MINphp_VALUEphp php|php|
php php php php php php php php php php php php php php php php php$optionsphp[php'daysphp'php]php php>php selfphp:php:PARAMphp_DAYSphp_MAXphp_VALUEphp)php php{
php php php php php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php php php php php throwphp newphp Zendphp_Servicephp_Technoratiphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php php php php php"Invalidphp valuephp php'php"php php.php php$optionsphp[php'daysphp'php]php php.php php"php'php forphp php'daysphp'php optionphp"php)php;
php php php php php php php php php php php php php}
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Validatesphp GetInfophp queryphp optionsphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php php php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateGetInfophp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php staticphp php$validOptionsphp php=php arrayphp(php'keyphp'php,php php'usernamephp'php,
php php php php php php php php php php php php php'formatphp'php)php;

php php php php php php php php php/php/php Validatephp keysphp inphp thephp php$optionsphp array
php php php php php php php php php$thisphp-php>php_compareOptionsphp(php$optionsphp,php php$validOptionsphp)php;
php php php php php php php php php/php/php Validatephp usernamephp php(requiredphp)
php php php php php php php php php$thisphp-php>php_validateMandatoryOptionphp(php'usernamephp'php,php php$optionsphp)php;
php php php php php php php php php/php/php Validatephp formatphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionFormatphp(php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Validatesphp TopTagsphp queryphp optionsphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateTopTagsphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php staticphp php$validOptionsphp php=php arrayphp(php'keyphp'php,
php php php php php php php php php php php php php'limitphp'php,php php'startphp'php,php php'formatphp'php)php;

php php php php php php php php php/php/php Validatephp keysphp inphp thephp php$optionsphp array
php php php php php php php php php$thisphp-php>php_compareOptionsphp(php$optionsphp,php php$validOptionsphp)php;
php php php php php php php php php/php/php Validatephp limitphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionLimitphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp startphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionStartphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp formatphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionFormatphp(php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Validatesphp BlogInfophp queryphp optionsphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php php php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateBlogInfophp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php staticphp php$validOptionsphp php=php arrayphp(php'keyphp'php,php php'urlphp'php,
php php php php php php php php php php php php php'formatphp'php)php;

php php php php php php php php php/php/php Validatephp keysphp inphp thephp php$optionsphp array
php php php php php php php php php$thisphp-php>php_compareOptionsphp(php$optionsphp,php php$validOptionsphp)php;
php php php php php php php php php/php/php Validatephp urlphp php(requiredphp)
php php php php php php php php php$thisphp-php>php_validateOptionUrlphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp formatphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionFormatphp(php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Validatesphp TopTagsphp queryphp optionsphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateBlogPostTagsphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php staticphp php$validOptionsphp php=php arrayphp(php'keyphp'php,php php'urlphp'php,
php php php php php php php php php php php php php'limitphp'php,php php'startphp'php,php php'formatphp'php)php;

php php php php php php php php php/php/php Validatephp keysphp inphp thephp php$optionsphp array
php php php php php php php php php$thisphp-php>php_compareOptionsphp(php$optionsphp,php php$validOptionsphp)php;
php php php php php php php php php/php/php Validatephp urlphp php(requiredphp)
php php php php php php php php php$thisphp-php>php_validateOptionUrlphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp limitphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionLimitphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp startphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionStartphp(php$optionsphp)php;
php php php php php php php php php/php/php Validatephp formatphp php(optionalphp)
php php php php php php php php php$thisphp-php>php_validateOptionFormatphp(php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp whetherphp anphp optionphp isphp inphp aphp givenphp arrayphp.
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$namephp php php php optionphp name
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@paramphp php php arrayphp php$arrayphp php php php arrayphp ofphp validphp options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateInArrayOptionphp(php$namephp,php php$optionsphp,php arrayphp php$arrayphp)
php php php php php{
php php php php php php php php ifphp php(issetphp(php$optionsphp[php$namephp]php)php php&php&php php!inphp_arrayphp(php$optionsphp[php$namephp]php,php php$arrayphp)php)php php{
php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Servicephp_Technoratiphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Invalidphp valuephp php'php{php$optionsphp[php$namephp]php}php'php forphp php'php$namephp'php optionphp"php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp whetherphp mandatoryphp php$namephp optionphp existsphp andphp itphp'sphp validphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateMandatoryOptionphp(php$namephp,php php$optionsphp)
php php php php php{
php php php php php php php php ifphp php(php!issetphp(php$optionsphp[php$namephp]php)php php|php|php php!trimphp(php$optionsphp[php$namephp]php)php)php php{
php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Servicephp_Technoratiphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Emptyphp valuephp forphp php'php$namephp'php optionphp"php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp whetherphp php$namephp optionphp isphp aphp validphp integerphp andphp castsphp itphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateIntegerOptionphp(php$namephp,php php$optionsphp)
php php php php php{
php php php php php php php php ifphp php(issetphp(php$optionsphp[php$namephp]php)php)php php{
php php php php php php php php php php php php php$optionsphp[php$namephp]php php=php php(intphp)php php$optionsphp[php$namephp]php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Makesphp andphp HTTPphp GETphp requestphp tophp givenphp php$pathphp withphp php$optionsphp.
php php php php php php*php HTTPphp Responsephp isphp firstphp validatedphp,php thenphp returnedphp.
php php php php php php*
php php php php php php*php php@paramphp php php stringphp php$path
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php Zendphp_Httpphp_Response
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exceptionphp onphp failure
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_makeRequestphp(php$pathphp,php php$optionsphp php=php arrayphp(php)php)
php php php php php{
php php php php php php php php php$restClientphp php=php php$thisphp-php>getRestClientphp(php)php;
php php php php php php php php php$restClientphp-php>getHttpClientphp(php)php-php>resetParametersphp(php)php;
php php php php php php php php php$responsephp php=php php$restClientphp-php>restGetphp(php$pathphp,php php$optionsphp)php;
php php php php php php php php selfphp:php:php_checkResponsephp(php$responsephp)php;
php php php php php php php php returnphp php$responsephp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp whetherphp php'claimphp'php optionphp valuephp isphp validphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateOptionClaimphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_validateIntegerOptionphp(php'claimphp'php,php php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp whetherphp php'formatphp'php optionphp valuephp isphp validphp.
php php php php php php*php Bephp awarephp thatphp Zendphp_Servicephp_Technoratiphp supportsphp onlyphp XMLphp asphp formatphp valuephp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exceptionphp ifphp php'formatphp'php valuephp php!php=php XML
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateOptionFormatphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php ifphp php(issetphp(php$optionsphp[php'formatphp'php]php)php php&php&php php$optionsphp[php'formatphp'php]php php!php=php php'xmlphp'php)php php{
php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Servicephp_Technoratiphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Invalidphp valuephp php'php"php php.php php$optionsphp[php'formatphp'php]php php.php php"php'php forphp php'formatphp'php optionphp.php php"php php.
php php php php php php php php php php php php php php php php php php php php php php php php php"Zendphp_Servicephp_Technoratiphp supportsphp onlyphp php'xmlphp'php"php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp whetherphp php'limitphp'php optionphp valuephp isphp validphp.
php php php php php php*php Valuephp mustphp bephp anphp integerphp greaterphp thanphp PARAMphp_LIMITphp_MINphp_VALUE
php php php php php php*php andphp lowerphp thanphp PARAMphp_LIMITphp_MAXphp_VALUEphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exceptionphp ifphp php'limitphp'php valuephp isphp invalid
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateOptionLimitphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php ifphp php(php!issetphp(php$optionsphp[php'limitphp'php]php)php)php returnphp;

php php php php php php php php php$optionsphp[php'limitphp'php]php php=php php(intphp)php php$optionsphp[php'limitphp'php]php;
php php php php php php php php ifphp php(php$optionsphp[php'limitphp'php]php <php selfphp:php:PARAMphp_LIMITphp_MINphp_VALUEphp php|php|
php php php php php php php php php php php php php$optionsphp[php'limitphp'php]php php>php selfphp:php:PARAMphp_LIMITphp_MAXphp_VALUEphp)php php{
php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Servicephp_Technoratiphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Invalidphp valuephp php'php"php php.php php$optionsphp[php'limitphp'php]php php.php php"php'php forphp php'limitphp'php optionphp"php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp whetherphp php'startphp'php optionphp valuephp isphp validphp.
php php php php php php*php Valuephp mustphp bephp anphp integerphp greaterphp thanphp php0php.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exceptionphp ifphp php'startphp'php valuephp isphp invalid
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_validateOptionStartphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php ifphp php(php!issetphp(php$optionsphp[php'startphp'php]php)php)php returnphp;

php php php php php php php php php$optionsphp[php'startphp'php]php php=php php(intphp)php php$optionsphp[php'startphp'php]php;
php php php php php php php php ifphp php(php$optionsphp[php'startphp'php]php <php selfphp:php:PARAMphp_STARTphp_MINphp_VALUEphp)php php{
php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Servicephp_Technoratiphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Invalidphp valuephp php'php"php php.php php$optionsphp[php'startphp'php]php php.php php"php'php forphp php'startphp'php optionphp"php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp whetherphp php'urlphp'php optionphp valuephp existsphp andphp isphp validphp.
php php php php php php*php php'urlphp'php mustphp bephp aphp validphp HTTPphp(sphp)php URLphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exceptionphp ifphp php'urlphp'php valuephp isphp invalid
php php php php php php*php php@accessphp php protected
php php php php php php*php php@todophp php php php supportphp forphp Zendphp_Uriphp_Http
php php php php php php*php/
php php php php protectedphp functionphp php_validateOptionUrlphp(arrayphp php$optionsphp)
php php php php php{
php php php php php php php php php$thisphp-php>php_validateMandatoryOptionphp(php'urlphp'php,php php$optionsphp)php;
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp XMLphp responsephp contentphp forphp errorsphp.
php php php php php php*
php php php php php php*php php@paramphp php php DomDocumentphp php$domphp php php php thephp XMLphp responsephp asphp aphp DOMphp document
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@linkphp php php php httpphp:php/php/technoratiphp.comphp/developersphp/apiphp/errorphp.htmlphp Technoratiphp APIphp:php Errorphp response
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp staticphp functionphp php_checkErrorsphp(DomDocumentphp php$domphp)
php php php php php{
php php php php php php php php php$xpathphp php=php newphp DOMXPathphp(php$domphp)php;

php php php php php php php php php$resultphp php=php php$xpathphp-php>queryphp(php"php/tapiphp/documentphp/resultphp/errorphp"php)php;
php php php php php php php php ifphp php(php$resultphp-php>lengthphp php>php=php php1php)php php{
php php php php php php php php php php php php php$errorphp php=php php$resultphp-php>itemphp(php0php)php-php>nodeValuephp;
php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Servicephp_Technoratiphp_Exceptionphp(php$errorphp)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Convertsphp php$responsephp bodyphp tophp aphp DOMphp objectphp andphp checksphp itphp.
php php php php php php*
php php php php php php*php php@paramphp php php Zendphp_Httpphp_Responsephp php$response
php php php php php php*php php@returnphp php DOMDocument
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exceptionphp ifphp responsephp contentphp containsphp anphp errorphp message
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_convertResponseAndCheckContentphp(Zendphp_Httpphp_Responsephp php$responsephp)
php php php php php{
php php php php php php php php php$domphp php=php newphp DOMDocumentphp(php)php;
php php php php php php php php php$domphp-php>loadXMLphp(php$responsephp-php>getBodyphp(php)php)php;
php php php php php php php php selfphp:php:php_checkErrorsphp(php$domphp)php;
php php php php php php php php returnphp php$domphp;
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp ReSTphp responsephp forphp errorsphp.
php php php php php php*
php php php php php php*php php@paramphp php php Zendphp_Httpphp_Responsephp php$responsephp php php php thephp ReSTphp response
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp staticphp functionphp php_checkResponsephp(Zendphp_Httpphp_Responsephp php$responsephp)
php php php php php{
php php php php php php php php ifphp php(php$responsephp-php>isErrorphp(php)php)php php{
php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Servicephp_Technoratiphp_Exceptionphp(sprintfphp(
php php php php php php php php php php php php php php php php php php php php php php php php php'Invalidphp responsephp statusphp codephp php(HTTPphp/php%sphp php%sphp php%sphp)php'php,
php php php php php php php php php php php php php php php php php php php php php php php php php$responsephp-php>getVersionphp(php)php,php php$responsephp-php>getStatusphp(php)php,php php$responsephp-php>getMessagephp(php)php)php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Checksphp whetherphp userphp givenphp optionsphp arephp validphp.
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php php php php php php php userphp options
php php php php php php*php php@paramphp php php arrayphp php$validOptionsphp php php validphp options
php php php php php php*php php@returnphp php void
php php php php php php*php php@throwsphp php Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_compareOptionsphp(arrayphp php$optionsphp,php arrayphp php$validOptionsphp)
php php php php php{
php php php php php php php php php$differencephp php=php arrayphp_diffphp(arrayphp_keysphp(php$optionsphp)php,php php$validOptionsphp)php;
php php php php php php php php ifphp php(php$differencephp)php php{
php php php php php php php php php php php php php/php*php*
php php php php php php php php php php php php php php*php php@seephp Zendphp_Servicephp_Technoratiphp_Exception
php php php php php php php php php php php php php php*php/
php php php php php php php php php php php php requirephp_oncephp php'Zendphp/Servicephp/Technoratiphp/Exceptionphp.phpphp'php;
php php php php php php php php php php php php throwphp newphp Zendphp_Servicephp_Technoratiphp_Exceptionphp(
php php php php php php php php php php php php php php php php php php php php php php php php php"Thephp followingphp parametersphp arephp invalidphp:php php'php"php php.
php php php php php php php php php php php php php php php php php php php php php php php php implodephp(php"php'php,php php'php"php,php php$differencephp)php php.php php"php'php"php)php;
php php php php php php php php php}
php php php php php}

php php php php php/php*php*
php php php php php php*php Preparesphp optionsphp forphp thephp request
php php php php php php*
php php php php php php*php php@paramphp php php arrayphp php$optionsphp php php php php php php php userphp options
php php php php php php*php php@paramphp php php arrayphp php$defaultOptionsphp defaultphp options
php php php php php php*php php@returnphp php arrayphp Mergedphp arrayphp ofphp userphp andphp defaultphp/requiredphp optionsphp.
php php php php php php*php php@accessphp php protected
php php php php php php*php/
php php php php protectedphp functionphp php_prepareOptionsphp(php$optionsphp,php arrayphp php$defaultOptionsphp)
php php php php php{
php php php php php php php php php$optionsphp php=php php(arrayphp)php php$optionsphp;php php/php/php forcephp castphp tophp convertphp nullphp tophp arrayphp(php)
php php php php php php php php php$optionsphp[php'keyphp'php]php php=php php$thisphp-php>php_apiKeyphp;
php php php php php php php php php$optionsphp php=php arrayphp_mergephp(php$defaultOptionsphp,php php$optionsphp)php;
php php php php php php php php returnphp php$optionsphp;
php php php php php}
php}
